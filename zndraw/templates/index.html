<!DOCTYPE html>
<html>


<head lang="en">
  <meta charset="utf-8">
  <title>ZnDraw</title>
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favion-192x192.png') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">
  <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
  <script type="importmap">
  {
    "imports": {
      "three": "https://unpkg.com/three@0.151.3/build/three.module.js",
      "three/addons/": "https://unpkg.com/three@0.151.3/examples/jsm/",
      "./modules/": "{{ url_for('static', filename='/modules/') }}"
    }
  }
</script>
</head>

<body>
  <script type="module" src="{{ url_for('static', filename='main.js') }}"></script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
    crossorigin="anonymous"></script>


  <!-- Loading Spinner -->
  <div class="atom-spinner" , id="atom-spinner">
    <div class="spinner-inner">
      <div class="spinner-line"></div>
      <div class="spinner-line"></div>
      <div class="spinner-line"></div>
      <!--Chrome renders little circles malformed :(-->
      <div class="spinner-circle">
        &#9679;
      </div>
    </div>
  </div>
  <div id="greyOut"></div>


  <!-- Navigation -->

  <nav class="navbar fixed-top navbar-expand-sm bg-light"> <!-- navbar-expand to use smaller breakpoint -->
    <div class="container-fluid">
      <a class="navbar-brand">
        <!-- <img src="{{ url_for('static', filename='favion-192x192.png') }}" alt="ZnDraw Logo" width="30" height="24"> -->
        ZnDraw
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown"
        aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item mx-1">
            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas"
              data-bs-target="#particleCanvas" aria-controls="offcanvasExample">
              Particles
            </button>
          </li>
          <li class="nav-item mx-1">
            <button class="btn btn-outline-secondary" type="button" data-bs-toggle="offcanvas"
              data-bs-target="#interactionCanvas" aria-controls="offcanvasExample">
              Interaction
            </button>
          </li>
        </ul>
        <form class="d-flex">
          <button class="btn btn-outline-primary" type="button" data-bs-toggle="collapse" data-bs-target="#infoBoxCollapse" aria-expanded="false" aria-controls="infoBoxCollapse">
            Info Box
          </button>
        </form>
      </div>
    </div>
  </nav>

  <!-- Off Canvas -->
  <!-- Particles -->
  <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
    id="particleCanvas" aria-labelledby="particleCanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="particleCanvasLabel">Particles</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">

      <div class="mb-3">
        <label for="materialSelect" class="form-label">Select particle material</label>
        <select class="form-select" id="materialSelect">
        </select>
        <div id="materialSelectHelp" class="form-text">Change the material of the particles and bonds..</div>
      </div>
      <div class="mb-3">
        <input class="form-check-input" type="checkbox" value="" id="wireframe">
        <label for="wireframe" class="form-label">Wireframe material</label>
      </div>
      <div class="mb-3">
        <label for="sphereRadius" class="form-label" id="sphereRadiusLabel">Sphere radius: 1.0</label>
        <input type="range" class="form-range" id="sphereRadius" min="0.1" max="4" step="0.1" value="1.0">
      </div>
      <div class="mb-3">
        <label for="bondDiameter" class="form-label" id="bondDiameterLabel">Bond diameter: 1.0</label>
        <input type="range" class="form-range" id="bondDiameter" min="0.1" max="1.5" step="0.1" value="1.0">
      </div>
      <div class="mb-3">
        <label for="resolution" class="form-label" id="resolutionLabel">Resolution: 5</label>
        <input type="range" class="form-range" id="resolution" min="1" max="20" step="1" value="5.0">
      </div>

    </div>
  </div>

  <!-- Interaction -->
  <div class="offcanvas offcanvas-start" data-bs-scroll="true" data-bs-backdrop="false" tabindex="-1"
    id="interactionCanvas" aria-labelledby="interactioneCanvasLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="interactionCanvasLabel">Particles</h5>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">

      <div class="mb-3">
        <label for="selection-method" class="form-label">Select particle material</label>
        <select class="form-select" aria-label="Default select example" id="selection-method">
          <option selected, value="particles">Particles</option>
          <option value="species">Species</option>
          <option value="connected">Connected Particles</option>
          <option value="none">None</option>
        </select>
        <div id="selection-methodHelp" class="form-text">Select single particles, whole molecules or disable selection.</div>
      </div>
      <div class="mb-3">
        <button type="button" class="btn btn-secondary" id="reset_selection">Reset Selection</button>
      </div>
    </div>
  </div>

  <!-- TODOs -->
  <div style="display: none;">
    <div class="row">
      <div class="col-sm">
        <div class="form-check form-switch">
          <input class="form-check-input" type="checkbox" value="" id="autoRestart">
          <label class="form-check-label" for="autoRestart">
            Auto Restart
          </label>
        </div>


      </div>
      <div class="col-sm">
        <div class="row">
          <div class="col-sm-3">
            <div class="row">Max FPS</div>
            <div class="row">POST</div>

            <div class="row">1. Light</div>
            <div class="row">2. Light</div>
          </div>
          <div class="col-sm-2">
            <div class="row"><output id="max_fps_output">{{ config.max_fps }}</output></div>
            <div class="row"><output id="frames_per_post_output">{{ config.frames_per_post }}</output></div>

            <div class="row"><output id="spotLightIntensity_output">1</output></div>
            <div class="row"><output id="hemisphereLightIntensity_output">0.1</output></div>
          </div>
          <div class="col-sm">
            <div class="row"><input type="range" class="form-range" min="1" max="100" step="0.5" id="max_fps"
                value="{{ config.max_fps }}" , oninput="max_fps_output.value = this.value">
            </div>
            <div class="row"><input type="range" class="form-range" min="1" max="500" id="frames_per_post"
                value="{{ config.frames_per_post }}" , oninput="frames_per_post_output.value = this.value">
            </div>

            <div class="row"><input type="range" class="form-range" min="0" max="1" step="0.01" id="spotLightIntensity"
                value="1"></div>
            <div class="row"><input type="range" class="form-range" min="0" max="1" step="0.01"
                id="hemisphereLightIntensity" value="0.1"></div>
          </div>
          <div class="col-sm-1"><!-- Padding on the right --></div>

        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-sm">

          <div class="btn-group-vertical" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-secondary" id="animate" {% if config.update_function %} disabled {%
              endif %}>Load Animation</button>
            <button type="button" class="btn btn-secondary" id="hide_selection" disabled>Hide
              Selection</button>
            <button type="button" class="btn btn-secondary" id="reset">Reset Scene</button>
          </div>
        </div>
        <div class="col-sm">
          <div class="btn-group-vertical" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-outline-dark" id="sphere_plus">+</button>
            <button type="button" class="btn btn-outline-dark" id="bond_plus">+</button>
            <button type="button" class="btn btn-outline-dark" id="resolution_plus">+</button>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-outline-dark" disabled>Particles</button>
            <button type="button" class="btn btn-outline-dark" disabled>Bonds</button>
            <button type="button" class="btn btn-outline-dark" disabled>Resolution</button>
          </div>
          <div class="btn-group-vertical" role="group" aria-label="Basic example">
            <button type="button" class="btn btn-outline-dark" id="sphere_minus">-</button>
            <button type="button" class="btn btn-outline-dark" id="bond_minus">-</button>
            <button type="button" class="btn btn-outline-dark" id="resolution_minus">-</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Box -->
  <div class="collapse" id="infoBoxCollapse">
  <div class="container-fluid rounded border border-dark" id="infoBox">
    <dl class="row">
      <dt class="col-sm-3">File</dt>
      <dd class="col-sm-9"><code>{{ config.file }}</code></dd>
      <dt class="col-sm-3">FPS</dt>
      <dd class="col-sm-9" id="FPS">-</dd>
      <dt class="col-sm-3">Particles</dt>
      <dd class="col-sm-9" id="n_particles">-</dd>
      <dt class="col-sm-3">Bonds</dt>
      <dd class="col-sm-9" id="n_bonds">-</dd>
      <dt class="col-sm-3">Selected IDs</dt>
      <dd class="col-sm-9" id="lst_selected_ids"></dd>
      {% if config.update_function %}
      <dt class="col-sm-3">Function</dt>
      <dd class="col-sm-9" id="lst_selected_ids"><code>{{ config.update_function }}</code></dd>
      {% endif %}
    </dl>
  </div>
</div>

  <!-- Progress Bar -->
  <div id="info"></div>
  <div id="progressBar"></div>
  <div id="bufferBar"></div>
</body>

</html>