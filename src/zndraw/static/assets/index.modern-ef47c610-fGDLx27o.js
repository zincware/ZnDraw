import{s as id,a as ad,u as ld,e as vs,c as De,g as ct,b as Ge,d as Ke,f as Ce,h as oe,i as Ye,C as sd,T as cd,j as ms,B as ud,k as dd,l as gs,m as ys,P as ii,F as hd,n as fd,M as pd,o as vd,p as md,q as qi,r as gd,L as yd,t as bd,v as Hi,w as xd,x as Vi,y as Ui,G as wd,z as Md,A as bs,E as Cd,D as Sd,S as Ad,H as Dr,_,I as Wt,J as vo,K as ai,N as Wi,O as kd,Q as Id,R as Pd,U as mo,V as Ed,W as ir,X as xs,Y as Gt,Z as Rt,$ as Od,a0 as He,a1 as Kt,a2 as ce,a3 as ie,a4 as it,a5 as li,a6 as Nd,a7 as Dd,a8 as ws,a9 as $e,aa as yr,ab as br,ac as Yt,ad as Ld,ae as _d,af as Ms,ag as Td,ah as Rd,ai as jd,aj as Me,ak as Cs,al as Ss,am as mr,an as tt,ao as Gi,ap as Ki,aq as Bd,ar as Lr,as as As,at as Fd,au as ks,av as zd,aw as _r,ax as We,ay as $d,az as qd,aA as Mn,aB as Cn,aC as Hd,aD as Yi,aE as Vd,aF as Is,aG as Ud,aH as Wd,aI as Sn,aJ as Jr,aK as Gd,aL as Kd,aM as en,aN as Ps,aO as rt,aP as Es,aQ as Yd,aR as Xd,aS as Zd,aT as Qd,aU as ht,aV as Jd,aW as Xi,aX as Zi,aY as Os,aZ as Ns,a_ as eh,a$ as th,b0 as rh,b1 as tn,b2 as Ds,b3 as nh,b4 as oh,b5 as ih,b6 as ah,b7 as lh,b8 as sh,b9 as ch,ba as Ls,bb as _s,bc as Ts,bd as yt,be as uh,bf as si,bg as dh,bh as hh,bi as ci,bj as fh,bk as ph,bl as Rs,bm as vh,bn as js,bo as mh,bp as gh,bq as yh,br as bh,bs as xh,bt as wh,bu as Mh,bv as Qi,bw as Ch,bx as Sh,by as Ah,bz as kh,bA as Ih}from"./SmilesEditDialog-CUTllpY1.js";import{r as x,j as te,_ as U,a as Ph,c as bt}from"./three-D_Q1nxF1.js";import{an as Le,cr as Bs,cs as Fs,ct as zs,ch as Eh,cu as C,cv as Oh,cl as $s,r as An,ce as Nh,cw as Dh}from"./mui-DvTeEhIk.js";import{p as Lh,q as _h,t as Th,v as Rh,l as ye,k as V,j as ue,n as Tr,w as jh,x as Bh}from"./index-CXkB7Wti.js";import"./plotly-D9v615DQ.js";import"./vendor-lXdfEqoL.js";const Fh=["className","component"];function zh(t={}){const{themeId:e,defaultTheme:r,defaultClassName:n="MuiBox-root",generateClassName:o}=t,a=id("div",{shouldForwardProp:l=>l!=="theme"&&l!=="sx"&&l!=="as"})(ad);return x.forwardRef(function(s,c){const d=ld(r),h=vs(s),{className:f,component:v="div"}=h,p=Le(h,Fh);return te.jsx(a,U({as:v,ref:c,className:De(f,o?o(n):n),theme:e&&d[e]||d},p))})}function $n(t,e){var r,n;return x.isValidElement(t)&&e.indexOf((r=t.type.muiName)!=null?r:(n=t.type)==null||(n=n._payload)==null||(n=n.value)==null?void 0:n.muiName)!==-1}function $h(t){return x.Children.toArray(t).filter(e=>x.isValidElement(e))}function qh(t){return ct("MuiTypography",t)}Ge("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const Hh=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Vh=t=>{const{align:e,gutterBottom:r,noWrap:n,paragraph:o,variant:a,classes:i}=t,l={root:["root",a,t.align!=="inherit"&&`align${oe(e)}`,r&&"gutterBottom",n&&"noWrap",o&&"paragraph"]};return Ye(l,qh,i)},Uh=Ce("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.variant&&e[r.variant],r.align!=="inherit"&&e[`align${oe(r.align)}`],r.noWrap&&e.noWrap,r.gutterBottom&&e.gutterBottom,r.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>U({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),Ji={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Wh={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Gh=t=>Wh[t]||t,dr=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiTypography"}),o=Gh(n.color),a=vs(U({},n,{color:o})),{align:i="inherit",className:l,component:s,gutterBottom:c=!1,noWrap:d=!1,paragraph:h=!1,variant:f="body1",variantMapping:v=Ji}=a,p=Le(a,Hh),g=U({},a,{align:i,color:o,className:l,component:s,gutterBottom:c,noWrap:d,paragraph:h,variant:f,variantMapping:v}),y=s||(h?"p":v[f]||Ji[f])||"span",b=Vh(g);return te.jsx(Uh,U({as:y,ref:r,ownerState:g,className:De(b.root,l)},p))}),Kh=Ge("MuiBox",["root"]),Yh=ms(),qs=zh({themeId:cd,defaultTheme:Yh,defaultClassName:Kh.root,generateClassName:sd.generate});function Xh(t){return ct("MuiButtonGroup",t)}const ve=Ge("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),Zh=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],Qh=(t,e)=>{const{ownerState:r}=t;return[{[`& .${ve.grouped}`]:e.grouped},{[`& .${ve.grouped}`]:e[`grouped${oe(r.orientation)}`]},{[`& .${ve.grouped}`]:e[`grouped${oe(r.variant)}`]},{[`& .${ve.grouped}`]:e[`grouped${oe(r.variant)}${oe(r.orientation)}`]},{[`& .${ve.grouped}`]:e[`grouped${oe(r.variant)}${oe(r.color)}`]},{[`& .${ve.firstButton}`]:e.firstButton},{[`& .${ve.lastButton}`]:e.lastButton},{[`& .${ve.middleButton}`]:e.middleButton},e.root,e[r.variant],r.disableElevation===!0&&e.disableElevation,r.fullWidth&&e.fullWidth,r.orientation==="vertical"&&e.vertical]},Jh=t=>{const{classes:e,color:r,disabled:n,disableElevation:o,fullWidth:a,orientation:i,variant:l}=t,s={root:["root",l,i==="vertical"&&"vertical",a&&"fullWidth",o&&"disableElevation"],grouped:["grouped",`grouped${oe(i)}`,`grouped${oe(l)}`,`grouped${oe(l)}${oe(i)}`,`grouped${oe(l)}${oe(r)}`,n&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Ye(s,Xh,e)},ef=Ce("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:Qh})(({theme:t,ownerState:e})=>U({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${ve.grouped}`]:U({minWidth:40,"&:hover":U({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${ve.firstButton},& .${ve.middleButton}`]:U({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ve.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${ve.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:gs.alpha(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${ve.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${ve.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":U({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${ve.lastButton},& .${ve.middleButton}`]:U({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),tf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiButtonGroup"}),{children:o,className:a,color:i="primary",component:l="div",disabled:s=!1,disableElevation:c=!1,disableFocusRipple:d=!1,disableRipple:h=!1,fullWidth:f=!1,orientation:v="horizontal",size:p="medium",variant:g="outlined"}=n,y=Le(n,Zh),b=U({},n,{color:i,component:l,disabled:s,disableElevation:c,disableFocusRipple:d,disableRipple:h,fullWidth:f,orientation:v,size:p,variant:g}),M=Jh(b),A=x.useMemo(()=>({className:M.grouped,color:i,disabled:s,disableElevation:c,disableFocusRipple:d,disableRipple:h,fullWidth:f,size:p,variant:g}),[i,s,c,d,h,f,p,g,M.grouped]),m=$h(o),w=m.length,S=k=>{const E=k===0,O=k===w-1;return E&&O?"":E?M.firstButton:O?M.lastButton:M.middleButton};return te.jsx(ef,U({as:l,role:"group",className:De(M.root,a),ref:r,ownerState:b},y,{children:te.jsx(ud.Provider,{value:A,children:m.map((k,E)=>te.jsx(dd.Provider,{value:S(E),children:k},E))})}))});function rf(t){return ct("MuiDialog",t)}const qn=Ge("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Hs=x.createContext({}),nf=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],of=Ce(vd,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),af=t=>{const{classes:e,scroll:r,maxWidth:n,fullWidth:o,fullScreen:a}=t,i={root:["root"],container:["container",`scroll${oe(r)}`],paper:["paper",`paperScroll${oe(r)}`,`paperWidth${oe(String(n))}`,o&&"paperFullWidth",a&&"paperFullScreen"]};return Ye(i,rf,e)},lf=Ce(pd,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),sf=Ce("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.container,e[`scroll${oe(r.scroll)}`]]}})(({ownerState:t})=>U({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),cf=Ce(ii,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.paper,e[`scrollPaper${oe(r.scroll)}`],e[`paperWidth${oe(String(r.maxWidth))}`],r.fullWidth&&e.paperFullWidth,r.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>U({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${qn.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+64)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${qn.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+64)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${qn.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),uf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiDialog"}),o=ys(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":l,BackdropComponent:s,BackdropProps:c,children:d,className:h,disableEscapeKeyDown:f=!1,fullScreen:v=!1,fullWidth:p=!1,maxWidth:g="sm",onBackdropClick:y,onClick:b,onClose:M,open:A,PaperComponent:m=ii,PaperProps:w={},scroll:S="paper",TransitionComponent:k=hd,transitionDuration:E=a,TransitionProps:O}=n,D=Le(n,nf),P=U({},n,{disableEscapeKeyDown:f,fullScreen:v,fullWidth:p,maxWidth:g,scroll:S}),T=af(P),j=x.useRef(),L=H=>{j.current=H.target===H.currentTarget},F=H=>{b&&b(H),j.current&&(j.current=null,y&&y(H),M&&M(H,"backdropClick"))},R=fd(l),q=x.useMemo(()=>({titleId:R}),[R]);return te.jsx(lf,U({className:De(T.root,h),closeAfterTransition:!0,components:{Backdrop:of},componentsProps:{backdrop:U({transitionDuration:E,as:s},c)},disableEscapeKeyDown:f,onClose:M,open:A,ref:r,onClick:F,ownerState:P},D,{children:te.jsx(k,U({appear:!0,in:A,timeout:E,role:"presentation"},O,{children:te.jsx(sf,{className:De(T.container),onMouseDown:L,ownerState:P,children:te.jsx(cf,U({as:m,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":R},w,{className:De(T.paper,w.className),ownerState:P,children:te.jsx(Hs.Provider,{value:q,children:d})}))})}))}))});function df(t){return ct("MuiDialogActions",t)}Ge("MuiDialogActions",["root","spacing"]);const hf=["className","disableSpacing"],ff=t=>{const{classes:e,disableSpacing:r}=t;return Ye({root:["root",!r&&"spacing"]},df,e)},pf=Ce("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,!r.disableSpacing&&e.spacing]}})(({ownerState:t})=>U({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),vf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:a=!1}=n,i=Le(n,hf),l=U({},n,{disableSpacing:a}),s=ff(l);return te.jsx(pf,U({className:De(s.root,o),ownerState:l,ref:r},i))});function mf(t){return ct("MuiDialogContent",t)}Ge("MuiDialogContent",["root","dividers"]);function gf(t){return ct("MuiDialogTitle",t)}const yf=Ge("MuiDialogTitle",["root"]),bf=["className","dividers"],xf=t=>{const{classes:e,dividers:r}=t;return Ye({root:["root",r&&"dividers"]},mf,e)},wf=Ce("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>U({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${yf.root} + &`]:{paddingTop:0}})),Mf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiDialogContent"}),{className:o,dividers:a=!1}=n,i=Le(n,bf),l=U({},n,{dividers:a}),s=xf(l);return te.jsx(wf,U({className:De(s.root,o),ownerState:l,ref:r},i))}),Cf=["className","id"],Sf=t=>{const{classes:e}=t;return Ye({root:["root"]},gf,e)},Af=Ce(dr,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),kf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiDialogTitle"}),{className:o,id:a}=n,i=Le(n,Cf),l=n,s=Sf(l),{titleId:c=a}=x.useContext(Hs);return te.jsx(Af,U({component:"h2",className:De(s.root,o),ownerState:l,ref:r,variant:"h6",id:a??c},i))});function If(t){return ct("MuiFormControl",t)}Ge("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const Pf=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Ef=t=>{const{classes:e,margin:r,fullWidth:n}=t,o={root:["root",r!=="none"&&`margin${oe(r)}`,n&&"fullWidth"]};return Ye(o,If,e)},Of=Ce("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>U({},e.root,e[`margin${oe(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>U({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),Nf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiFormControl"}),{children:o,className:a,color:i="primary",component:l="div",disabled:s=!1,error:c=!1,focused:d,fullWidth:h=!1,hiddenLabel:f=!1,margin:v="none",required:p=!1,size:g="medium",variant:y="outlined"}=n,b=Le(n,Pf),M=U({},n,{color:i,component:l,disabled:s,error:c,fullWidth:h,hiddenLabel:f,margin:v,required:p,size:g,variant:y}),A=Ef(M),[m,w]=x.useState(()=>{let j=!1;return o&&x.Children.forEach(o,L=>{if(!$n(L,["Input","Select"]))return;const F=$n(L,["Select"])?L.props.input:L;F&&md(F.props)&&(j=!0)}),j}),[S,k]=x.useState(()=>{let j=!1;return o&&x.Children.forEach(o,L=>{$n(L,["Input","Select"])&&(qi(L.props,!0)||qi(L.props.inputProps,!0))&&(j=!0)}),j}),[E,O]=x.useState(!1);s&&E&&O(!1);const D=d!==void 0&&!s?d:E;let P;const T=x.useMemo(()=>({adornedStart:m,setAdornedStart:w,color:i,disabled:s,error:c,filled:S,focused:D,fullWidth:h,hiddenLabel:f,size:g,onBlur:()=>{O(!1)},onEmpty:()=>{k(!1)},onFilled:()=>{k(!0)},onFocus:()=>{O(!0)},registerEffect:P,required:p,variant:y}),[m,i,s,c,S,D,h,f,P,p,g,y]);return te.jsx(gd.Provider,{value:T,children:te.jsx(Of,U({as:l,ownerState:M,className:De(A.root,a),ref:r},b,{children:o}))})}),Df=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Lf=t=>{const{classes:e,inset:r,primary:n,secondary:o,dense:a}=t;return Ye({root:["root",r&&"inset",a&&"dense",n&&o&&"multiline"],primary:["primary"],secondary:["secondary"]},bd,e)},_f=Ce("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[{[`& .${Hi.primary}`]:e.primary},{[`& .${Hi.secondary}`]:e.secondary},e.root,r.inset&&e.inset,r.primary&&r.secondary&&e.multiline,r.dense&&e.dense]}})(({ownerState:t})=>U({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Tf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiListItemText"}),{children:o,className:a,disableTypography:i=!1,inset:l=!1,primary:s,primaryTypographyProps:c,secondary:d,secondaryTypographyProps:h}=n,f=Le(n,Df),{dense:v}=x.useContext(yd);let p=s??o,g=d;const y=U({},n,{disableTypography:i,inset:l,primary:!!p,secondary:!!g,dense:v}),b=Lf(y);return p!=null&&p.type!==dr&&!i&&(p=te.jsx(dr,U({variant:v?"body2":"body1",className:b.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:p}))),g!=null&&g.type!==dr&&!i&&(g=te.jsx(dr,U({variant:"body2",className:b.secondary,color:"text.secondary",display:"block"},h,{children:g}))),te.jsxs(_f,U({className:De(b.root,a),ownerState:y,ref:r},f,{children:[p,g]}))});function Rf(t={}){const{autoHideDuration:e=null,disableWindowBlurListener:r=!1,onClose:n,open:o,resumeHideDuration:a}=t,i=xd();x.useEffect(()=>{if(!o)return;function b(M){M.defaultPrevented||(M.key==="Escape"||M.key==="Esc")&&n?.(M,"escapeKeyDown")}return document.addEventListener("keydown",b),()=>{document.removeEventListener("keydown",b)}},[o,n]);const l=Vi((b,M)=>{n?.(b,M)}),s=Vi(b=>{!n||b==null||i.start(b,()=>{l(null,"timeout")})});x.useEffect(()=>(o&&s(e),i.clear),[o,e,s,i]);const c=b=>{n?.(b,"clickaway")},d=i.clear,h=x.useCallback(()=>{e!=null&&s(a??e*.5)},[e,a,s]),f=b=>M=>{const A=b.onBlur;A?.(M),h()},v=b=>M=>{const A=b.onFocus;A?.(M),d()},p=b=>M=>{const A=b.onMouseEnter;A?.(M),d()},g=b=>M=>{const A=b.onMouseLeave;A?.(M),h()};return x.useEffect(()=>{if(!r&&o)return window.addEventListener("focus",h),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",d)}},[r,o,h,d]),{getRootProps:(b={})=>{const M=U({},Ui(t),Ui(b));return U({role:"presentation"},b,M,{onBlur:f(M),onFocus:v(M),onMouseEnter:p(M),onMouseLeave:g(M)})},onClickAway:c}}function jf(t){return ct("MuiSnackbarContent",t)}Ge("MuiSnackbarContent",["root","message","action"]);const Bf=["action","className","message","role"],Ff=t=>{const{classes:e}=t;return Ye({root:["root"],action:["action"],message:["message"]},jf,e)},zf=Ce(ii,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>{const e=t.palette.mode==="light"?.8:.98,r=gs.emphasize(t.palette.background.default,e);return U({},t.typography.body2,{color:t.vars?t.vars.palette.SnackbarContent.color:t.palette.getContrastText(r),backgroundColor:t.vars?t.vars.palette.SnackbarContent.bg:r,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,flexGrow:1,[t.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),$f=Ce("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0"}),qf=Ce("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),Hf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiSnackbarContent"}),{action:o,className:a,message:i,role:l="alert"}=n,s=Le(n,Bf),c=n,d=Ff(c);return te.jsxs(zf,U({role:l,square:!0,elevation:6,className:De(d.root,a),ownerState:c,ref:r},s,{children:[te.jsx($f,{className:d.message,ownerState:c,children:i}),o?te.jsx(qf,{className:d.action,ownerState:c,children:o}):null]}))});function Vf(t){return ct("MuiSnackbar",t)}Ge("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const Uf=["onEnter","onExited"],Wf=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],Gf=t=>{const{classes:e,anchorOrigin:r}=t,n={root:["root",`anchorOrigin${oe(r.vertical)}${oe(r.horizontal)}`]};return Ye(n,Vf,e)},ea=Ce("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[`anchorOrigin${oe(r.anchorOrigin.vertical)}${oe(r.anchorOrigin.horizontal)}`]]}})(({theme:t,ownerState:e})=>{const r={left:"50%",right:"auto",transform:"translateX(-50%)"};return U({zIndex:(t.vars||t).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},e.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},e.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},e.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[t.breakpoints.up("sm")]:U({},e.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},e.anchorOrigin.horizontal==="center"&&r,e.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},e.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),Kf=x.forwardRef(function(e,r){const n=Ke({props:e,name:"MuiSnackbar"}),o=ys(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{action:i,anchorOrigin:{vertical:l,horizontal:s}={vertical:"bottom",horizontal:"left"},autoHideDuration:c=null,children:d,className:h,ClickAwayListenerProps:f,ContentProps:v,disableWindowBlurListener:p=!1,message:g,open:y,TransitionComponent:b=wd,transitionDuration:M=a,TransitionProps:{onEnter:A,onExited:m}={}}=n,w=Le(n.TransitionProps,Uf),S=Le(n,Wf),k=U({},n,{anchorOrigin:{vertical:l,horizontal:s},autoHideDuration:c,disableWindowBlurListener:p,TransitionComponent:b,transitionDuration:M}),E=Gf(k),{getRootProps:O,onClickAway:D}=Rf(U({},k)),[P,T]=x.useState(!0),j=Md({elementType:ea,getSlotProps:O,externalForwardedProps:S,ownerState:k,additionalProps:{ref:r},className:[E.root,h]}),L=R=>{T(!0),m&&m(R)},F=(R,q)=>{T(!1),A&&A(R,q)};return!y&&P?null:te.jsx(bs,U({onClickAway:D},f,{children:te.jsx(ea,U({},j,{children:te.jsx(b,U({appear:!0,in:y,timeout:M,direction:l==="top"?"down":"up",onEnter:F,onExited:L},w,{children:d||te.jsx(Hf,U({message:g,action:i},v))}))}))}))});var X=te.Fragment,u=function(e,r,n){return Bs.call(r,"css")?te.jsx(Fs,zs(e,r),n):te.jsx(e,r,n)},I=function(e,r,n){return Bs.call(r,"css")?te.jsxs(Fs,zs(e,r),n):te.jsxs(e,r,n)},Hn,ta;function Yf(){if(ta)return Hn;ta=1;var t=Lh(),e=_h(),r=Th(),n=Rh(),o=t.isFinite,a=Math.min;function i(l){var s=Math[l];return function(c,d){if(c=r(c),d=d==null?0:a(e(d),292),d&&o(c)){var h=(n(c)+"e").split("e"),f=s(h[0]+"e"+(+h[1]+d));return h=(n(f)+"e").split("e"),+(h[0]+"e"+(+h[1]-d))}return s(c)}}return Hn=i,Hn}var Vn,ra;function Xf(){if(ra)return Vn;ra=1;var t=Yf(),e=t("round");return Vn=e,Vn}var Zf=Xf();const rn=Ph(Zf);var nn={},Qf=Object.defineProperty,na=Object.getOwnPropertySymbols,Jf=Object.prototype.hasOwnProperty,ep=Object.prototype.propertyIsEnumerable,oa=(t,e,r)=>e in t?Qf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,tp=(t,e)=>{for(var r in e||(e={}))Jf.call(e,r)&&oa(t,r,e[r]);if(na)for(var r of na(e))ep.call(e,r)&&oa(t,r,e[r]);return t},Vs=Symbol.for("immer-nothing"),ia=Symbol.for("immer-draftable"),Ie=Symbol.for("immer-state");function je(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Xt=Object.getPrototypeOf;function Et(t){return!!t&&!!t[Ie]}function at(t){var e;return t?Us(t)||Array.isArray(t)||!!t[ia]||!!((e=t.constructor)!=null&&e[ia])||In(t)||Pn(t):!1}var rp=Object.prototype.constructor.toString();function Us(t){if(!t||typeof t!="object")return!1;const e=Xt(t);if(e===null)return!0;const r=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===rp}function on(t,e){kn(t)===0?Reflect.ownKeys(t).forEach(r=>{e(r,t[r],t)}):t.forEach((r,n)=>e(n,r,t))}function kn(t){const e=t[Ie];return e?e.type_:Array.isArray(t)?1:In(t)?2:Pn(t)?3:0}function go(t,e){return kn(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Ws(t,e,r){const n=kn(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function np(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function In(t){return t instanceof Map}function Pn(t){return t instanceof Set}function wt(t){return t.copy_||t.base_}function yo(t,e){if(In(t))return new Map(t);if(Pn(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const r=Us(t);if(e===!0||e==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(t);delete n[Ie];let o=Reflect.ownKeys(n);for(let a=0;a<o.length;a++){const i=o[a],l=n[i];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[i]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[i]})}return Object.create(Xt(t),n)}else{const n=Xt(t);if(n!==null&&r)return tp({},t);const o=Object.create(n);return Object.assign(o,t)}}function ui(t,e=!1){return En(t)||Et(t)||!at(t)||(kn(t)>1&&(t.set=t.add=t.clear=t.delete=op),Object.freeze(t),e&&Object.entries(t).forEach(([r,n])=>ui(n,!0))),t}function op(){je(2)}function En(t){return Object.isFrozen(t)}var ip={};function Ot(t){const e=ip[t];return e||je(0,t),e}var xr;function Gs(){return xr}function ap(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function aa(t,e){e&&(Ot("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function bo(t){xo(t),t.drafts_.forEach(lp),t.drafts_=null}function xo(t){t===xr&&(xr=t.parent_)}function la(t){return xr=ap(xr,t)}function lp(t){const e=t[Ie];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function sa(t,e){e.unfinalizedDrafts_=e.drafts_.length;const r=e.drafts_[0];return t!==void 0&&t!==r?(r[Ie].modified_&&(bo(e),je(4)),at(t)&&(t=an(e,t),e.parent_||ln(e,t)),e.patches_&&Ot("Patches").generateReplacementPatches_(r[Ie].base_,t,e.patches_,e.inversePatches_)):t=an(e,r,[]),bo(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Vs?t:void 0}function an(t,e,r){if(En(e))return e;const n=e[Ie];if(!n)return on(e,(o,a)=>ca(t,n,e,o,a,r)),e;if(n.scope_!==t)return e;if(!n.modified_)return ln(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const o=n.copy_;let a=o,i=!1;n.type_===3&&(a=new Set(o),o.clear(),i=!0),on(a,(l,s)=>ca(t,n,o,l,s,r,i)),ln(t,o,!1),r&&t.patches_&&Ot("Patches").generatePatches_(n,r,t.patches_,t.inversePatches_)}return n.copy_}function ca(t,e,r,n,o,a,i){if(Et(o)){const l=a&&e&&e.type_!==3&&!go(e.assigned_,n)?a.concat(n):void 0,s=an(t,o,l);if(Ws(r,n,s),Et(s))t.canAutoFreeze_=!1;else return}else i&&r.add(o);if(at(o)&&!En(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;an(t,o),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&ln(t,o)}}function ln(t,e,r=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&ui(e,r)}function sp(t,e){const r=Array.isArray(t),n={type_:r?1:0,scope_:e?e.scope_:Gs(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=n,a=di;r&&(o=[n],a=wr);const{revoke:i,proxy:l}=Proxy.revocable(o,a);return n.draft_=l,n.revoke_=i,l}var di={get(t,e){if(e===Ie)return t;const r=wt(t);if(!go(r,e))return cp(t,r,e);const n=r[e];return t.finalized_||!at(n)?n:n===Un(t.base_,e)?(Wn(t),t.copy_[e]=Mo(n,t)):n},has(t,e){return e in wt(t)},ownKeys(t){return Reflect.ownKeys(wt(t))},set(t,e,r){const n=Ks(wt(t),e);if(n?.set)return n.set.call(t.draft_,r),!0;if(!t.modified_){const o=Un(wt(t),e),a=o?.[Ie];if(a&&a.base_===r)return t.copy_[e]=r,t.assigned_[e]=!1,!0;if(np(r,o)&&(r!==void 0||go(t.base_,e)))return!0;Wn(t),wo(t)}return t.copy_[e]===r&&(r!==void 0||e in t.copy_)||Number.isNaN(r)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=r,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Un(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Wn(t),wo(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const r=wt(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty(){je(11)},getPrototypeOf(t){return Xt(t.base_)},setPrototypeOf(){je(12)}},wr={};on(di,(t,e)=>{wr[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});wr.deleteProperty=function(t,e){return wr.set.call(this,t,e,void 0)};wr.set=function(t,e,r){return di.set.call(this,t[0],e,r,t[0])};function Un(t,e){const r=t[Ie];return(r?wt(r):t)[e]}function cp(t,e,r){var n;const o=Ks(e,r);return o?"value"in o?o.value:(n=o.get)==null?void 0:n.call(t.draft_):void 0}function Ks(t,e){if(!(e in t))return;let r=Xt(t);for(;r;){const n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Xt(r)}}function wo(t){t.modified_||(t.modified_=!0,t.parent_&&wo(t.parent_))}function Wn(t){t.copy_||(t.copy_=yo(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var up=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,r,n)=>{if(typeof e=="function"&&typeof r!="function"){const a=r;r=e;const i=this;return function(s=a,...c){return i.produce(s,d=>r.call(this,d,...c))}}typeof r!="function"&&je(6),n!==void 0&&typeof n!="function"&&je(7);let o;if(at(e)){const a=la(this),i=Mo(e,void 0);let l=!0;try{o=r(i),l=!1}finally{l?bo(a):xo(a)}return aa(a,n),sa(o,a)}else if(!e||typeof e!="object"){if(o=r(e),o===void 0&&(o=e),o===Vs&&(o=void 0),this.autoFreeze_&&ui(o,!0),n){const a=[],i=[];Ot("Patches").generateReplacementPatches_(e,o,a,i),n(a,i)}return o}else je(1,e)},this.produceWithPatches=(e,r)=>{if(typeof e=="function")return(i,...l)=>this.produceWithPatches(i,s=>e(s,...l));let n,o;return[this.produce(e,r,(i,l)=>{n=i,o=l}),n,o]},typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof t?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){at(t)||je(8),Et(t)&&(t=dp(t));const e=la(this),r=Mo(t,void 0);return r[Ie].isManual_=!0,xo(e),r}finishDraft(t,e){const r=t&&t[Ie];(!r||!r.isManual_)&&je(9);const{scope_:n}=r;return aa(n,e),sa(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let r;for(r=e.length-1;r>=0;r--){const o=e[r];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}r>-1&&(e=e.slice(r+1));const n=Ot("Patches").applyPatches_;return Et(t)?n(t,e):this.produce(t,o=>n(o,e))}};function Mo(t,e){const r=In(t)?Ot("MapSet").proxyMap_(t,e):Pn(t)?Ot("MapSet").proxySet_(t,e):sp(t,e);return(e?e.scope_:Gs()).drafts_.push(r),r}function dp(t){return Et(t)||je(10,t),Ys(t)}function Ys(t){if(!at(t)||En(t))return t;const e=t[Ie];let r;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,r=yo(t,e.scope_.immer_.useStrictShallowCopy_)}else r=yo(t,!0);return on(r,(n,o)=>{Ws(r,n,Ys(o))}),e&&(e.finalized_=!1),r}var Pe=new up,Xs=Pe.produce;Pe.produceWithPatches.bind(Pe);Pe.setAutoFreeze.bind(Pe);Pe.setUseStrictShallowCopy.bind(Pe);Pe.applyPatches.bind(Pe);Pe.createDraft.bind(Pe);Pe.finishDraft.bind(Pe);var hp=Object.defineProperty,fp=Object.defineProperties,pp=Object.getOwnPropertyDescriptors,sn=Object.getOwnPropertySymbols,Zs=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable,ua=(t,e,r)=>e in t?hp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,et=(t,e)=>{for(var r in e||(e={}))Zs.call(e,r)&&ua(t,r,e[r]);if(sn)for(var r of sn(e))Qs.call(e,r)&&ua(t,r,e[r]);return t},vp=(t,e)=>fp(t,pp(e)),mp=(t,e)=>{var r={};for(var n in t)Zs.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&sn)for(var n of sn(t))e.indexOf(n)<0&&Qs.call(t,n)&&(r[n]=t[n]);return r},gp=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mo:mo.apply(null,arguments)};function da(t,e){function r(...n){if(e){let o=e(...n);if(!o)throw new Error(nt(0));return et(et({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return r.toString=()=>`${t}`,r.type=t,r.match=n=>jd(n)&&n.type===t,r}var Js=class hr extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,hr.prototype)}static get[Symbol.species](){return hr}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new hr(...e[0].concat(this)):new hr(...e.concat(this))}};function ha(t){return at(t)?Xs(t,()=>{}):t}function Fr(t,e,r){return t.has(e)?t.get(e):t.set(e,r(e)).get(e)}function yp(t){return typeof t=="boolean"}var bp=()=>function(e){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:o=!0,actionCreatorCheck:a=!0}=e??{};let i=new Js;return r&&(yp(r)?i.push(Td):i.push(Rd(r.extraArgument))),i},xp="RTK_autoBatch",fa=t=>e=>{setTimeout(e,t)},wp=(t={type:"raf"})=>e=>(...r)=>{const n=e(...r);let o=!0,a=!1,i=!1;const l=new Set,s=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:fa(10):t.type==="callback"?t.queueNotification:fa(t.timeout),c=()=>{i=!1,a&&(a=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const h=()=>o&&d(),f=n.subscribe(h);return l.add(d),()=>{f(),l.delete(d)}},dispatch(d){var h;try{return o=!((h=d?.meta)!=null&&h[xp]),a=!o,a&&(i||(i=!0,s(c))),n.dispatch(d)}finally{o=!0}}})},Mp=t=>function(r){const{autoBatch:n=!0}=r??{};let o=new Js(t);return n&&o.push(wp(typeof n=="object"?n:void 0)),o};function Cp(t){const e=bp(),{reducer:r=void 0,middleware:n,devTools:o=!0,preloadedState:a=void 0,enhancers:i=void 0}=t||{};let l;if(typeof r=="function")l=r;else if(kd(r))l=Id(r);else throw new Error(nt(1));let s;typeof n=="function"?s=n(e):s=e();let c=mo;o&&(c=gp(et({trace:!1},typeof o=="object"&&o)));const d=Pd(...s),h=Mp(d);let f=typeof i=="function"?i(h):h();const v=c(...f);return Ed(l,a,v)}function ec(t){const e={},r=[];let n;const o={addCase(a,i){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(nt(28));if(l in e)throw new Error(nt(29));return e[l]=i,o},addMatcher(a,i){return r.push({matcher:a,reducer:i}),o},addDefaultCase(a){return n=a,o}};return t(o),[e,r,n]}function Sp(t){return typeof t=="function"}function Ap(t,e){let[r,n,o]=ec(e),a;if(Sp(t))a=()=>ha(t());else{const l=ha(t);a=()=>l}function i(l=a(),s){let c=[r[s.type],...n.filter(({matcher:d})=>d(s)).map(({reducer:d})=>d)];return c.filter(d=>!!d).length===0&&(c=[o]),c.reduce((d,h)=>{if(h)if(Et(d)){const v=h(d,s);return v===void 0?d:v}else{if(at(d))return Xs(d,f=>h(f,s));{const f=h(d,s);if(f===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return d},l)}return i.getInitialState=a,i}var kp=Symbol.for("rtk-slice-createasyncthunk");function Ip(t,e){return`${t}/${e}`}function Pp({creators:t}={}){var e;const r=(e=t?.asyncThunk)==null?void 0:e[kp];return function(o){const{name:a,reducerPath:i=a}=o;if(!a)throw new Error(nt(11));const l=(typeof o.reducers=="function"?o.reducers(Op()):o.reducers)||{},s=Object.keys(l),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(m,w){const S=typeof m=="string"?m:m.type;if(!S)throw new Error(nt(12));if(S in c.sliceCaseReducersByType)throw new Error(nt(13));return c.sliceCaseReducersByType[S]=w,d},addMatcher(m,w){return c.sliceMatchers.push({matcher:m,reducer:w}),d},exposeAction(m,w){return c.actionCreators[m]=w,d},exposeCaseReducer(m,w){return c.sliceCaseReducersByName[m]=w,d}};s.forEach(m=>{const w=l[m],S={reducerName:m,type:Ip(a,m),createNotation:typeof o.reducers=="function"};Dp(w)?_p(S,w,d,r):Np(S,w,d)});function h(){const[m={},w=[],S=void 0]=typeof o.extraReducers=="function"?ec(o.extraReducers):[o.extraReducers],k=et(et({},m),c.sliceCaseReducersByType);return Ap(o.initialState,E=>{for(let O in k)E.addCase(O,k[O]);for(let O of c.sliceMatchers)E.addMatcher(O.matcher,O.reducer);for(let O of w)E.addMatcher(O.matcher,O.reducer);S&&E.addDefaultCase(S)})}const f=m=>m,v=new Map,p=new WeakMap;let g;function y(m,w){return g||(g=h()),g(m,w)}function b(){return g||(g=h()),g.getInitialState()}function M(m,w=!1){function S(E){let O=E[m];return typeof O>"u"&&w&&(O=Fr(p,S,b)),O}function k(E=f){const O=Fr(v,w,()=>new WeakMap);return Fr(O,E,()=>{var D;const P={};for(const[T,j]of Object.entries((D=o.selectors)!=null?D:{}))P[T]=Ep(j,E,()=>Fr(p,E,b),w);return P})}return{reducerPath:m,getSelectors:k,get selectors(){return k(S)},selectSlice:S}}const A=vp(et({name:a,reducer:y,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b},M(i)),{injectInto(m,w={}){var S=w,{reducerPath:k}=S,E=mp(S,["reducerPath"]);const O=k??i;return m.inject({reducerPath:O,reducer:y},E),et(et({},A),M(O,!0))}});return A}}function Ep(t,e,r,n){function o(a,...i){let l=e(a);return typeof l>"u"&&n&&(l=r()),t(l,...i)}return o.unwrapped=t,o}var On=Pp();function Op(){function t(e,r){return et({_reducerDefinitionType:"asyncThunk",payloadCreator:e},r)}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...r){return e(...r)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:r}},asyncThunk:t}}function Np({type:t,reducerName:e,createNotation:r},n,o){let a,i;if("reducer"in n){if(r&&!Lp(n))throw new Error(nt(17));a=n.reducer,i=n.prepare}else a=n;o.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,i?da(t,i):da(t))}function Dp(t){return t._reducerDefinitionType==="asyncThunk"}function Lp(t){return t._reducerDefinitionType==="reducerWithPrepare"}function _p({type:t,reducerName:e},r,n,o){if(!o)throw new Error(nt(18));const{payloadCreator:a,fulfilled:i,pending:l,rejected:s,settled:c,options:d}=r,h=o(t,a,d);n.exposeAction(e,h),i&&n.addCase(h.fulfilled,i),l&&n.addCase(h.pending,l),s&&n.addCase(h.rejected,s),c&&n.addMatcher(h.settled,c),n.exposeCaseReducer(e,{fulfilled:i||zr,pending:l||zr,rejected:s||zr,settled:c||zr})}function zr(){}function nt(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function Kr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Tp(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tc(t){let e,r,n;t.length!==2?(e=Kr,r=(l,s)=>Kr(t(l),s),n=(l,s)=>t(l)-s):(e=t===Kr||t===Tp?t:Rp,r=t,n=t);function o(l,s,c=0,d=l.length){if(c<d){if(e(s,s)!==0)return d;do{const h=c+d>>>1;r(l[h],s)<0?c=h+1:d=h}while(c<d)}return c}function a(l,s,c=0,d=l.length){if(c<d){if(e(s,s)!==0)return d;do{const h=c+d>>>1;r(l[h],s)<=0?c=h+1:d=h}while(c<d)}return c}function i(l,s,c=0,d=l.length){const h=o(l,s,c,d-1);return h>c&&n(l[h-1],s)>-n(l[h],s)?h-1:h}return{left:o,center:i,right:a}}function Rp(){return 0}function jp(t){return t===null?NaN:+t}const Bp=tc(Kr),Fp=Bp.right;tc(jp).center;var zp=Fp;const $p=Math.sqrt(50),qp=Math.sqrt(10),Hp=Math.sqrt(2);function cn(t,e,r){const n=(e-t)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=$p?10:a>=qp?5:a>=Hp?2:1;let l,s,c;return o<0?(c=Math.pow(10,-o)/i,l=Math.round(t*c),s=Math.round(e*c),l/c<t&&++l,s/c>e&&--s,c=-c):(c=Math.pow(10,o)*i,l=Math.round(t/c),s=Math.round(e/c),l*c<t&&++l,s*c>e&&--s),s<l&&.5<=r&&r<2?cn(t,e,r*2):[l,s,c]}function Vp(t,e,r){if(e=+e,t=+t,r=+r,!(r>0))return[];if(t===e)return[t];const n=e<t,[o,a,i]=n?cn(e,t,r):cn(t,e,r);if(!(a>=o))return[];const l=a-o+1,s=new Array(l);if(n)if(i<0)for(let c=0;c<l;++c)s[c]=(a-c)/-i;else for(let c=0;c<l;++c)s[c]=(a-c)*i;else if(i<0)for(let c=0;c<l;++c)s[c]=(o+c)/-i;else for(let c=0;c<l;++c)s[c]=(o+c)*i;return s}function Co(t,e,r){return e=+e,t=+t,r=+r,cn(t,e,r)[2]}function Up(t,e,r){e=+e,t=+t,r=+r;const n=e<t,o=n?Co(e,t,r):Co(t,e,r);return(n?-1:1)*(o<0?1/-o:o)}function Wp(t){return t}var Gn=1,Kn=2,So=3,fr=4,pa=1e-6;function Gp(t){return"translate("+t+",0)"}function Kp(t){return"translate(0,"+t+")"}function Yp(t){return e=>+t(e)}function Xp(t,e){return e=Math.max(0,t.bandwidth()-e*2)/2,t.round()&&(e=Math.round(e)),r=>+t(r)+e}function Zp(){return!this.__axis}function rc(t,e){var r=[],n=null,o=null,a=6,i=6,l=3,s=typeof window<"u"&&window.devicePixelRatio>1?0:.5,c=t===Gn||t===fr?-1:1,d=t===fr||t===Kn?"x":"y",h=t===Gn||t===So?Gp:Kp;function f(v){var p=n??(e.ticks?e.ticks.apply(e,r):e.domain()),g=o??(e.tickFormat?e.tickFormat.apply(e,r):Wp),y=Math.max(a,0)+l,b=e.range(),M=+b[0]+s,A=+b[b.length-1]+s,m=(e.bandwidth?Xp:Yp)(e.copy(),s),w=v.selection?v.selection():v,S=w.selectAll(".domain").data([null]),k=w.selectAll(".tick").data(p,e).order(),E=k.exit(),O=k.enter().append("g").attr("class","tick"),D=k.select("line"),P=k.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),k=k.merge(O),D=D.merge(O.append("line").attr("stroke","currentColor").attr(d+"2",c*a)),P=P.merge(O.append("text").attr("fill","currentColor").attr(d,c*y).attr("dy",t===Gn?"0em":t===So?"0.71em":"0.32em")),v!==w&&(S=S.transition(v),k=k.transition(v),D=D.transition(v),P=P.transition(v),E=E.transition(v).attr("opacity",pa).attr("transform",function(T){return isFinite(T=m(T))?h(T+s):this.getAttribute("transform")}),O.attr("opacity",pa).attr("transform",function(T){var j=this.parentNode.__axis;return h((j&&isFinite(j=j(T))?j:m(T))+s)})),E.remove(),S.attr("d",t===fr||t===Kn?i?"M"+c*i+","+M+"H"+s+"V"+A+"H"+c*i:"M"+s+","+M+"V"+A:i?"M"+M+","+c*i+"V"+s+"H"+A+"V"+c*i:"M"+M+","+s+"H"+A),k.attr("opacity",1).attr("transform",function(T){return h(m(T)+s)}),D.attr(d+"2",c*a),P.attr(d,c*y).text(g),w.filter(Zp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Kn?"start":t===fr?"end":"middle"),w.each(function(){this.__axis=m})}return f.scale=function(v){return arguments.length?(e=v,f):e},f.ticks=function(){return r=Array.from(arguments),f},f.tickArguments=function(v){return arguments.length?(r=v==null?[]:Array.from(v),f):r.slice()},f.tickValues=function(v){return arguments.length?(n=v==null?null:Array.from(v),f):n&&n.slice()},f.tickFormat=function(v){return arguments.length?(o=v,f):o},f.tickSize=function(v){return arguments.length?(a=i=+v,f):a},f.tickSizeInner=function(v){return arguments.length?(a=+v,f):a},f.tickSizeOuter=function(v){return arguments.length?(i=+v,f):i},f.tickPadding=function(v){return arguments.length?(l=+v,f):l},f.offset=function(v){return arguments.length?(s=+v,f):s},f}function Qp(t){return rc(So,t)}function Jp(t){return rc(fr,t)}var ev={value:()=>{}};function hi(){for(var t=0,e=arguments.length,r={},n;t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new Yr(r)}function Yr(t){this._=t}function tv(t,e){return t.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}Yr.prototype=hi.prototype={constructor:Yr,on:function(t,e){var r=this._,n=tv(t+"",r),o,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((o=(t=n[a]).type)&&(o=rv(r[o],t.name)))return o;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<i;)if(o=(t=n[a]).type)r[o]=va(r[o],t.name,e);else if(e==null)for(o in r)r[o]=va(r[o],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Yr(t)},call:function(t,e){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],n=0,o=a.length;n<o;++n)a[n].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,a=n.length;o<a;++o)n[o].value.apply(e,r)}};function rv(t,e){for(var r=0,n=t.length,o;r<n;++r)if((o=t[r]).name===e)return o.value}function va(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=ev,t=t.slice(0,n).concat(t.slice(n+1));break}return r!=null&&t.push({name:e,value:r}),t}var Ao="http://www.w3.org/1999/xhtml",ma={svg:"http://www.w3.org/2000/svg",xhtml:Ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nn(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),ma.hasOwnProperty(e)?{space:ma[e],local:t}:t}function nv(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ao&&e.documentElement.namespaceURI===Ao?e.createElement(t):e.createElementNS(r,t)}}function ov(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function nc(t){var e=Nn(t);return(e.local?ov:nv)(e)}function iv(){}function fi(t){return t==null?iv:function(){return this.querySelector(t)}}function av(t){typeof t!="function"&&(t=fi(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],i=a.length,l=n[o]=new Array(i),s,c,d=0;d<i;++d)(s=a[d])&&(c=t.call(s,s.__data__,d,a))&&("__data__"in s&&(c.__data__=s.__data__),l[d]=c);return new Ee(n,this._parents)}function lv(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function sv(){return[]}function oc(t){return t==null?sv:function(){return this.querySelectorAll(t)}}function cv(t){return function(){return lv(t.apply(this,arguments))}}function uv(t){typeof t=="function"?t=cv(t):t=oc(t);for(var e=this._groups,r=e.length,n=[],o=[],a=0;a<r;++a)for(var i=e[a],l=i.length,s,c=0;c<l;++c)(s=i[c])&&(n.push(t.call(s,s.__data__,c,i)),o.push(s));return new Ee(n,o)}function ic(t){return function(){return this.matches(t)}}function ac(t){return function(e){return e.matches(t)}}var dv=Array.prototype.find;function hv(t){return function(){return dv.call(this.children,t)}}function fv(){return this.firstElementChild}function pv(t){return this.select(t==null?fv:hv(typeof t=="function"?t:ac(t)))}var vv=Array.prototype.filter;function mv(){return Array.from(this.children)}function gv(t){return function(){return vv.call(this.children,t)}}function yv(t){return this.selectAll(t==null?mv:gv(typeof t=="function"?t:ac(t)))}function bv(t){typeof t!="function"&&(t=ic(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],i=a.length,l=n[o]=[],s,c=0;c<i;++c)(s=a[c])&&t.call(s,s.__data__,c,a)&&l.push(s);return new Ee(n,this._parents)}function lc(t){return new Array(t.length)}function xv(){return new Ee(this._enter||this._groups.map(lc),this._parents)}function un(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}un.prototype={constructor:un,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function wv(t){return function(){return t}}function Mv(t,e,r,n,o,a){for(var i=0,l,s=e.length,c=a.length;i<c;++i)(l=e[i])?(l.__data__=a[i],n[i]=l):r[i]=new un(t,a[i]);for(;i<s;++i)(l=e[i])&&(o[i]=l)}function Cv(t,e,r,n,o,a,i){var l,s,c=new Map,d=e.length,h=a.length,f=new Array(d),v;for(l=0;l<d;++l)(s=e[l])&&(f[l]=v=i.call(s,s.__data__,l,e)+"",c.has(v)?o[l]=s:c.set(v,s));for(l=0;l<h;++l)v=i.call(t,a[l],l,a)+"",(s=c.get(v))?(n[l]=s,s.__data__=a[l],c.delete(v)):r[l]=new un(t,a[l]);for(l=0;l<d;++l)(s=e[l])&&c.get(f[l])===s&&(o[l]=s)}function Sv(t){return t.__data__}function Av(t,e){if(!arguments.length)return Array.from(this,Sv);var r=e?Cv:Mv,n=this._parents,o=this._groups;typeof t!="function"&&(t=wv(t));for(var a=o.length,i=new Array(a),l=new Array(a),s=new Array(a),c=0;c<a;++c){var d=n[c],h=o[c],f=h.length,v=kv(t.call(d,d&&d.__data__,c,n)),p=v.length,g=l[c]=new Array(p),y=i[c]=new Array(p),b=s[c]=new Array(f);r(d,h,g,y,b,v,e);for(var M=0,A=0,m,w;M<p;++M)if(m=g[M]){for(M>=A&&(A=M+1);!(w=y[A])&&++A<p;);m._next=w||null}}return i=new Ee(i,n),i._enter=l,i._exit=s,i}function kv(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Iv(){return new Ee(this._exit||this._groups.map(lc),this._parents)}function Pv(t,e,r){var n=this.enter(),o=this,a=this.exit();return typeof t=="function"?(n=t(n),n&&(n=n.selection())):n=n.append(t+""),e!=null&&(o=e(o),o&&(o=o.selection())),r==null?a.remove():r(a),n&&o?n.merge(o).order():o}function Ev(t){for(var e=t.selection?t.selection():t,r=this._groups,n=e._groups,o=r.length,a=n.length,i=Math.min(o,a),l=new Array(o),s=0;s<i;++s)for(var c=r[s],d=n[s],h=c.length,f=l[s]=new Array(h),v,p=0;p<h;++p)(v=c[p]||d[p])&&(f[p]=v);for(;s<o;++s)l[s]=r[s];return new Ee(l,this._parents)}function Ov(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var n=t[e],o=n.length-1,a=n[o],i;--o>=0;)(i=n[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Nv(t){t||(t=Dv);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var i=r[a],l=i.length,s=o[a]=new Array(l),c,d=0;d<l;++d)(c=i[d])&&(s[d]=c);s.sort(e)}return new Ee(o,this._parents).order()}function Dv(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Lv(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function _v(){return Array.from(this)}function Tv(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,a=n.length;o<a;++o){var i=n[o];if(i)return i}return null}function Rv(){let t=0;for(const e of this)++t;return t}function jv(){return!this.node()}function Bv(t){for(var e=this._groups,r=0,n=e.length;r<n;++r)for(var o=e[r],a=0,i=o.length,l;a<i;++a)(l=o[a])&&t.call(l,l.__data__,a,o);return this}function Fv(t){return function(){this.removeAttribute(t)}}function zv(t){return function(){this.removeAttributeNS(t.space,t.local)}}function $v(t,e){return function(){this.setAttribute(t,e)}}function qv(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Hv(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Vv(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Uv(t,e){var r=Nn(t);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((e==null?r.local?zv:Fv:typeof e=="function"?r.local?Vv:Hv:r.local?qv:$v)(r,e))}function sc(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wv(t){return function(){this.style.removeProperty(t)}}function Gv(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Kv(t,e,r){return function(){var n=e.apply(this,arguments);n==null?this.style.removeProperty(t):this.style.setProperty(t,n,r)}}function Yv(t,e,r){return arguments.length>1?this.each((e==null?Wv:typeof e=="function"?Kv:Gv)(t,e,r??"")):Zt(this.node(),t)}function Zt(t,e){return t.style.getPropertyValue(e)||sc(t).getComputedStyle(t,null).getPropertyValue(e)}function Xv(t){return function(){delete this[t]}}function Zv(t,e){return function(){this[t]=e}}function Qv(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Jv(t,e){return arguments.length>1?this.each((e==null?Xv:typeof e=="function"?Qv:Zv)(t,e)):this.node()[t]}function cc(t){return t.trim().split(/^|\s+/)}function pi(t){return t.classList||new uc(t)}function uc(t){this._node=t,this._names=cc(t.getAttribute("class")||"")}uc.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function dc(t,e){for(var r=pi(t),n=-1,o=e.length;++n<o;)r.add(e[n])}function hc(t,e){for(var r=pi(t),n=-1,o=e.length;++n<o;)r.remove(e[n])}function em(t){return function(){dc(this,t)}}function tm(t){return function(){hc(this,t)}}function rm(t,e){return function(){(e.apply(this,arguments)?dc:hc)(this,t)}}function nm(t,e){var r=cc(t+"");if(arguments.length<2){for(var n=pi(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof e=="function"?rm:e?em:tm)(r,e))}function om(){this.textContent=""}function im(t){return function(){this.textContent=t}}function am(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function lm(t){return arguments.length?this.each(t==null?om:(typeof t=="function"?am:im)(t)):this.node().textContent}function sm(){this.innerHTML=""}function cm(t){return function(){this.innerHTML=t}}function um(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function dm(t){return arguments.length?this.each(t==null?sm:(typeof t=="function"?um:cm)(t)):this.node().innerHTML}function hm(){this.nextSibling&&this.parentNode.appendChild(this)}function fm(){return this.each(hm)}function pm(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function vm(){return this.each(pm)}function mm(t){var e=typeof t=="function"?t:nc(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function gm(){return null}function ym(t,e){var r=typeof t=="function"?t:nc(t),n=e==null?gm:typeof e=="function"?e:fi(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function bm(){var t=this.parentNode;t&&t.removeChild(this)}function xm(){return this.each(bm)}function wm(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Mm(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Cm(t){return this.select(t?Mm:wm)}function Sm(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Am(t){return function(e){t.call(this,e,this.__data__)}}function km(t){return t.trim().split(/^|\s+/).map(function(e){var r="",n=e.indexOf(".");return n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),{type:e,name:r}})}function Im(t){return function(){var e=this.__on;if(e){for(var r=0,n=-1,o=e.length,a;r<o;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++n]=a;++n?e.length=n:delete this.__on}}}function Pm(t,e,r){return function(){var n=this.__on,o,a=Am(e);if(n){for(var i=0,l=n.length;i<l;++i)if((o=n[i]).type===t.type&&o.name===t.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=e;return}}this.addEventListener(t.type,a,r),o={type:t.type,name:t.name,value:e,listener:a,options:r},n?n.push(o):this.__on=[o]}}function Em(t,e,r){var n=km(t+""),o,a=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,c=l.length,d;s<c;++s)for(o=0,d=l[s];o<a;++o)if((i=n[o]).type===d.type&&i.name===d.name)return d.value}return}for(l=e?Pm:Im,o=0;o<a;++o)this.each(l(n[o],e,r));return this}function fc(t,e,r){var n=sc(t),o=n.CustomEvent;typeof o=="function"?o=new o(e,r):(o=n.document.createEvent("Event"),r?(o.initEvent(e,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(e,!1,!1)),t.dispatchEvent(o)}function Om(t,e){return function(){return fc(this,t,e)}}function Nm(t,e){return function(){return fc(this,t,e.apply(this,arguments))}}function Dm(t,e){return this.each((typeof e=="function"?Nm:Om)(t,e))}function*Lm(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var n=t[e],o=0,a=n.length,i;o<a;++o)(i=n[o])&&(yield i)}var pc=[null];function Ee(t,e){this._groups=t,this._parents=e}function Rr(){return new Ee([[document.documentElement]],pc)}function _m(){return this}Ee.prototype=Rr.prototype={constructor:Ee,select:av,selectAll:uv,selectChild:pv,selectChildren:yv,filter:bv,data:Av,enter:xv,exit:Iv,join:Pv,merge:Ev,selection:_m,order:Ov,sort:Nv,call:Lv,nodes:_v,node:Tv,size:Rv,empty:jv,each:Bv,attr:Uv,style:Yv,property:Jv,classed:nm,text:lm,html:dm,raise:fm,lower:vm,append:mm,insert:ym,remove:xm,clone:Cm,datum:Sm,on:Em,dispatch:Dm,[Symbol.iterator]:Lm};function Fe(t){return typeof t=="string"?new Ee([[document.querySelector(t)]],[document.documentElement]):new Ee([[t]],pc)}function Tm(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ga(t,e){if(t=Tm(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}if(e.getBoundingClientRect){var o=e.getBoundingClientRect();return[t.clientX-o.left-e.clientLeft,t.clientY-o.top-e.clientTop]}}return[t.pageX,t.pageY]}const Rm={passive:!1},Mr={capture:!0,passive:!1};function Yn(t){t.stopImmediatePropagation()}function qt(t){t.preventDefault(),t.stopImmediatePropagation()}function jm(t){var e=t.document.documentElement,r=Fe(t).on("dragstart.drag",qt,Mr);"onselectstart"in e?r.on("selectstart.drag",qt,Mr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function Bm(t,e){var r=t.document.documentElement,n=Fe(t).on("dragstart.drag",null);e&&(n.on("click.drag",qt,Mr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var $r=t=>()=>t;function ko(t,{sourceEvent:e,subject:r,target:n,identifier:o,active:a,x:i,y:l,dx:s,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}ko.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Fm(t){return!t.ctrlKey&&!t.button}function zm(){return this.parentNode}function $m(t,e){return e??{x:t.x,y:t.y}}function qm(){return navigator.maxTouchPoints||"ontouchstart"in this}function vc(){var t=Fm,e=zm,r=$m,n=qm,o={},a=hi("start","drag","end"),i=0,l,s,c,d,h=0;function f(m){m.on("mousedown.drag",v).filter(n).on("touchstart.drag",y).on("touchmove.drag",b,Rm).on("touchend.drag touchcancel.drag",M).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function v(m,w){if(!(d||!t.call(this,m,w))){var S=A(this,e.call(this,m,w),m,w,"mouse");S&&(Fe(m.view).on("mousemove.drag",p,Mr).on("mouseup.drag",g,Mr),jm(m.view),Yn(m),c=!1,l=m.clientX,s=m.clientY,S("start",m))}}function p(m){if(qt(m),!c){var w=m.clientX-l,S=m.clientY-s;c=w*w+S*S>h}o.mouse("drag",m)}function g(m){Fe(m.view).on("mousemove.drag mouseup.drag",null),Bm(m.view,c),qt(m),o.mouse("end",m)}function y(m,w){if(t.call(this,m,w)){var S=m.changedTouches,k=e.call(this,m,w),E=S.length,O,D;for(O=0;O<E;++O)(D=A(this,k,m,w,S[O].identifier,S[O]))&&(Yn(m),D("start",m,S[O]))}}function b(m){var w=m.changedTouches,S=w.length,k,E;for(k=0;k<S;++k)(E=o[w[k].identifier])&&(qt(m),E("drag",m,w[k]))}function M(m){var w=m.changedTouches,S=w.length,k,E;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),k=0;k<S;++k)(E=o[w[k].identifier])&&(Yn(m),E("end",m,w[k]))}function A(m,w,S,k,E,O){var D=a.copy(),P=ga(O||S,w),T,j,L;if((L=r.call(m,new ko("beforestart",{sourceEvent:S,target:f,identifier:E,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:D}),k))!=null)return T=L.x-P[0]||0,j=L.y-P[1]||0,function F(R,q,H){var B=P,z;switch(R){case"start":o[E]=F,z=i++;break;case"end":delete o[E],--i;case"drag":P=ga(H||q,w),z=i;break}D.call(R,m,new ko(R,{sourceEvent:q,subject:L,target:f,identifier:E,active:z,x:P[0]+T,y:P[1]+j,dx:P[0]-B[0],dy:P[1]-B[1],dispatch:D}),k)}}return f.filter=function(m){return arguments.length?(t=typeof m=="function"?m:$r(!!m),f):t},f.container=function(m){return arguments.length?(e=typeof m=="function"?m:$r(m),f):e},f.subject=function(m){return arguments.length?(r=typeof m=="function"?m:$r(m),f):r},f.touchable=function(m){return arguments.length?(n=typeof m=="function"?m:$r(!!m),f):n},f.on=function(){var m=a.on.apply(a,arguments);return m===a?f:m},f.clickDistance=function(m){return arguments.length?(h=(m=+m)*m,f):Math.sqrt(h)},f}function vi(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function mc(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function jr(){}var Cr=.7,dn=1/Cr,Ht="\\s*([+-]?\\d+)\\s*",Sr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ue="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hm=/^#([0-9a-f]{3,8})$/,Vm=new RegExp(`^rgb\\(${Ht},${Ht},${Ht}\\)$`),Um=new RegExp(`^rgb\\(${Ue},${Ue},${Ue}\\)$`),Wm=new RegExp(`^rgba\\(${Ht},${Ht},${Ht},${Sr}\\)$`),Gm=new RegExp(`^rgba\\(${Ue},${Ue},${Ue},${Sr}\\)$`),Km=new RegExp(`^hsl\\(${Sr},${Ue},${Ue}\\)$`),Ym=new RegExp(`^hsla\\(${Sr},${Ue},${Ue},${Sr}\\)$`),ya={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};vi(jr,Nt,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ba,formatHex:ba,formatHex8:Xm,formatHsl:Zm,formatRgb:xa,toString:xa});function ba(){return this.rgb().formatHex()}function Xm(){return this.rgb().formatHex8()}function Zm(){return gc(this).formatHsl()}function xa(){return this.rgb().formatRgb()}function Nt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Hm.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?wa(e):r===3?new Se(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?qr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?qr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Vm.exec(t))?new Se(e[1],e[2],e[3],1):(e=Um.exec(t))?new Se(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Wm.exec(t))?qr(e[1],e[2],e[3],e[4]):(e=Gm.exec(t))?qr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Km.exec(t))?Sa(e[1],e[2]/100,e[3]/100,1):(e=Ym.exec(t))?Sa(e[1],e[2]/100,e[3]/100,e[4]):ya.hasOwnProperty(t)?wa(ya[t]):t==="transparent"?new Se(NaN,NaN,NaN,0):null}function wa(t){return new Se(t>>16&255,t>>8&255,t&255,1)}function qr(t,e,r,n){return n<=0&&(t=e=r=NaN),new Se(t,e,r,n)}function Qm(t){return t instanceof jr||(t=Nt(t)),t?(t=t.rgb(),new Se(t.r,t.g,t.b,t.opacity)):new Se}function Io(t,e,r,n){return arguments.length===1?Qm(t):new Se(t,e,r,n??1)}function Se(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}vi(Se,Io,mc(jr,{brighter(t){return t=t==null?dn:Math.pow(dn,t),new Se(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Cr:Math.pow(Cr,t),new Se(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Se(kt(this.r),kt(this.g),kt(this.b),hn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ma,formatHex:Ma,formatHex8:Jm,formatRgb:Ca,toString:Ca}));function Ma(){return`#${At(this.r)}${At(this.g)}${At(this.b)}`}function Jm(){return`#${At(this.r)}${At(this.g)}${At(this.b)}${At((isNaN(this.opacity)?1:this.opacity)*255)}`}function Ca(){const t=hn(this.opacity);return`${t===1?"rgb(":"rgba("}${kt(this.r)}, ${kt(this.g)}, ${kt(this.b)}${t===1?")":`, ${t})`}`}function hn(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function kt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function At(t){return t=kt(t),(t<16?"0":"")+t.toString(16)}function Sa(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Be(t,e,r,n)}function gc(t){if(t instanceof Be)return new Be(t.h,t.s,t.l,t.opacity);if(t instanceof jr||(t=Nt(t)),!t)return new Be;if(t instanceof Be)return t;t=t.rgb();var e=t.r/255,r=t.g/255,n=t.b/255,o=Math.min(e,r,n),a=Math.max(e,r,n),i=NaN,l=a-o,s=(a+o)/2;return l?(e===a?i=(r-n)/l+(r<n)*6:r===a?i=(n-e)/l+2:i=(e-r)/l+4,l/=s<.5?a+o:2-a-o,i*=60):l=s>0&&s<1?0:i,new Be(i,l,s,t.opacity)}function e0(t,e,r,n){return arguments.length===1?gc(t):new Be(t,e,r,n??1)}function Be(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}vi(Be,e0,mc(jr,{brighter(t){return t=t==null?dn:Math.pow(dn,t),new Be(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Cr:Math.pow(Cr,t),new Be(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,o=2*r-n;return new Se(Xn(t>=240?t-240:t+120,o,n),Xn(t,o,n),Xn(t<120?t+240:t-120,o,n),this.opacity)},clamp(){return new Be(Aa(this.h),Hr(this.s),Hr(this.l),hn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=hn(this.opacity);return`${t===1?"hsl(":"hsla("}${Aa(this.h)}, ${Hr(this.s)*100}%, ${Hr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Aa(t){return t=(t||0)%360,t<0?t+360:t}function Hr(t){return Math.max(0,Math.min(1,t||0))}function Xn(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}var mi=t=>()=>t;function t0(t,e){return function(r){return t+r*e}}function r0(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}function n0(t){return(t=+t)==1?yc:function(e,r){return r-e?r0(e,r,t):mi(isNaN(e)?r:e)}}function yc(t,e){var r=e-t;return r?t0(t,r):mi(isNaN(t)?e:t)}var fn=(function t(e){var r=n0(e);function n(o,a){var i=r((o=Io(o)).r,(a=Io(a)).r),l=r(o.g,a.g),s=r(o.b,a.b),c=yc(o.opacity,a.opacity);return function(d){return o.r=i(d),o.g=l(d),o.b=s(d),o.opacity=c(d),o+""}}return n.gamma=t,n})(1);function o0(t,e){e||(e=[]);var r=t?Math.min(e.length,t.length):0,n=e.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=t[o]*(1-a)+e[o]*a;return n}}function i0(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function a0(t,e){var r=e?e.length:0,n=t?Math.min(r,t.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=gi(t[i],e[i]);for(;i<r;++i)a[i]=e[i];return function(l){for(i=0;i<n;++i)a[i]=o[i](l);return a}}function l0(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}}function Re(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function s0(t,e){var r={},n={},o;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(o in e)o in t?r[o]=gi(t[o],e[o]):n[o]=e[o];return function(a){for(o in r)n[o]=r[o](a);return n}}var Po=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zn=new RegExp(Po.source,"g");function c0(t){return function(){return t}}function u0(t){return function(e){return t(e)+""}}function bc(t,e){var r=Po.lastIndex=Zn.lastIndex=0,n,o,a,i=-1,l=[],s=[];for(t=t+"",e=e+"";(n=Po.exec(t))&&(o=Zn.exec(e));)(a=o.index)>r&&(a=e.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i,x:Re(n,o)})),r=Zn.lastIndex;return r<e.length&&(a=e.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?u0(s[0].x):c0(e):(e=s.length,function(c){for(var d=0,h;d<e;++d)l[(h=s[d]).i]=h.x(c);return l.join("")})}function gi(t,e){var r=typeof e,n;return e==null||r==="boolean"?mi(e):(r==="number"?Re:r==="string"?(n=Nt(e))?(e=n,fn):bc:e instanceof Nt?fn:e instanceof Date?l0:i0(e)?o0:Array.isArray(e)?a0:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?s0:Re)(t,e)}function d0(t,e){return t=+t,e=+e,function(r){return Math.round(t*(1-r)+e*r)}}var ka=180/Math.PI,Eo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function xc(t,e,r,n,o,a){var i,l,s;return(i=Math.sqrt(t*t+e*e))&&(t/=i,e/=i),(s=t*r+e*n)&&(r-=t*s,n-=e*s),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,s/=l),t*n<e*r&&(t=-t,e=-e,s=-s,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(e,t)*ka,skewX:Math.atan(s)*ka,scaleX:i,scaleY:l}}var Vr;function h0(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Eo:xc(e.a,e.b,e.c,e.d,e.e,e.f)}function f0(t){return t==null||(Vr||(Vr=document.createElementNS("http://www.w3.org/2000/svg","g")),Vr.setAttribute("transform",t),!(t=Vr.transform.baseVal.consolidate()))?Eo:(t=t.matrix,xc(t.a,t.b,t.c,t.d,t.e,t.f))}function wc(t,e,r,n){function o(c){return c.length?c.pop()+" ":""}function a(c,d,h,f,v,p){if(c!==h||d!==f){var g=v.push("translate(",null,e,null,r);p.push({i:g-4,x:Re(c,h)},{i:g-2,x:Re(d,f)})}else(h||f)&&v.push("translate("+h+e+f+r)}function i(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(o(h)+"rotate(",null,n)-2,x:Re(c,d)})):d&&h.push(o(h)+"rotate("+d+n)}function l(c,d,h,f){c!==d?f.push({i:h.push(o(h)+"skewX(",null,n)-2,x:Re(c,d)}):d&&h.push(o(h)+"skewX("+d+n)}function s(c,d,h,f,v,p){if(c!==h||d!==f){var g=v.push(o(v)+"scale(",null,",",null,")");p.push({i:g-4,x:Re(c,h)},{i:g-2,x:Re(d,f)})}else(h!==1||f!==1)&&v.push(o(v)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=t(c),d=t(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,f),i(c.rotate,d.rotate,h,f),l(c.skewX,d.skewX,h,f),s(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(v){for(var p=-1,g=f.length,y;++p<g;)h[(y=f[p]).i]=y.x(v);return h.join("")}}}var p0=wc(h0,"px, ","px)","deg)"),v0=wc(f0,", ",")",")"),Qt=0,pr=0,sr=0,Mc=1e3,pn,vr,vn=0,Dt=0,Dn=0,Ar=typeof performance=="object"&&performance.now?performance:Date,Cc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function yi(){return Dt||(Cc(m0),Dt=Ar.now()+Dn)}function m0(){Dt=0}function mn(){this._call=this._time=this._next=null}mn.prototype=Sc.prototype={constructor:mn,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?yi():+r)+(e==null?0:+e),!this._next&&vr!==this&&(vr?vr._next=this:pn=this,vr=this),this._call=t,this._time=r,Oo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oo())}};function Sc(t,e,r){var n=new mn;return n.restart(t,e,r),n}function g0(){yi(),++Qt;for(var t=pn,e;t;)(e=Dt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Qt}function Ia(){Dt=(vn=Ar.now())+Dn,Qt=pr=0;try{g0()}finally{Qt=0,b0(),Dt=0}}function y0(){var t=Ar.now(),e=t-vn;e>Mc&&(Dn-=e,vn=t)}function b0(){for(var t,e=pn,r,n=1/0;e;)e._call?(n>e._time&&(n=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:pn=r);vr=t,Oo(n)}function Oo(t){if(!Qt){pr&&(pr=clearTimeout(pr));var e=t-Dt;e>24?(t<1/0&&(pr=setTimeout(Ia,t-Ar.now()-Dn)),sr&&(sr=clearInterval(sr))):(sr||(vn=Ar.now(),sr=setInterval(y0,Mc)),Qt=1,Cc(Ia))}}function Pa(t,e,r){var n=new mn;return e=e==null?0:+e,n.restart(o=>{n.stop(),t(o+e)},e,r),n}var x0=hi("start","end","cancel","interrupt"),w0=[],Ac=0,Ea=1,No=2,Xr=3,Oa=4,Do=5,Zr=6;function Ln(t,e,r,n,o,a){var i=t.__transition;if(!i)t.__transition={};else if(r in i)return;M0(t,r,{name:e,index:n,group:o,on:x0,tween:w0,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Ac})}function bi(t,e){var r=qe(t,e);if(r.state>Ac)throw new Error("too late; already scheduled");return r}function Xe(t,e){var r=qe(t,e);if(r.state>Xr)throw new Error("too late; already running");return r}function qe(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function M0(t,e,r){var n=t.__transition,o;n[e]=r,r.timer=Sc(a,0,r.time);function a(c){r.state=Ea,r.timer.restart(i,r.delay,r.time),r.delay<=c&&i(c-r.delay)}function i(c){var d,h,f,v;if(r.state!==Ea)return s();for(d in n)if(v=n[d],v.name===r.name){if(v.state===Xr)return Pa(i);v.state===Oa?(v.state=Zr,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete n[d]):+d<e&&(v.state=Zr,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete n[d])}if(Pa(function(){r.state===Xr&&(r.state=Oa,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=No,r.on.call("start",t,t.__data__,r.index,r.group),r.state===No){for(r.state=Xr,o=new Array(f=r.tween.length),d=0,h=-1;d<f;++d)(v=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(o[++h]=v);o.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(s),r.state=Do,1),h=-1,f=o.length;++h<f;)o[h].call(t,d);r.state===Do&&(r.on.call("end",t,t.__data__,r.index,r.group),s())}function s(){r.state=Zr,r.timer.stop(),delete n[e];for(var c in n)return;delete t.__transition}}function C0(t,e){var r=t.__transition,n,o,a=!0,i;if(r){e=e==null?null:e+"";for(i in r){if((n=r[i]).name!==e){a=!1;continue}o=n.state>No&&n.state<Do,n.state=Zr,n.timer.stop(),n.on.call(o?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete r[i]}a&&delete t.__transition}}function S0(t){return this.each(function(){C0(this,t)})}function A0(t,e){var r,n;return function(){var o=Xe(this,t),a=o.tween;if(a!==r){n=r=a;for(var i=0,l=n.length;i<l;++i)if(n[i].name===e){n=n.slice(),n.splice(i,1);break}}o.tween=n}}function k0(t,e,r){var n,o;if(typeof r!="function")throw new Error;return function(){var a=Xe(this,t),i=a.tween;if(i!==n){o=(n=i).slice();for(var l={name:e,value:r},s=0,c=o.length;s<c;++s)if(o[s].name===e){o[s]=l;break}s===c&&o.push(l)}a.tween=o}}function I0(t,e){var r=this._id;if(t+="",arguments.length<2){for(var n=qe(this.node(),r).tween,o=0,a=n.length,i;o<a;++o)if((i=n[o]).name===t)return i.value;return null}return this.each((e==null?A0:k0)(r,t,e))}function xi(t,e,r){var n=t._id;return t.each(function(){var o=Xe(this,n);(o.value||(o.value={}))[e]=r.apply(this,arguments)}),function(o){return qe(o,n).value[e]}}function kc(t,e){var r;return(typeof e=="number"?Re:e instanceof Nt?fn:(r=Nt(e))?(e=r,fn):bc)(t,e)}function P0(t){return function(){this.removeAttribute(t)}}function E0(t){return function(){this.removeAttributeNS(t.space,t.local)}}function O0(t,e,r){var n,o=r+"",a;return function(){var i=this.getAttribute(t);return i===o?null:i===n?a:a=e(n=i,r)}}function N0(t,e,r){var n,o=r+"",a;return function(){var i=this.getAttributeNS(t.space,t.local);return i===o?null:i===n?a:a=e(n=i,r)}}function D0(t,e,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttribute(t):(i=this.getAttribute(t),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=e(n=i,l)))}}function L0(t,e,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttributeNS(t.space,t.local):(i=this.getAttributeNS(t.space,t.local),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=e(n=i,l)))}}function _0(t,e){var r=Nn(t),n=r==="transform"?v0:kc;return this.attrTween(t,typeof e=="function"?(r.local?L0:D0)(r,n,xi(this,"attr."+t,e)):e==null?(r.local?E0:P0)(r):(r.local?N0:O0)(r,n,e))}function T0(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function R0(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function j0(t,e){var r,n;function o(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&R0(t,a)),r}return o._value=e,o}function B0(t,e){var r,n;function o(){var a=e.apply(this,arguments);return a!==n&&(r=(n=a)&&T0(t,a)),r}return o._value=e,o}function F0(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var n=Nn(t);return this.tween(r,(n.local?j0:B0)(n,e))}function z0(t,e){return function(){bi(this,t).delay=+e.apply(this,arguments)}}function $0(t,e){return e=+e,function(){bi(this,t).delay=e}}function q0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?z0:$0)(e,t)):qe(this.node(),e).delay}function H0(t,e){return function(){Xe(this,t).duration=+e.apply(this,arguments)}}function V0(t,e){return e=+e,function(){Xe(this,t).duration=e}}function U0(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?H0:V0)(e,t)):qe(this.node(),e).duration}function W0(t,e){if(typeof e!="function")throw new Error;return function(){Xe(this,t).ease=e}}function G0(t){var e=this._id;return arguments.length?this.each(W0(e,t)):qe(this.node(),e).ease}function K0(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Xe(this,t).ease=r}}function Y0(t){if(typeof t!="function")throw new Error;return this.each(K0(this._id,t))}function X0(t){typeof t!="function"&&(t=ic(t));for(var e=this._groups,r=e.length,n=new Array(r),o=0;o<r;++o)for(var a=e[o],i=a.length,l=n[o]=[],s,c=0;c<i;++c)(s=a[c])&&t.call(s,s.__data__,c,a)&&l.push(s);return new lt(n,this._parents,this._name,this._id)}function Z0(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,n=e.length,o=r.length,a=Math.min(n,o),i=new Array(n),l=0;l<a;++l)for(var s=e[l],c=r[l],d=s.length,h=i[l]=new Array(d),f,v=0;v<d;++v)(f=s[v]||c[v])&&(h[v]=f);for(;l<n;++l)i[l]=e[l];return new lt(i,this._parents,this._name,this._id)}function Q0(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function J0(t,e,r){var n,o,a=Q0(e)?bi:Xe;return function(){var i=a(this,t),l=i.on;l!==n&&(o=(n=l).copy()).on(e,r),i.on=o}}function eg(t,e){var r=this._id;return arguments.length<2?qe(this.node(),r).on.on(t):this.each(J0(r,t,e))}function tg(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function rg(){return this.on("end.remove",tg(this._id))}function ng(t){var e=this._name,r=this._id;typeof t!="function"&&(t=fi(t));for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i)for(var l=n[i],s=l.length,c=a[i]=new Array(s),d,h,f=0;f<s;++f)(d=l[f])&&(h=t.call(d,d.__data__,f,l))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,Ln(c[f],e,r,f,c,qe(d,r)));return new lt(a,this._parents,e,r)}function og(t){var e=this._name,r=this._id;typeof t!="function"&&(t=oc(t));for(var n=this._groups,o=n.length,a=[],i=[],l=0;l<o;++l)for(var s=n[l],c=s.length,d,h=0;h<c;++h)if(d=s[h]){for(var f=t.call(d,d.__data__,h,s),v,p=qe(d,r),g=0,y=f.length;g<y;++g)(v=f[g])&&Ln(v,e,r,g,f,p);a.push(f),i.push(d)}return new lt(a,i,e,r)}var ig=Rr.prototype.constructor;function ag(){return new ig(this._groups,this._parents)}function lg(t,e){var r,n,o;return function(){var a=Zt(this,t),i=(this.style.removeProperty(t),Zt(this,t));return a===i?null:a===r&&i===n?o:o=e(r=a,n=i)}}function Ic(t){return function(){this.style.removeProperty(t)}}function sg(t,e,r){var n,o=r+"",a;return function(){var i=Zt(this,t);return i===o?null:i===n?a:a=e(n=i,r)}}function cg(t,e,r){var n,o,a;return function(){var i=Zt(this,t),l=r(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(t),Zt(this,t))),i===s?null:i===n&&s===o?a:(o=s,a=e(n=i,l))}}function ug(t,e){var r,n,o,a="style."+e,i="end."+a,l;return function(){var s=Xe(this,t),c=s.on,d=s.value[a]==null?l||(l=Ic(e)):void 0;(c!==r||o!==d)&&(n=(r=c).copy()).on(i,o=d),s.on=n}}function dg(t,e,r){var n=(t+="")=="transform"?p0:kc;return e==null?this.styleTween(t,lg(t,n)).on("end.style."+t,Ic(t)):typeof e=="function"?this.styleTween(t,cg(t,n,xi(this,"style."+t,e))).each(ug(this._id,t)):this.styleTween(t,sg(t,n,e),r).on("end.style."+t,null)}function hg(t,e,r){return function(n){this.style.setProperty(t,e.call(this,n),r)}}function fg(t,e,r){var n,o;function a(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&hg(t,i,r)),n}return a._value=e,a}function pg(t,e,r){var n="style."+(t+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,fg(t,e,r??""))}function vg(t){return function(){this.textContent=t}}function mg(t){return function(){var e=t(this);this.textContent=e??""}}function gg(t){return this.tween("text",typeof t=="function"?mg(xi(this,"text",t)):vg(t==null?"":t+""))}function yg(t){return function(e){this.textContent=t.call(this,e)}}function bg(t){var e,r;function n(){var o=t.apply(this,arguments);return o!==r&&(e=(r=o)&&yg(o)),e}return n._value=t,n}function xg(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,bg(t))}function wg(){for(var t=this._name,e=this._id,r=Pc(),n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,c=0;c<l;++c)if(s=i[c]){var d=qe(s,e);Ln(s,t,r,c,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new lt(n,this._parents,t,r)}function Mg(){var t,e,r=this,n=r._id,o=r.size();return new Promise(function(a,i){var l={value:i},s={value:function(){--o===0&&a()}};r.each(function(){var c=Xe(this,n),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),c.on=e}),o===0&&a()})}var Cg=0;function lt(t,e,r,n){this._groups=t,this._parents=e,this._name=r,this._id=n}function Pc(){return++Cg}var Qe=Rr.prototype;lt.prototype={constructor:lt,select:ng,selectAll:og,selectChild:Qe.selectChild,selectChildren:Qe.selectChildren,filter:X0,merge:Z0,selection:ag,transition:wg,call:Qe.call,nodes:Qe.nodes,node:Qe.node,size:Qe.size,empty:Qe.empty,each:Qe.each,on:eg,attr:_0,attrTween:F0,style:dg,styleTween:pg,text:gg,textTween:xg,remove:rg,tween:I0,delay:q0,duration:U0,ease:G0,easeVarying:Y0,end:Mg,[Symbol.iterator]:Qe[Symbol.iterator]};function Sg(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ag={time:null,delay:0,duration:250,ease:Sg};function kg(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Ig(t){var e,r;t instanceof lt?(e=t._id,t=t._name):(e=Pc(),(r=Ag).time=yi(),t=t==null?null:t+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,c=0;c<l;++c)(s=i[c])&&Ln(s,t,e,c,i,r||kg(s,e));return new lt(n,this._parents,t,e)}Rr.prototype.interrupt=S0;Rr.prototype.transition=Ig;const Lo=Math.PI,_o=2*Lo,Mt=1e-6,Pg=_o-Mt;function Ec(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function Eg(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ec;const r=10**e;return function(n){this._+=n[0];for(let o=1,a=n.length;o<a;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}class Og{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Ec:Eg(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,n,o){this._append`Q${+e},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(e,r,n,o,a,i){this._append`C${+e},${+r},${+n},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(e,r,n,o,a){if(e=+e,r=+r,n=+n,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,l=this._y1,s=n-e,c=o-r,d=i-e,h=l-r,f=d*d+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(f>Mt)if(!(Math.abs(h*s-c*d)>Mt)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let v=n-i,p=o-l,g=s*s+c*c,y=v*v+p*p,b=Math.sqrt(g),M=Math.sqrt(f),A=a*Math.tan((Lo-Math.acos((g+f-y)/(2*b*M)))/2),m=A/M,w=A/b;Math.abs(m-1)>Mt&&this._append`L${e+m*d},${r+m*h}`,this._append`A${a},${a},0,0,${+(h*v>d*p)},${this._x1=e+w*s},${this._y1=r+w*c}`}}arc(e,r,n,o,a,i){if(e=+e,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(o),s=n*Math.sin(o),c=e+l,d=r+s,h=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${c},${d}`:(Math.abs(this._x1-c)>Mt||Math.abs(this._y1-d)>Mt)&&this._append`L${c},${d}`,n&&(f<0&&(f=f%_o+_o),f>Pg?this._append`A${n},${n},0,1,${h},${e-l},${r-s}A${n},${n},0,1,${h},${this._x1=c},${this._y1=d}`:f>Mt&&this._append`A${n},${n},0,${+(f>=Lo)},${h},${this._x1=e+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(e,r,n,o){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}}function Ng(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function gn(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function Jt(t){return t=gn(Math.abs(t)),t?t[1]:NaN}function Dg(t,e){return function(r,n){for(var o=r.length,a=[],i=0,l=t[0],s=0;o>0&&l>0&&(s+l+1>n&&(l=Math.max(1,n-s)),a.push(r.substring(o-=l,o+l)),!((s+=l+1)>n));)l=t[i=(i+1)%t.length];return a.reverse().join(e)}}function Lg(t){return function(e){return e.replace(/[0-9]/g,function(r){return t[+r]})}}var _g=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yn(t){if(!(e=_g.exec(t)))throw new Error("invalid format: "+t);var e;return new wi({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}yn.prototype=wi.prototype;function wi(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}wi.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Tg(t){e:for(var e=t.length,r=1,n=-1,o;r<e;++r)switch(t[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+t[r])break e;n>0&&(n=0);break}return n>0?t.slice(0,n)+t.slice(o+1):t}var Oc;function Rg(t,e){var r=gn(t,e);if(!r)return t+"";var n=r[0],o=r[1],a=o-(Oc=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+gn(t,Math.max(0,e+a-1))[0]}function Na(t,e){var r=gn(t,e);if(!r)return t+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var Da={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Ng,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Na(t*100,e),r:Na,s:Rg,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function La(t){return t}var _a=Array.prototype.map,Ta=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function jg(t){var e=t.grouping===void 0||t.thousands===void 0?La:Dg(_a.call(t.grouping,Number),t.thousands+""),r=t.currency===void 0?"":t.currency[0]+"",n=t.currency===void 0?"":t.currency[1]+"",o=t.decimal===void 0?".":t.decimal+"",a=t.numerals===void 0?La:Lg(_a.call(t.numerals,String)),i=t.percent===void 0?"%":t.percent+"",l=t.minus===void 0?"":t.minus+"",s=t.nan===void 0?"NaN":t.nan+"";function c(h){h=yn(h);var f=h.fill,v=h.align,p=h.sign,g=h.symbol,y=h.zero,b=h.width,M=h.comma,A=h.precision,m=h.trim,w=h.type;w==="n"?(M=!0,w="g"):Da[w]||(A===void 0&&(A=12),m=!0,w="g"),(y||f==="0"&&v==="=")&&(y=!0,f="0",v="=");var S=g==="$"?r:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",k=g==="$"?n:/[%p]/.test(w)?i:"",E=Da[w],O=/[defgprs%]/.test(w);A=A===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function D(P){var T=S,j=k,L,F,R;if(w==="c")j=E(P)+j,P="";else{P=+P;var q=P<0||1/P<0;if(P=isNaN(P)?s:E(Math.abs(P),A),m&&(P=Tg(P)),q&&+P==0&&p!=="+"&&(q=!1),T=(q?p==="("?p:l:p==="-"||p==="("?"":p)+T,j=(w==="s"?Ta[8+Oc/3]:"")+j+(q&&p==="("?")":""),O){for(L=-1,F=P.length;++L<F;)if(R=P.charCodeAt(L),48>R||R>57){j=(R===46?o+P.slice(L+1):P.slice(L))+j,P=P.slice(0,L);break}}}M&&!y&&(P=e(P,1/0));var H=T.length+P.length+j.length,B=H<b?new Array(b-H+1).join(f):"";switch(M&&y&&(P=e(B+P,B.length?b-j.length:1/0),B=""),v){case"<":P=T+P+j+B;break;case"=":P=T+B+P+j;break;case"^":P=B.slice(0,H=B.length>>1)+T+P+j+B.slice(H);break;default:P=B+T+P+j;break}return a(P)}return D.toString=function(){return h+""},D}function d(h,f){var v=c((h=yn(h),h.type="f",h)),p=Math.max(-8,Math.min(8,Math.floor(Jt(f)/3)))*3,g=Math.pow(10,-p),y=Ta[8+p/3];return function(b){return v(g*b)+y}}return{format:c,formatPrefix:d}}var Ur,Mi,Nc;Bg({thousands:",",grouping:[3],currency:["$",""]});function Bg(t){return Ur=jg(t),Mi=Ur.format,Nc=Ur.formatPrefix,Ur}function Fg(t){return Math.max(0,-Jt(Math.abs(t)))}function zg(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jt(e)/3)))*3-Jt(Math.abs(t)))}function $g(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Jt(e)-Jt(t))+1}function qg(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Hg(t){return function(){return t}}function Vg(t){return+t}var Ra=[0,1];function zt(t){return t}function To(t,e){return(e-=t=+t)?function(r){return(r-t)/e}:Hg(isNaN(e)?NaN:.5)}function Ug(t,e){var r;return t>e&&(r=t,t=e,e=r),function(n){return Math.max(t,Math.min(e,n))}}function Wg(t,e,r){var n=t[0],o=t[1],a=e[0],i=e[1];return o<n?(n=To(o,n),a=r(i,a)):(n=To(n,o),a=r(a,i)),function(l){return a(n(l))}}function Gg(t,e,r){var n=Math.min(t.length,e.length)-1,o=new Array(n),a=new Array(n),i=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++i<n;)o[i]=To(t[i],t[i+1]),a[i]=r(e[i],e[i+1]);return function(l){var s=zp(t,l,1,n)-1;return a[s](o[s](l))}}function Kg(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Yg(){var t=Ra,e=Ra,r=gi,n,o,a,i=zt,l,s,c;function d(){var f=Math.min(t.length,e.length);return i!==zt&&(i=Ug(t[0],t[f-1])),l=f>2?Gg:Wg,s=c=null,h}function h(f){return f==null||isNaN(f=+f)?a:(s||(s=l(t.map(n),e,r)))(n(i(f)))}return h.invert=function(f){return i(o((c||(c=l(e,t.map(n),Re)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,Vg),d()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),d()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),r=d0,d()},h.clamp=function(f){return arguments.length?(i=f?!0:zt,d()):i!==zt},h.interpolate=function(f){return arguments.length?(r=f,d()):r},h.unknown=function(f){return arguments.length?(a=f,h):a},function(f,v){return n=f,o=v,d()}}function Xg(){return Yg()(zt,zt)}function Zg(t,e,r,n){var o=Up(t,e,r),a;switch(n=yn(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(t),Math.abs(e));return n.precision==null&&!isNaN(a=zg(o,i))&&(n.precision=a),Nc(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=$g(o,Math.max(Math.abs(t),Math.abs(e))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=Fg(o))&&(n.precision=a-(n.type==="%")*2);break}}return Mi(n)}function Qg(t){var e=t.domain;return t.ticks=function(r){var n=e();return Vp(n[0],n[n.length-1],r??10)},t.tickFormat=function(r,n){var o=e();return Zg(o[0],o[o.length-1],r??10,n)},t.nice=function(r){r==null&&(r=10);var n=e(),o=0,a=n.length-1,i=n[o],l=n[a],s,c,d=10;for(l<i&&(c=i,i=l,l=c,c=o,o=a,a=c);d-- >0;){if(c=Co(i,l,r),c===s)return n[o]=i,n[a]=l,e(n);if(c>0)i=Math.floor(i/c)*c,l=Math.ceil(l/c)*c;else if(c<0)i=Math.ceil(i*c)/c,l=Math.floor(l*c)/c;else break;s=c}return t},t}function Ro(){var t=Xg();return t.copy=function(){return Kg(t,Ro())},qg.apply(t,arguments),Qg(t)}function jt(t){return function(){return t}}function Jg(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);e=n}return t},()=>new Og(e)}function e1(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Dc(t){this._context=t}Dc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Lc(t){return new Dc(t)}function t1(t){return t[0]}function r1(t){return t[1]}function n1(t,e){var r=jt(!0),n=null,o=Lc,a=null,i=Jg(l);t=typeof t=="function"?t:t===void 0?t1:jt(t),e=typeof e=="function"?e:e===void 0?r1:jt(e);function l(s){var c,d=(s=e1(s)).length,h,f=!1,v;for(n==null&&(a=o(v=i())),c=0;c<=d;++c)!(c<d&&r(h=s[c],c,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(h,c,s),+e(h,c,s));if(v)return a=null,v+""||null}return l.x=function(s){return arguments.length?(t=typeof s=="function"?s:jt(+s),l):t},l.y=function(s){return arguments.length?(e=typeof s=="function"?s:jt(+s),l):e},l.defined=function(s){return arguments.length?(r=typeof s=="function"?s:jt(!!s),l):r},l.curve=function(s){return arguments.length?(o=s,n!=null&&(a=o(n)),l):o},l.context=function(s){return arguments.length?(s==null?n=a=null:a=o(n=s),l):n},l}function $t(t,e,r){this.k=t,this.x=e,this.y=r}$t.prototype={constructor:$t,scale:function(t){return t===1?this:new $t(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new $t(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$t.prototype;var me;(function(t){t.Monomer="monomer",t.Preset="preset",t.Bond="bond",t.AmbiguousMonomer="ambiguousMonomer"})(me||(me={}));var Ve;(function(t){t.Library="library",t.ChainStart="chainStart",t.ChainMiddle="chainMiddle",t.ChainEnd="chainEnd"})(Ve||(Ve={}));var _c="select-submenu";function ja(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Wr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ja(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var It;(function(t){t.nanoMol="nM",t.microMol="M",t.milliMol="mM"})(It||(It={}));var Ba=V(V(V({},It.nanoMol,Math.pow(10,9)),It.microMol,Math.pow(10,6)),It.milliMol,Math.pow(10,3)),o1={ketcherId:"",isReady:null,activeTool:"select",editor:void 0,editorLayoutMode:void 0,editorLineLength:Ad.editorLineLength,preview:{type:me.Monomer,monomer:void 0,style:{}},position:void 0,isContextMenuActive:!1,isMacromoleculesPropertiesWindowOpened:!1,macromoleculesProperties:void 0,unipositiveIonsMeasurementUnit:It.milliMol,oligonucleotidesMeasurementUnit:It.microMol,unipositiveIonsValue:140,oligonucleotidesValue:200,app:{buildDate:"2025-10-22T18:20:32",indigoVersion:nn.INDIGO_VERSION||"",indigoMachine:nn.INDIGO_MACHINE||"",version:"3.9.0-rc.3"},selectedMenuGroupItems:{}},Tc=On({name:"editor",initialState:o1,reducers:{init:function(e){e.isReady=!1},initKetcherId:function(e,r){e.ketcherId=r.payload},initSuccess:function(e){e.isReady=!0},initFailure:function(e){e.isReady=!1},selectTool:function(e,r){e.activeTool=r.payload},setPosition:function(e,r){e.position=r.payload},createEditor:function(e,r){var n,o,a=new Dr({theme:r.payload.theme,canvas:r.payload.canvas,monomersLibraryUpdate:r.payload.monomersLibraryUpdate,monomersLibraryReplace:r.payload.monomersLibraryReplace});e.editor=a,(n=(o=r.payload).onInit)===null||n===void 0||n.call(o,a)},destroyEditor:function(e){var r,n;e.editorLayoutMode=(r=e.editor)===null||r===void 0?void 0:r.mode.modeName,(n=e.editor)===null||n===void 0||n.destroy(),e.editor=void 0},showPreview:function(e,r){e.preview=r.payload||{monomer:void 0,style:""}},setContextMenuActive:function(e,r){e.isContextMenuActive=r.payload},setMacromoleculesPropertiesWindowVisibility:function(e,r){e.isMacromoleculesPropertiesWindowOpened=r.payload},toggleMacromoleculesPropertiesWindowVisibility:function(e){e.isMacromoleculesPropertiesWindowOpened=!e.isMacromoleculesPropertiesWindowOpened},setMacromoleculesProperties:function(e,r){e.macromoleculesProperties=r.payload},setUnipositiveIonsMeasurementUnit:function(e,r){e.unipositiveIonsMeasurementUnit=r.payload},setOligonucleotidesMeasurementUnit:function(e,r){e.oligonucleotidesMeasurementUnit=r.payload},setEditorLineLength:function(e,r){e.editorLineLength=Wr(Wr({},e.editorLineLength),r.payload)},setUnipositiveIonsValue:function(e,r){e.unipositiveIonsValue=r.payload},setOligonucleotidesValue:function(e,r){e.oligonucleotidesValue=r.payload},setAppMeta:function(e,r){e.app=r.payload},setSelectedMenuGroupItem:function(e,r){e.selectedMenuGroupItems=Wr(Wr({},e.selectedMenuGroupItems),{},V({},r.payload.groupName,r.payload.activeItemName))}}}),fe=Tc.actions;fe.init;fe.initSuccess;fe.initFailure;var i1=fe.initKetcherId,ft=fe.selectTool;fe.setPosition;var a1=fe.createEditor,l1=fe.destroyEditor,er=fe.showPreview,jo=fe.setContextMenuActive,s1=fe.setMacromoleculesPropertiesWindowVisibility,Rc=fe.toggleMacromoleculesPropertiesWindowVisibility,Qn=fe.setMacromoleculesProperties,c1=fe.setUnipositiveIonsMeasurementUnit,u1=fe.setOligonucleotidesMeasurementUnit,d1=fe.setEditorLineLength,h1=fe.setUnipositiveIonsValue,f1=fe.setOligonucleotidesValue,p1=fe.setAppMeta,v1=fe.setSelectedMenuGroupItem,Br=function(e){return e.editor.preview},_n=function(e){return e.editor.activeTool},jc=function(e){return e.editor.ketcherId},ae=function(e){return e.editor.editor},Ze=function(e){var r;return(r=e.editor.editor)===null||r===void 0?void 0:r.isSequenceEditInRNABuilderMode},Bc=function(e){var r;return(r=e.editor.editor)===null||r===void 0?void 0:r.isSequenceMode},m1=function(e){return e.editor.editorLayoutMode},g1=function(e){var r;return(r=e.editor.editor)===null||r===void 0?void 0:r.isHandToolSelected},Fc=function(e){var r;return(r=e.editor.editor)===null||r===void 0||(r=r.drawingEntitiesManager)===null||r===void 0?void 0:r.hasAntisenseChains},y1=function(e){return e.editor.isContextMenuActive},zc=function(e){return e.editor.isMacromoleculesPropertiesWindowOpened},b1=function(e){return e.editor.macromoleculesProperties},Ci=function(e){return e.editor.unipositiveIonsMeasurementUnit},Si=function(e){return e.editor.oligonucleotidesMeasurementUnit},Ai=function(e){return e.editor.unipositiveIonsValue},ki=function(e){return e.editor.oligonucleotidesValue},x1=function(e){return e.editor.editorLineLength},$c=function(e){return e.editor.app},w1=function(e){return function(r){return r.editor.selectedMenuGroupItems[e]}},qc=function(e){return e.editor.selectedMenuGroupItems[_c]||"select-rectangle"},M1=Tc.reducer,Hc="FAVORITES",C1="PEPTIDE",gr={PEPTIDE:"PEPTIDE",CHEM:"CHEM",RNA:"RNA"},Z;(function(t){t.SUGARS="Sugars",t.BASES="Bases",t.PHOSPHATES="Phosphates",t.PEPTIDES="Amino acids",t.NUCLEOTIDES="Nucleotides"})(Z||(Z={}));var Fa;(function(t){t.R="R",t.A="A",t.C="C",t.G="G",t.T="T",t.U="U",t.X="X",t.P="P"})(Fa||(Fa={}));var Jn={R:Z.SUGARS,A:Z.BASES,C:Z.BASES,G:Z.BASES,T:Z.BASES,U:Z.BASES,X:Z.BASES,P:Z.PHOSPHATES},vt="favoriteItemsUniqueKeys",tr="ketcher_custom_presets",za="Z",S1="No natural analogue",$a="thymine",qa="uracil",kr={PEPTIDES:1,RNA:2},Ii="",A1=(function(){function t(){Ts(this,t),this.localStorage=window.localStorage}return Os(t,[{key:"getItem",value:function(r){var n=this.localStorage.getItem(r);return n?JSON.parse(n):null}},{key:"setItem",value:function(r,n){this.localStorage.setItem(r,JSON.stringify(n))}},{key:"removeItem",value:function(r){this.localStorage.removeItem(r)}}]),t})(),Ae=new A1;function Ha(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function xe(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ha(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ha(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var k1=V(V({},yt.PEPTIDES,tt.AminoAcid),yt.BASES,tt.Base),I1={monomers:[],defaultRnaPresets:[],favorites:{},searchFilter:"",selectedTabIndex:kr.RNA};function ze(t){var e;return Me(t)?t.id||t.label:"".concat(t.props.MonomerName,"___").concat((e=t.props)===null||e===void 0?void 0:e.Name)}function P1(t){var e,r,n;return"".concat(t.name,"_").concat(((e=t.base)===null||e===void 0?void 0:e.label)||".","_").concat(((r=t.sugar)===null||r===void 0?void 0:r.label)||".","_").concat(((n=t.phosphate)===null||n===void 0?void 0:n.label)||".")}var Vc=On({name:"library",initialState:I1,reducers:{loadMonomerLibrary:function(e,r){var n=r.payload.map(function(o){return xe(xe({},o),{},{props:xe({},o.props)})});e.monomers=n},loadDefaultPresets:function(e,r){e.defaultRnaPresets=r.payload.map(function(n){return xe({},n)})},setFavoriteMonomersFromLocalStorage:function(e){var r={},n=Ae.getItem(vt);!n||!Array.isArray(n)||(e.monomers.forEach(function(o){var a=ze(o),i=n.find(function(l){return l===a});i&&(r[a]=xe(xe({},o),{},{favorite:!0}))}),e.favorites=r)},clearFavorites:function(e){e.favorites={}},toggleMonomerFavorites:function(e,r){var n=ze(r.payload),o=Ae.getItem(vt)||[];e.favorites[n]?(delete e.favorites[n],Ae.setItem(vt,o.filter(function(a){return a!==n}))):(e.favorites[n]=xe(xe({},r.payload),{},{favorite:!0}),o.push(n),Ae.setItem(vt,o))},setSearchFilter:function(e,r){e.searchFilter=r.payload},setSelectedTabIndex:function(e,r){e.selectedTabIndex=r.payload}}}),Lt=Vc.actions,Bo=Lt.loadMonomerLibrary,E1=Lt.loadDefaultPresets,O1=Lt.setFavoriteMonomersFromLocalStorage;Lt.clearFavorites;var N1=Lt.toggleMonomerFavorites,Va=Lt.setSearchFilter,Ir=Lt.setSelectedTabIndex,D1=function(e){return e.library.searchFilter},Uc=function(e,r){return e.filter(function(n){var o;return!n.isAmbiguous&&((o=n.props)===null||o===void 0?void 0:o.MonomerType)===r})},Pr=function(e,r){var n=e.filter(function(i){if(!Me(i))return!1;var l=new $e(i,void 0,!1);return k1[r]===l.monomerClass});if(n.length===0)return[];var o=[];r===yt.BASES?o=[{groupTitle:"Ambiguous DNA Bases",groupItems:n.filter(function(i){return Me(i)&&i.options.find(function(l){return l.templateId.toLowerCase().includes($a)})})},{groupTitle:"Ambiguous RNA Bases",groupItems:n.filter(function(i){return Me(i)&&i.options.find(function(l){return l.templateId.toLowerCase().includes(qa)})})},{groupTitle:"Ambiguous Bases",groupItems:n.filter(function(i){return Me(i)&&i.options.every(function(l){return!l.templateId.toLowerCase().includes($a)&&!l.templateId.toLowerCase().includes(qa)})})}]:o.push({groupTitle:"Ambiguous ".concat(r),groupItems:n});var a=["X","N"];return o.forEach(function(i){i.groupItems.sort(function(l,s){return l.label.localeCompare(s.label)}),i.groupItems.sort(function(l){return a.includes(l.label)?-1:1})}),o},L1=function(e){return e.filter(function(r){var n,o;return!r.isAmbiguous&&(((n=r.props)===null||n===void 0?void 0:n.MonomerClass)===tt.RNA||((o=r.props)===null||o===void 0?void 0:o.MonomerClass)===tt.DNA)})},_1=function(e){return e.filter(function(r){return r.favorite&&!r.isAmbiguous})},T1=function(e){var r=[];for(var n in yt){var o=Pr(e,yt[n]);r=[].concat(ue(r),ue(o))}return r.forEach(function(a){a.groupItems=a.groupItems.filter(function(i){return i.favorite})}),r.filter(function(a){return a.groupItems.length})},Tn=li(function(t){return t.library},function(t){var e=t.searchFilter,r=t.monomers,n=t.favorites,o=e.toLowerCase(),a=function(){var l,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",d=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0,f=s.toLowerCase(),v=c.toLowerCase(),p=d==null||(l=d.base)===null||l===void 0?void 0:l.toLowerCase(),g=d!=null&&d.modifications?Object.values(d.modifications).map(function(L){return L.toLowerCase()}).join(" "):"";if(h==="/")return!!(p||g);if(h.includes("/")){var y=h.split("/");if(y.length>3||y.length===3&&y[2]!=="")return!1;if(y.length===3&&y[1]!==""){var b=y[1],M=p&&p.length===b.length&&Array.from(p).every(function(L,F){return L===b[F]}),A=g?g.split(" ").some(function(L){return L.length===b.length&&Array.from(L).every(function(F,R){return F===b[R]})}):!1;return M||A}var m=y[0],w=y[1];if(h.startsWith("/")&&h.length>1){var S=h.slice(1);return p&&p.startsWith(S)||g&&g.split(" ").some(function(L){return L.startsWith(S)})}if(h.endsWith("/")&&h.length>1){var k=h.slice(0,-1),E=h[h.length-2];return p&&p.endsWith(k)&&p[p.length-1]===E||g&&g.split(" ").some(function(L){return L.endsWith(k)&&L[L.length-1]===E})}var O=p&&p.startsWith(w)&&p.endsWith(m),D=g?g.split(" ").some(function(L){return L.startsWith(w)&&L.endsWith(m)}):!1;return O||D}var P=p?p.includes(h):!1,T=g?g.includes(h):!1,j=f.includes(h)||v.includes(h)||P||T;return j};return r.filter(function(i){if(i.isAmbiguous){var l=i.label,s=i.id,c=i.idtAliases,d=i.monomers,h=a(l,s,c,o);return h||d.some(function(y){var b=y.monomerItem.props,M=b.Name,A=b.MonomerName,m=b.idtAliases;return a(M,A,m,o)})}else{var f=i.props,v=f.Name,p=f.MonomerName,g=f.idtAliases;return a(v,p,g,o)}}).map(function(i){return xe(xe({},i),{},{favorite:!!n[ze(i)]})})}),Fo=function(e){var r=e.reduce(function(a,i){var l=i.props.MonomerNaturalAnalogCode||za;return a[l]||(a[l]=[]),a[l].push(xe(xe({},i),{},{label:i.props.MonomerName})),a},{}),n=Object.entries(r).reduce(function(a,i){var l=_(i,2),s=l[0],c=l[1],d=c.sort(function(v,p){return v.label.localeCompare(p.label)}),h=d.findIndex(function(v){return v.label===s});if(h!==-1){var f=d.splice(h,1);d.unshift(f[0])}return a[s]=d,a},{}),o=[];return Object.keys(n).sort(function(a,i){return a.localeCompare(i)}).reduce(function(a,i){var l={groupTitle:i===za?S1:i,groupItems:[]};return n[i].forEach(function(s){l.groupItems.push(xe(xe({},s),{},{props:xe({},s.props)}))}),l.groupItems.length&&a.push(l),a},o)},Wc=function(e){return e.library.selectedTabIndex},R1=Vc.reducer,j1=function(e){return e.library.defaultRnaPresets},B1={name:null,isOpen:!1,additionalProps:null,errorTooltipText:"",errorModalText:"",errorModalTitle:""},Gc=On({name:"modal",initialState:B1,reducers:{openModal:function(e,r){typeof r.payload=="string"?e.name=r.payload:(e.name=r.payload.name,e.additionalProps=r.payload.additionalProps),e.isOpen=!0},closeModal:function(e){e.name=null,e.isOpen=!1,e.additionalProps=null},openErrorTooltip:function(e,r){e.errorTooltipText=r.payload},closeErrorTooltip:function(e){e.errorTooltipText=""},openErrorModal:function(e,r){if(typeof r.payload=="string")e.errorModalText=r.payload;else{var n=r.payload,o=n.errorMessage,a=n.errorTitle;e.errorModalText=o,e.errorModalTitle=a}},closeErrorModal:function(e){e.errorModalText=""}}}),ar=Gc.actions,Vt=ar.openModal,F1=ar.closeModal,Ua=ar.openErrorTooltip,z1=ar.closeErrorTooltip,Er=ar.openErrorModal,$1=ar.closeErrorModal,q1=function(e){return e.modal.name},H1=function(e){return e.modal.isOpen},V1=function(e){return e.modal.additionalProps},U1=function(e){return e.modal.errorTooltipText},W1=function(e){return e.modal.errorModalText},G1=function(e){return e.modal.errorModalTitle},K1=Gc.reducer;function Wa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Y1(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wa(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wa(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rr=function(){return Ae.getItem(tr)},Pi=function(e){var r,n=rr();return(r=n?.findIndex(function(o){return o.name===e}))!==null&&r!==void 0?r:-1},Kc=function(e){var r=Y1({},e),n=rr()||[],o=Pi(r.nameInList);r.nameInList=r.name,o>-1?(n.splice(o,1,r),Ae.setItem(tr,n)):Ae.setItem(tr,[].concat(ue(n),[r]))},X1=function(e){if(e){var r=rr(),n=Pi(e);r&&(r.splice(n,1),r.length?Ae.setItem(tr,r):Ae.removeItem(tr))}},Z1=function(e){if(e){var r=rr(),n=Pi(e);r&&n>-1&&(r[n].favorite=!r[n].favorite,Ae.setItem(tr,r))}},Q1=function(e){var r=["sugar","base","phosphate"],n=jh(e,r);n.templates=[];for(var o=0,a=r;o<a.length;o++){var i,l=a[o],s=e[l],c=(s==null||(i=s.props)===null||i===void 0?void 0:i.id)||s?.id;c&&n.templates.push({$ref:s.isAmbiguous?Cs(c):Ss(c)})}return n},J1=function(e,r){var n,o,a=[],i=[],l=[];return!r||!(e!=null&&e.sugar)&&!(e!=null&&e.phosphate)&&!(e!=null&&e.base)?{sugarValidations:a,phosphateValidations:i,baseValidations:l}:(e!=null&&e.phosphate&&a.push("R2"),e!=null&&e.base&&a.push("R3"),l.push("R1"),e!=null&&(n=e.sugar)!==null&&n!==void 0&&(n=n.props)!==null&&n!==void 0&&n.MonomerCaps&&!("R3"in e.sugar.props.MonomerCaps)&&l.push("DISABLED"),i.push("R1"),e!=null&&(o=e.sugar)!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.MonomerCaps&&!("R2"in e.sugar.props.MonomerCaps)&&i.push("DISABLED"),{sugarValidations:a,phosphateValidations:i,baseValidations:l})};function Ga(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function cr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ga(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ga(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var we;(function(t){t.Presets="Presets"})(we||(we={}));var ey={activePreset:null,sequenceSelection:void 0,sequenceSelectionName:void 0,isSequenceFirstsOnlyNucleoelementsSelected:void 0,activePresetMonomerGroup:null,groupItemValidations:V(V(V({},Z.BASES,[]),Z.SUGARS,[]),Z.PHOSPHATES,[]),presetsDefault:[],presetsCustom:[],activeRnaBuilderItem:null,activeMonomerKey:null,isEditMode:!1,uniqueNameError:"",invalidPresetError:"",activePresetForContextMenu:null},Ct=V(V(V({},Z.BASES,"base"),Z.SUGARS,"sugar"),Z.PHOSPHATES,"phosphate"),Yc=On({name:"rna-builder",initialState:ey,reducers:{createNewPreset:function(e){e.activePreset={base:void 0,sugar:void 0,phosphate:void 0,name:"",nameInList:""}},setActivePreset:function(e,r){e.activePreset=cr(cr({},r.payload),{},{nameInList:r.payload.name})},setSequenceSelection:function(e,r){e.sequenceSelection=ue(r.payload)},setSequenceSelectionName:function(e,r){e.sequenceSelectionName=r.payload},setIsSequenceFirstsOnlyNucleoelementsSelected:function(e,r){e.isSequenceFirstsOnlyNucleoelementsSelected=r.payload},setActivePresetForContextMenu:function(e,r){e.activePresetForContextMenu=r.payload},setActivePresetName:function(e,r){e.activePreset.name=r.payload},setActiveRnaBuilderItem:function(e,r){e.activeRnaBuilderItem=r.payload},recalculateRnaBuilderValidations:function(e,r){var n=J1(r.payload.rnaPreset,r.payload.isEditMode),o=n.sugarValidations,a=n.phosphateValidations,i=n.baseValidations;e.groupItemValidations[Z.SUGARS]=o,e.groupItemValidations[Z.BASES]=i,e.groupItemValidations[Z.PHOSPHATES]=a},setActivePresetMonomerGroup:function(e,r){e.activePresetMonomerGroup=r.payload},savePreset:function(e,r){var n=r.payload,o=cr({},n);if(Kc(Q1(o)),o.nameInList){var a=e.presetsCustom.findIndex(function(i){return i.name===o.nameInList});o.nameInList=o.name,a===-1?e.presetsCustom.push(o):e.presetsCustom.splice(a,1,o)}else e.presetsCustom.push(o);e.activePreset&&(e.activePreset.nameInList=o.name)},deletePreset:function(e,r){var n=r.payload;X1(n.name);var o=e.presetsCustom.findIndex(function(a){return a.name===n.name});e.presetsCustom.splice(o,1),n.nameInList&&(e.activePreset=null)},setIsEditMode:function(e,r){e.isEditMode=r.payload},setUniqueNameError:function(e,r){e.uniqueNameError=r.payload},setInvalidPresetError:function(e,r){e.invalidPresetError=r.payload},setDefaultPresets:function(e,r){var n=r.payload[0];if(n){var o=e.presetsDefault.find(function(a){return a.name===n.name});o||(e.presetsDefault=r.payload)}},setCustomPresets:function(e,r){e.presetsCustom=r.payload},setFavoritePresetsFromLocalStorage:function(e){var r=Ae.getItem(vt);!r||!Array.isArray(r)||(e.presetsDefault=e.presetsDefault.map(function(n){var o="".concat(n.name,"_").concat(Gi.RNA),a=r.find(function(i){return i===o});return a?cr(cr({},n),{},{favorite:!0}):n}))},clearFavorites:function(e){e.presetsDefault=[]},setActiveMonomerKey:function(e,r){e.activeMonomerKey=r.payload},togglePresetFavorites:function(e,r){var n=e.presetsDefault.findIndex(function(d){return d.name===r.payload.name}),o=e.presetsCustom.findIndex(function(d){return d.name===r.payload.name});if(n>=0){var a=e.presetsDefault[n].favorite;e.presetsDefault[n].favorite=!a}else if(o>=0){Z1(e.presetsCustom[o].name);var i=e.presetsCustom[o].favorite;e.presetsCustom[o].favorite=!i;return}var l="".concat(r.payload.name,"_").concat(Gi.RNA),s=Ae.getItem(vt)||[],c=s.some(function(d){return d===l});c?Ae.setItem(vt,s.filter(function(d){return d!==l})):(s.push(l),Ae.setItem(vt,s))}}}),ty=function(e){return e.rnaBuilder},Xc=function(e){return e.rnaBuilder.activeRnaBuilderItem},ry=function(e){return e.rnaBuilder.groupItemValidations},Rn=function(e){return e.rnaBuilder.activePreset},Zc=function(e){return e.rnaBuilder.sequenceSelection},ny=function(e){return e.rnaBuilder.sequenceSelectionName},oy=function(e){return e.rnaBuilder.isSequenceFirstsOnlyNucleoelementsSelected},eo=function(e,r){if(!(!Ct[r]||!e))return e[Ct[r]]},iy=function(e){return e.rnaBuilder.activePresetMonomerGroup},Ka=function(e){return!!(e.name&&e.sugar&&(e.base||e.phosphate))},lr=function(e){return e.rnaBuilder.isEditMode},Qc=function(e){var r,n,o,a,i,l;if(!e)return"";var s=((r=e.sugar)===null||r===void 0?void 0:r.label)||((n=e.sugar)===null||n===void 0?void 0:n.props.MonomerName)||"",c=((o=e.base)===null||o===void 0?void 0:o.label)||((a=e.base)===null||a===void 0?void 0:a.props.MonomerName)||"",d=((i=e.phosphate)===null||i===void 0?void 0:i.label)||((l=e.phosphate)===null||l===void 0?void 0:l.props.MonomerName)||"",h=s;return s&&d||(s||d)&&c?h+="(".concat(c,")"):h+=c,h+=d,h},ay=function(e){return e.rnaBuilder.uniqueNameError},ly=function(e){return e.rnaBuilder.invalidPresetError},Ei=function(e){var r=e.rnaBuilder.activePreset;return r&&!r.nameInList&&!r.name&&!r.sugar&&!r.base&&!r.phosphate},Jc=function(e){return e.rnaBuilder.activePresetForContextMenu},sy=function(e){return e.filter(function(r){return r.favorite})},eu=function(e){return e.rnaBuilder.activeMonomerKey},jn=li(ty,function(t){var e=t.presetsDefault,r=e===void 0?[]:e,n=t.presetsCustom,o=n===void 0?[]:n;return[].concat(ue(r),ue(o))}),Bn=li(jn,D1,function(t,e){var r=e.toLowerCase();return t.filter(function(n){var o,a,i,l,s,c,d,h,f=(o=n.name)===null||o===void 0?void 0:o.toLowerCase(),v=(a=n.sugar)===null||a===void 0||(a=a.label)===null||a===void 0?void 0:a.toLowerCase(),p=(i=n.phosphate)===null||i===void 0||(i=i.label)===null||i===void 0?void 0:i.toLowerCase(),g=(l=n.base)===null||l===void 0||(l=l.label)===null||l===void 0?void 0:l.toLowerCase(),y=(s=n.idtAliases)===null||s===void 0||(s=s.base)===null||s===void 0?void 0:s.toLowerCase(),b=(c=n.idtAliases)===null||c===void 0?void 0:c.modifications,M=y;if(y&&(d=n.name)!==null&&d!==void 0&&d.includes("MOE")){var A,m,w=y,S=(A=b?.endpoint5)!==null&&A!==void 0?A:"5".concat(w),k=(m=b?.internal)!==null&&m!==void 0?m:"i".concat(w);M="".concat(S,", ").concat(k)}var E=(r.match(/\//g)||[]).length,O=r.split("/");if(E>=2&&O[2]!==void 0&&O[2]!=="")return!1;if(r.startsWith("/")&&r.length>1){var D,P=r.slice(1);return((D=M)===null||D===void 0?void 0:D.toLowerCase().startsWith(P))||y?.startsWith(P)||b&&Object.values(b).some(function(F){return F?.toLowerCase().startsWith(P)})}if(r.endsWith("/")&&r.length>1){var T,j=r.slice(0,-1),L=r[r.length-2];return((T=M)===null||T===void 0?void 0:T.toLowerCase().endsWith(j))&&M[M.length-1]===L||y?.endsWith(j)&&y[y.length-1]===L||b&&Object.values(b).some(function(F){return F?.toLowerCase().endsWith(j)&&F[F.length-1]===L})}return r==="/"?!!n.idtAliases:f?.includes(r)||v?.includes(r)||p?.includes(r)||g?.includes(r)||((h=M)===null||h===void 0?void 0:h.toLowerCase().includes(r))})}),he=Yc.actions,Or=he.setActivePreset,Oi=he.setSequenceSelection,tu=he.setSequenceSelectionName,cy=he.setIsSequenceFirstsOnlyNucleoelementsSelected;he.setActivePresetName;var Pt=he.setActiveRnaBuilderItem,zo=he.setActiveMonomerKey,Ni=he.recalculateRnaBuilderValidations,ru=he.setActivePresetMonomerGroup,uy=he.savePreset,dy=he.deletePreset,Di=he.createNewPreset,st=he.setIsEditMode,Li=he.setUniqueNameError,nu=he.setInvalidPresetError,hy=he.setDefaultPresets,fy=he.setCustomPresets,py=he.setActivePresetForContextMenu,vy=he.togglePresetFavorites,my=he.setFavoritePresetsFromLocalStorage,gy=he.clearFavorites,yy=Yc.reducer;function by(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Cp({reducer:{editor:M1,modal:K1,library:R1,rnaBuilder:yy},middleware:function(n){return n({serializableCheck:!1})},preloadedState:t});return e}var Ya=by(),le={colorA:{regular:"#5ADC11",hover:"#4FC218"},colorCM:{regular:"#59D0FF",hover:"#3CB9EB"},colorDQ:{regular:"#AD4551",hover:"#AB0014"},colorEN:{regular:"#93F5F5",hover:"#00F0F0"},colorFY:{regular:"#5656BF",hover:"#2626BF"},colorGX:{regular:"#FFE97B",hover:"#F8DC50"},colorH:{regular:"#BFC9FF",hover:"#99AAFF"},colorILV:{regular:"#50E576",hover:"#00D936"},colorKR:{regular:"#365CFF",hover:"#002CEB"},colorP:{regular:"#F2C5B6",hover:"#FFA98C"},colorST:{regular:"#FF8D8D",hover:"#ED6868"},colorW:{regular:"#99458B",hover:"#7F006B"},colorU:{regular:"#FF973C",hover:"#2EE55D"},colorX:{regular:"#CAD3DD",hover:"#B8BBCC"},chem:{regular:"#333333",hover:"#555555"},default:{regular:"#CCCBD6",hover:"#B8BBCC"}},de={D:{regular:"#FF8C69",hover:"#0097A8"},E:{regular:"#DC143C",hover:"#0097A8"},K:{regular:"#B0E0E6",hover:"#0097A8"},H:{regular:"#007FFF",hover:"#0097A8"},O:{regular:"#2A52BE",hover:"#0097A8"},R:{regular:"#0A12FF",hover:"#0097A8"},Q:{regular:"#EDB4ED",hover:"#0097A8"},Y:{regular:"#D65CBC",hover:"#0097A8"},U:{regular:"#CA7DE3",hover:"#0097A8"},S:{regular:"#9966CC",hover:"#0097A8"},C:{regular:"#BF00FF",hover:"#0097A8"},N:{regular:"#800080",hover:"#0097A8"},T:{regular:"#FF00FF",hover:"#0097A8"},L:{regular:"#7FFF00",hover:"#0097A8"},I:{regular:"#4CBB17",hover:"#0097A8"},F:{regular:"#008A00",hover:"#0097A8"},A:{regular:"#008080",hover:"#0097A8"},P:{regular:"#D2D900",hover:"#0097A8"},G:{regular:"#BDB76B",hover:"#0097A8"},M:{regular:"#FFF600",hover:"#0097A8"},V:{regular:"#FFD700",hover:"#0097A8"}},Xa={color:{background:{canvas:"#F5F5F5",primary:"#FFFFFF",secondary:"#F8FEFF",overlay:"rgba(94,94,94,.8)"},border:{primary:"#CAD3DD",secondary:"#7C7C7F"},text:{primary:"#333333",secondary:"#167782",light:"#585858",dark:"#000000",error:"#FF4A4A",lightgrey:"#7C7C7F"},tab:{regular:"#FFFFFF",active:"#E1E5EA",hover:"#00838F",content:"#EFF2F5"},scroll:{regular:"#717171",inactive:"#DDDDDD"},button:{primary:{active:"#167782",hover:"#00838F",clicked:"#4FB3BF",disabled:"rgba(113, 113, 113, 0.4)"},secondary:{active:"#585858",hover:"#333333",clicked:"#AEAEAE",disabled:"rgba(113, 113, 113, 0.4)"},group:{active:"#167782",hover:"#2E858F"},transparent:{active:"transparent"},text:{primary:"#FFFFFF",secondary:"#005662",disabled:"#7A7A7A"}},dropdown:{primary:"#333333",secondary:"#FFFFFF",hover:"#DDDDDD",disabled:"#7A7A7A"},tooltip:{background:"#FFFFFF",text:"#333333"},link:{active:"#00838F",hover:"#005662"},divider:"#AEAEAE",spinner:"#005662",error:"#FF4A4A",input:{text:{default:"#585858",active:"#333333",disabled:"#585858",error:"#FF4A4A"},background:{primary:"#FFFFFF",default:"#EFF2F5",hover:"#DDDDDD",disabled:"#eff2f5"},border:{regular:"#cad3dd",active:"#FFFFFF",hover:"#43b5c0",focus:"#EFF2F5",error:"#FF4A4A"}},icon:{grey:"#B4B9D6",hover:"#005662",active:"#525252",activeMenu:"#005662",clicked:"#FFFFFF",disabled:"rgba(82, 82, 82, 0.4)"},monomer:{default:"#C8C8C8"},editMode:{sequenceInRNABuilder:"#99d7dc"}},font:{size:{small:"10px",regular:"12px",medium:"14px",xsmall:"6px"},family:{montserrat:"Montserrat, sans-serif",inter:`Inter, FreeSans, Arimo, 'Droid Sans', Helvetica, 'Helvetica Neue',
Arial, sans-serif`,roboto:"Roboto, FreeSans, Arimo, Droid Sans, Helvetica, Helvetica Neue, Arial, sans-serif"},weight:{light:300,regular:400,bold:600}},monomer:{color:{A:le.colorA,C:le.colorCM,M:le.colorCM,D:le.colorDQ,Q:le.colorDQ,E:le.colorEN,N:le.colorEN,F:le.colorFY,Y:le.colorFY,G:le.colorGX,X:le.colorX,H:le.colorH,I:le.colorILV,L:le.colorILV,V:le.colorILV,K:le.colorKR,R:le.colorKR,P:le.colorP,S:le.colorST,T:le.colorST,W:le.colorW,U:le.colorU,CHEM:le.chem,default:le.default}},peptide:{color:{D:de.D,E:de.E,K:de.K,H:de.H,O:de.O,R:de.R,Q:de.Q,Y:de.Y,U:de.U,S:de.S,C:de.C,N:de.N,T:de.T,L:de.L,I:de.I,F:de.F,A:de.A,P:de.P,G:de.G,M:de.M,V:de.V}},border:{regular:"1px solid #CAD3DD",small:"1px solid #E1E5EA",radius:{regular:"4px"}},shadow:{regular:"0px 1px 1px rgba(197, 203, 207, 0.7)",mainLayoutBlocks:"0px 2px 5px rgba(103, 104, 132, 0.15)"},outline:{small:"1px solid #B4B9D6",medium:"2px solid #B4B9D6",color:"#B4B9D6",selected:{color:"#167782",small:"1px solid #167782",medium:"2px solid #167782"},grey:{small:"1px solid #585858"}},transition:{regular:"all .3s"},zIndex:{base:0,toolbar:10,sticky:100,overlay:200,modal:1e3,critical:9999}},xy={},wy=function(e){return $s({all:"unset",".Ketcher-polymer-editor-root":{all:"unset",fontSize:e.ketcher.font.size.medium,fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) div":{boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) input":{fontFamily:e.ketcher.font.family.inter,fontWeight:e.ketcher.font.weight.regular,fontSize:e.ketcher.font.size.regular,boxSizing:"border-box"},":where(.Ketcher-polymer-editor-root) h1":{fontSize:96},":where(.Ketcher-polymer-editor-root) h2":{fontSize:60},":where(.Ketcher-polymer-editor-root) h3":{fontSize:48},":where(.Ketcher-polymer-editor-root) h4":{fontSize:34},":where(.Ketcher-polymer-editor-root) h5":{fontSize:24},":where(.Ketcher-polymer-editor-root) h6":{fontSize:20,fontWeight:e.ketcher.font.weight.bold},":where(.Ketcher-polymer-editor-root) p":{fontSize:e.ketcher.font.size.regular},":where(.Ketcher-polymer-editor-root) button":{textTransform:"uppercase",fontWeight:e.ketcher.font.weight.bold}},"","")},My="254px",Cy="100px",Sy=C("div",{target:"e1vkl5kv5"})("width:",My,";height:calc(100% - 16px);display:flex;flex-direction:column;background-color:",function(t){var e=t.theme;return e.ketcher.color.background.primary},";box-shadow:",function(t){var e=t.theme;return e.ketcher.shadow.mainLayoutBlocks},";border-radius:4px;z-index:",function(t){var e=t.theme;return e.ketcher.zIndex.toolbar},";"),Ay=C("div",{target:"e1vkl5kv4"})({name:"n1y6qf",styles:"padding:10px 0 10px 8px;position:relative;display:flex;align-items:center;gap:8px"}),ky=C("div",{target:"e1vkl5kv3"})("height:24px;display:flex;flex-grow:1;gap:4px;align-items:center;padding:4px;background-color:",function(t){var e=t.theme;return e.ketcher.color.input.background.default},";border-radius:4px;&:hover,&:has(input:focus){outline:",function(t){var e=t.theme;return e.ketcher.outline.selected.small},";}"),Iy=C("button",{target:"e1vkl5kv2"})("height:24px;display:flex;align-items:center;gap:2px;border:none;border-radius:4px 0 0 4px;cursor:pointer;background-color:#e2e5e9;text-transform:none;font-weight:",function(t){var e=t.theme;return e.ketcher.font.weight.regular},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.secondary},";"),Py=C(ie,{target:"e1vkl5kv1"})("height:16px;width:16px;color:",function(t){var e=t.theme;return e.ketcher.color.text.secondary},";"),Ey=C(Is,{target:"e1vkl5kv0"})({name:"pmmg8c",styles:"flex-grow:1;padding:0;margin:0;background-color:transparent;border:none;outline:none;&:hover{outline:none;}&:focus{outline:none;}"}),Oy=["children"];function Za(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Qa(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Za(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Za(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ja=C("div",{target:"e1pv9pa12"})(function(t){var e=t.fullWidth,r=t.withPaddingRight;return{width:e?"100%":"fit-content",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingRight:r?"12px":0,overflow:e?"hidden":"initial"}},""),Ny=C("div",{target:"e1pv9pa11"})(function(t){var e=t.theme;return{height:"100%",width:"100%",position:"relative",padding:"12px",paddingBottom:0,backgroundColor:e.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",containerType:"size",overflow:"clip"}},""),Dy=C("div",{target:"e1pv9pa10"})(function(t){var e=t.theme;return{height:"100%",width:"100%",position:"relative",paddingBottom:0,backgroundColor:e.ketcher.color.background.canvas,display:"flex",justifyContent:"space-between",columnGap:"3px"}},""),ou=C("div",{target:"e1pv9pa9"})(function(t){var e=t.hide,r=e===void 0?!1:e;return{height:"100%",width:"fit-content",display:r?"none":"flex",flexDirection:"column"}},""),iu=C(ou,{target:"e1pv9pa8"})(""),au=C(ou,{target:"e1pv9pa7"})(""),Ly=C("div",{target:"e1pv9pa6"})({name:"oixulj",styles:"display:flex;justify-content:space-between;width:100cqw"}),_y=C("div",{target:"e1pv9pa5"})(function(t){var e=t.shortened,r=e===void 0?!1:e,n=t.theme;return{height:"36px",width:r?"100%":"calc(100% - ".concat(Cy,")"),marginBottom:"6px",display:"flex",alignItems:"center",backgroundColor:"#FFFFFF",boxShadow:n.ketcher.shadow.mainLayoutBlocks,borderRadius:"4px",overflowX:"hidden"}},""),Ty=C("div",{target:"e1pv9pa4"})("width:42px;height:36px;display:flex;position:relative;right:0;cursor:pointer;background:white;box-shadow:",function(t){var e=t.theme;return e.ketcher.shadow.mainLayoutBlocks},";border-radius:4px;"),lu=C("div",{target:"e1pv9pa3"})({name:"1gavlve",styles:"&:not(:empty){margin-bottom:15px;}"}),su=C("div",{target:"e1pv9pa2"})({name:"nc15h",styles:"height:100%;width:100%;position:relative;overflow:hidden"}),cu=C("div",{target:"e1pv9pa1"})({name:"0",styles:""}),Ry=C("div",{target:"e1pv9pa0"})({name:"1k18kha",styles:"height:40px"}),uu=function(e){var r=Ki({threshold:1}),n=_(r,2),o=n[0],a=n[1],i=Ki({threshold:1}),l=_(i,2),s=l[0],c=l[1],d=e.children,h=Tr(e,Oy),f=x.useRef(null),v=300,p=function(b){f.current&&(f.current.scrollLeft+=v*b/1e3)},g=function(b){f.current&&(f.current.scrollLeft-=v*b/1e3)};return I("div",{style:{display:"flex",position:"relative"},children:[I(_y,Qa(Qa({},h),{},{ref:f,children:[u("span",{ref:o}),u(Ly,{children:u(X,{children:d})}),u("span",{ref:s})]})),!a||!c?u(Ty,{children:u(Bd,{startInView:a,endInView:c,scrollBack:g,scrollForward:p,isLeftRight:!0})}):null]})},ke=function(e){var r=e.children,n={Left:null,Main:null,Right:null,Top:null,Bottom:null,InsideRoot:null};return bt.Children.forEach(r,function(o){o.type===iu?n.Left=o:o.type===au?n.Right=o:o.type===uu?n.Top=o:o.type===lu?n.Bottom=o:o.type===su?n.Main=o:o.type===cu&&(n.InsideRoot=o)}),I(Ny,{children:[I(Ja,{fullWidth:!0,withPaddingRight:!0,children:[n.Top,I(Dy,{children:[n.Left,u(Ry,{}),n.Main]}),n.Bottom]}),u(Ja,{children:n.Right}),n.InsideRoot]})};ke.Left=iu;ke.Top=uu;ke.Bottom=lu;ke.Right=au;ke.Main=su;ke.InsideRoot=cu;var el={tabPanelDiv:"TabPanel-module_tabPanelDiv__wMffZ",tabPanelBox:"TabPanel-module_tabPanelBox__LY-BB"},jy=function(e){var r=e.children,n=e.value,o=e.index;return u("div",{className:el.tabPanelDiv,role:"tabpanel",hidden:n!==o,id:o.toString(),children:n===o&&u(qs,{className:el.tabPanelBox,children:u(X,{children:r})})})},By=jy,Fy=C(uh,{shouldForwardProp:function(e){return e!=="isLayoutToRight"},target:"e1rrs7vg3"})("height:32px;min-height:32px;list-style-type:none;margin:0;padding:4px 8px 0 8px;border-bottom:",function(t){var e=t.theme;return"1px solid ".concat(e.ketcher.color.border.primary)},";overflow:unset;& .MuiTabs-scroller,& .MuiTabs-flexContainer{height:100%;overflow:unset!important;}& .MuiTabs-flexContainer{justify-content:",function(t){var e=t.isLayoutToRight;return e?"flex-end":"flex-start"},";padding-right:",function(t){var e=t.isLayoutToRight;return e?"16px":"0"},";}& .MuiTabs-indicator{display:none;}"),zy=C(si,{shouldForwardProp:function(e){return e!=="isLayoutToRight"},target:"e1rrs7vg2"})("min-height:24px;min-width:0;position:relative;padding:7px 12px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";text-transform:none;cursor:pointer;text-align:center;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";list-style-type:none;margin-left:1px;align-items:center;flex:",function(t){var e=t.isLayoutToRight;return e?void 0:"1 1 auto;"},";border:1px solid transparent;border-bottom:none;border-radius:4px 4px 0 0;&:first-of-type{margin-left:0;}&:hover{background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.regular},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";border-color:",function(t){var e=t.theme;return e.ketcher.color.border.primary},";}&.Mui-selected{background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.active},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";border-color:",function(t){var e=t.theme;return e.ketcher.color.border.primary},";margin-bottom:-1px;padding-bottom:8px;&::after{content:'';position:absolute;left:0;bottom:-1px;height:1px;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.active},";}}&[data-tab='Favorites']{font-size:16px;color:#faa500;}"),$y=C(si,{target:"e1rrs7vg1"})({name:"2934o7",styles:"width:0;height:0;min-width:0;min-height:0;padding:0;margin:0;visibility:hidden"}),qy=C("div",{target:"e1rrs7vg0"})({name:"2r6rpv",styles:"display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;width:100%;height:100%"});function tl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function rl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?tl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Hy=function(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}},Vy=function(e){var r=e.tabs,n=e.selectedTabIndex,o=e.isLayoutToRight,a=e.onChange,i=r[n],l=i?.component,s=i?.props;return I(X,{children:[I(Fy,{value:n,onChange:a,isLayoutToRight:o,children:[r.map(function(c,d){return u(zy,rl({label:c.caption,title:c.tooltip,isLayoutToRight:o,"data-testid":c.testId,"data-tab":c.tooltip},Hy(d)),d)}),u($y,{value:-1})]}),i&&u(By,{value:n,index:n,children:u(qy,{children:u(l,rl({},s))})})]})},du=x.memo(Vy),mt=function(){};function nl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?nl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ol=function(e,r,n){var o=new Map(e.map(function(a){var i=Me(a)?Cs(a.id):Ss(a.props.id||ze(a));return[i,a]}));return r.filter(function(a){return a.templates.every(function(i){return!!o.get(i.$ref)})}).map(function(a){var i=new Map(a.templates.map(function(h){var f=o.get(h.$ref),v=mr(f),p=_(v,3),g=p[2];return[g,f]})),l=i.get(tt.Sugar),s=i.get(tt.Base),c=i.get(tt.Phosphate),d={base:s?ut(ut({},s),{},{label:s.label}):void 0,name:a.name,phosphate:c?ut(ut({},c),{},{label:c.label}):void 0,sugar:l?ut(ut({},l),{},{label:l.label}):void 0,favorite:a.favorite,default:n||a.default};return a.idtAliases?ut(ut({},d),{},{idtAliases:a.idtAliases}):d})},to=function(e){return Object.entries(e).filter(function(r){var n=_(r,2);n[0];var o=n[1];return!!o}).map(function(r){var n=_(r,1),o=n[0];return o})},Te=function(e){return e&&e.replace(/^\/+|\/+$/g,"")},ne=function(){return ir()},N=Wt;function _t(){var t,e=N(jc),r=N(ae),n=N(m1),o;try{o=xs.getKetcher(e)}catch(f){Gt.error("Failed to get ketcher instance with id ".concat(e),f)}var a=(t=o)===null||t===void 0||(t=t.editor)===null||t===void 0?void 0:t.struct().isBlank(),i=a?$d:qd,l=x.useState(n||i),s=_(l,2),c=s[0],d=s[1],h=x.useCallback(function(f){d(f)},[d]);return x.useEffect(function(){return r?.events.layoutModeChange.add(h),function(){r?.events.layoutModeChange.remove(h)}},[h,r?.events.layoutModeChange]),c}function Uy(){var t=N(ae),e=N(Ze),r=x.useState(e),n=_(r,2),o=n[0],a=n[1],i=function(s){a(s)};return x.useEffect(function(){return t?.events.toggleSequenceEditInRNABuilderMode.add(i),function(){t?.events.toggleSequenceEditInRNABuilderMode.remove(i)}},[i,t?.events.toggleSequenceEditInRNABuilderMode]),o}var Wy=bt.createContext({}),_i=Wy,hu=x.createContext({width:0,height:0}),Gy=function(e){var r=e.children,n=e.rootRef,o=e.isMacromoleculesEditorTurnedOn,a=x.useState({width:0,height:0}),i=_(a,2),l=i[0],s=i[1],c=x.useCallback(function(){if(n!=null&&n.current){var h=n.current.getBoundingClientRect(),f=h.width,v=h.height;s({width:f,height:v})}},[n]),d=x.useCallback(ye.debounce(c,100),[c]);return x.useEffect(function(){c()},[o]),x.useEffect(function(){return d(),window.addEventListener("resize",d),function(){window.removeEventListener("resize",d)}},[d]),u(hu.Provider,{value:l,children:r})},Ti=function(){var e=x.useContext(hu),r=e.height;return r<720},fu=C("div",{target:"e719szw4"})("background:white;height:48px;text-align:center;cursor:",function(t){var e=t.disabled;return e?"default":"pointer"},";opacity:",function(t){var e=t.disabled;return e?"0.4":"1"},";display:flex;justify-content:space-between;align-items:center;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";position:relative;overflow:hidden;border-radius:4px;box-shadow:0 2px 5px 0 rgba(103, 104, 132, 0.149);margin:0;user-select:none;border-color:#167782;border-width:",function(t){var e=t.selected;return e?"2px 2px 2px":"0px"},";border-style:solid;box-sizing:border-box;z-index:",function(t){var e=t.selected;return e?2:void 0},";.hidden & .star{visibility:hidden!important;}&:hover{outline:1px solid #b4b9d6;>.star,.autochain{visibility:visible;opacity:1;}}&::after{content:'';display:block;position:absolute;top:0;left:0;width:100%;height:8px;border-bottom:",function(t){var e=t.isVariantMonomer;return e?"1px solid #CAD3DD":"none"},";background:",function(t){var e,r,n,o,a,i=t.code,l=t.theme,s=t.item;if(!s)return(e=l.ketcher.monomer.color.default)===null||e===void 0?void 0:e.regular;var c=s,d=((r=c.props)===null||r===void 0?void 0:r.MonomerType)==="PEPTIDE";if(d&&(n=l.ketcher.peptide.color[i])!==null&&n!==void 0&&n.regular){var h;return(h=l.ketcher.peptide.color[i])===null||h===void 0?void 0:h.regular}var f=((o=l.ketcher.monomer.color[i])===null||o===void 0?void 0:o.regular)||((a=l.ketcher.monomer.color.default)===null||a===void 0?void 0:a.regular);return f},";},>span{position:absolute;bottom:",function(t){var e=t.selected;return e?"4px":"6px"},";left:",function(t){var e=t.selected;return e?"4px":"6px"},";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:85%;}>.star{color:#cad3dd;position:absolute;left:calc(50% - 7px);top:11px;font-size:13px;line-height:13px;opacity:0;transition:0.2s ease;flex-shrink:0;&.visible{visibility:visible;opacity:1;}&:active{transform:scale(1.4);}&:hover,&.visible{color:#faa500;}}"),Ky=C("div",{target:"e719szw3"})("display:flex;justify-content:center;align-items:center;height:15px;width:",function(t){var e=t.monomersAmount;return e>=10?"20px":"15px"},";border-radius:",function(t){var e=t.monomersAmount;return e>=10?"20px":"50%"},";border:1px solid #cceaee;position:absolute;bottom:",function(t){var e=t.selected;return e?"4px":"6px"},";left:",function(t){var e=t.selected;return e?"18px":"20px"},";font-size:12px;line-height:12px;"),Yy=C("span",{target:"e719szw2"})({name:"rnnx2x",styles:"font-size:12px"}),pu=C(ie,{target:"e719szw1"})("color:#cad3dd;stroke-width:0;opacity:0;transition:0.2s ease;flex-shrink:0;width:13px;&:active{transform:scale(1.2);}&:hover{color:",function(t){var e=t.disabled;return e?"#cad3dd":"#333333"},";}"),vu=C("div",{target:"e719szw0"})({name:"evdt6m",styles:"position:absolute;top:12px;left:4px"}),Xy=function(e,r){var n,o,a,i=N(Ze),l=Wt(oy),s=x.useState(!1),c=_(s,2),d=c[0],h=c[1];return x.useEffect(function(){if(!i)return h(!1);if(r===yt.BASES){var f;h(!(e!=null&&(f=e.props)!==null&&f!==void 0&&(f=f.MonomerCaps)!==null&&f!==void 0&&f.R1))}else if(r===yt.PHOSPHATES){var v,p;h(!(e!=null&&(v=e.props)!==null&&v!==void 0&&(v=v.MonomerCaps)!==null&&v!==void 0&&v.R1&&e!==null&&e!==void 0&&(p=e.props)!==null&&p!==void 0&&(p=p.MonomerCaps)!==null&&p!==void 0&&p.R2))}else if(r===yt.SUGARS)if(l){var g,y;h(!(e!=null&&(g=e.props)!==null&&g!==void 0&&(g=g.MonomerCaps)!==null&&g!==void 0&&g.R3&&e!==null&&e!==void 0&&(y=e.props)!==null&&y!==void 0&&(y=y.MonomerCaps)!==null&&y!==void 0&&y.R2))}else{var b,M,A;h(!(e!=null&&(b=e.props)!==null&&b!==void 0&&(b=b.MonomerCaps)!==null&&b!==void 0&&b.R3&&e!==null&&e!==void 0&&(M=e.props)!==null&&M!==void 0&&(M=M.MonomerCaps)!==null&&M!==void 0&&M.R2&&e!==null&&e!==void 0&&(A=e.props)!==null&&A!==void 0&&(A=A.MonomerCaps)!==null&&A!==void 0&&A.R1))}},[r,i,l,e==null||(n=e.props)===null||n===void 0||(n=n.MonomerCaps)===null||n===void 0?void 0:n.R1,e==null||(o=e.props)===null||o===void 0||(o=o.MonomerCaps)===null||o===void 0?void 0:o.R2,e==null||(a=e.props)===null||a===void 0||(a=a.MonomerCaps)===null||a===void 0?void 0:a.R3,h]),d},Zy=Xy,mu=function(e,r){var n=Wt(ae);x.useEffect(function(){if(!(!n||!r.current)){var o=Fe(r.current),a=vc().on("start",function(){n.isLibraryItemDragCancelled=n.mode.modeName==="sequence-layout-mode"}).on("drag",function(i){var l,s;if(!n.isLibraryItemDragCancelled){var c=i.sourceEvent,d=c.clientX,h=c.clientY;n.events.setLibraryItemDragState.dispatch({item:e,position:{x:d-(((l=n.ketcherRootElementBoundingClientRect)===null||l===void 0?void 0:l.left)||0),y:h-(((s=n.ketcherRootElementBoundingClientRect)===null||s===void 0?void 0:s.top)||0)}})}}).on("end",function(i){if(!n.isLibraryItemDragCancelled){var l,s=i.sourceEvent,c=s.clientX,d=s.clientY,h=(l=ce.instance.canvasWrapper.node())===null||l===void 0?void 0:l.getBoundingClientRect();if(h){var f=h.top,v=h.left,p=h.right,g=h.bottom,y=ce.instance.zoomTransform,b=c-v+y.k*15,M=d-f+y.k*15,A=y.invert([b,M]),m=_(A,2),w=m[0],S=m[1],k=c>=v&&c<=p&&d>=f&&d<=g;k&&n.events.placeLibraryItemOnCanvas.dispatch(e,{x:w,y:S})}}n.events.setLibraryItemDragState.dispatch(null),n.isLibraryItemDragCancelled=!1});return o.call(a),function(){o.on(".drag",null)}}},[n,e,r])},gu=function(e,r,n){n("");var o=e.getDataForAutochain(),a=o.selectedMonomersWithFreeR2,i=o.selectedMonomers;if(i.length>0&&a.length!==1){n("Select a monomer or a chain that has one R2 available.");return}a.length===1&&!Ch(r)&&n("This monomer cannot be added to a chain using this button, as it lacks R1.")};function il(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function al(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?il(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):il(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Ri="autochain",Qy=function(e){var r=e.item,n=e.groupName,o=e.onMouseLeave,a=e.onMouseMove,i=e.isSelected,l=e.disabled,s=e.onClick,c=s===void 0?mt:s,d=ne(),h=N(ae),f=N(Bc),v=x.useState(""),p=_(v,2),g=p[0],y=p[1],b=x.useRef(null),M=Zy(r,n)||l,A=Me(r)?"":r.props.MonomerType===gr.CHEM?r.props.MonomerType:r.props.MonomerNaturalAnalogCode,m=ze(r),w=Me(r)?void 0:r,S=x.useCallback(function(P){P.stopPropagation(),d(N1(r))},[d,r]),k=x.useCallback(function(P){P.stopPropagation(),!g&&h?.events.autochain.dispatch(r)},[h,g,r]),E=x.useCallback(function(){return h&&gu(h,r,y)},[h,r]),O=x.useCallback(function(){g||h?.events.previewAutochain.dispatch(r)},[g,h,r]),D=x.useCallback(function(){h?.events.removeAutochainPreview.dispatch(r)},[h,r]);return mu(r,b),I(fu,al(al({selected:i,disabled:M,"data-testid":m,"data-monomer-item-id":m,item:w,isVariantMonomer:r.isAmbiguous,code:A,onMouseOver:E,onMouseLeave:o,onMouseMove:a,onDoubleClick:function(T){k(T),D()}},M?{}:{onClick:c}),{},{ref:b,children:[u(Yy,{children:r.label}),!M&&I(X,{children:[!f&&u(ci,{title:g,children:u(vu,{children:u(pu,{className:Ri,name:"monomer-autochain",disabled:!!g,onMouseOver:O,onMouseOut:D,onClick:k,onDoubleClick:function(T){return T.stopPropagation()}})})}),u("div",{onClick:S,className:"star ".concat(r.favorite?"visible":""),children:Ii})]}),Me(r)&&u(Ky,{selected:i,monomersAmount:r.monomers.length,children:r.monomers.length})]}))},yu=C("div",{target:"e10tnh3n3"})({name:"37420",styles:"display:grid;grid-template-columns:repeat(3, 1fr);grid-template-rows:auto;flex:1;gap:4px;&::after{content:'';flex:auto;}"}),bu=C("div",{target:"e10tnh3n2"})("position:relative;display:flex;flex-direction:row;flex-wrap:wrap;justify-content:flex-start;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";font-family:",function(t){var e=t.theme;return e.ketcher.font.family.roboto},";color:",function(t){var e=t.theme;return e.ketcher.color.divider},";margin:0;gap:4px;"),Jy=C(bu,{target:"e10tnh3n1"})({name:"qdeacm",styles:"flex-direction:column"}),e2=C("div",{target:"e10tnh3n0"})("height:100%;display:flex;flex-grow:0;flex-basis:14px;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";font-family:",function(t){var e=t.theme;return e.ketcher.font.family.roboto},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";margin:0;"),t2=[Ri],xu=function(e){return t2.some(function(r){return e.classList.contains(r)||e.closest(".".concat(r))})},nr=function(e){var r=e.items,n=e.title,o=e.groupName,a=e.selectedMonomerUniqueKey,i=e.libraryName,l=e.disabled,s=e.onItemClick,c=s===void 0?mt:s,d=ne(),h=N(ae),f=N(ry),v=function(w){var S=!1;if(Me(w))return!1;if(l)S=l;else{var k,E,O=f["".concat((k=w.props)===null||k===void 0?void 0:k.MonomerClass,"s")];if(O?.length>0&&(E=w.props)!==null&&E!==void 0&&E.MonomerCaps)for(var D=0;D<O.length;D++)O[D]in w.props.MonomerCaps||(S=!0)}return S},p=x.useCallback(function(m){return d(er(m))},[d]),g=x.useCallback(ye.debounce(function(m){return p(m)},500),[p]),y=function(){g.cancel(),d(er(void 0))},b=function(w,S){if(y(),!xu(S.target)){var k=S.currentTarget.getBoundingClientRect(),E,O,D;if(Me(w)){D=w?js(w)(k):"";var P="".concat(k.left+k.width/2,"px");O=me.AmbiguousMonomer,E={left:P,top:D,transform:"translate(-50%, 0)"}}else D=w?mh(k):"",E={right:"-88px",top:D,transform:"translate(-50%, 0)"},O=me.Monomer;var T={type:O,monomer:w,style:E};g(T)}},M=function(w){["FAVORITES","PEPTIDE","CHEM"].includes(i??"")&&h?.events.selectMonomer.dispatch(w),c(w)},A=function(w){return a===ze(w)};return I(Jy,{children:[n&&u(e2,{children:n}),u(yu,{children:r.map(function(m){return u(Qy,{disabled:v(m),item:m,groupName:o,isSelected:A(m),onMouseLeave:y,onMouseMove:function(S){return b(m,S)},onClick:function(){return M(m)}},ze(m))})})]})},r2=C("div",{target:"e1bp6il60"})({name:"8z91a1",styles:"width:100%;display:flex;flex-direction:column;justify-items:center;gap:8px;padding:8px"}),n2=C(fu,{target:"e1txcvj90"})("&::after{content:'';background:",function(t){var e=t.theme,r=t.selected;return r?e.ketcher.color.button.primary.active:"#faa500"},";}.dots{visibility:hidden;position:absolute;right:2px;top:10px;}&:hover .dots{visibility:visible;}>.star{right:0;left:calc(50% - 7px);top:11px;width:min-content;}"),o2=C("div",{target:"e1h0dkll2"})(function(t){return{minHeight:"32px",display:"flex",alignItems:"center",padding:"8px 12px",gap:"8px",borderBottom:t.theme.ketcher.border.small}},""),i2=C("span",{target:"e1h0dkll1"})(function(t){return{flexGrow:1,fontSize:t.theme.ketcher.font.size.regular}},""),$o=C(ie,{target:"e1h0dkll0"})(function(t){return{width:"16px",height:"16px",color:t.theme.ketcher.color.icon.grey,transition:t.theme.ketcher.transition.regular,transform:t.expanded?"rotate(180deg)":"none"}},""),a2=function(e){var r=e.preset,n=e.isSelected,o=e.onClick,a=o===void 0?mt:o,i=e.onContextMenu,l=i===void 0?mt:i,s=e.onMouseLeave,c=s===void 0?mt:s,d=e.onMouseMove,h=d===void 0?mt:d,f=ne(),v=N(ae),p=N(Bc),g=x.useState(""),y=_(g,2),b=y[0],M=y[1],A=x.useRef(null),m=x.useCallback(function(O){O.stopPropagation(),f(vy(r))},[f,r]),w=x.useCallback(function(O){O.stopPropagation(),!b&&v?.events.autochain.dispatch(r)},[b,v,r]),S=x.useCallback(function(){return v&&gu(v,r,M)},[v,r]),k=x.useCallback(function(){b||v?.events.previewAutochain.dispatch(r)},[b,v,r]),E=x.useCallback(function(){v?.events.removeAutochainPreview.dispatch(r)},[v,r]);return mu(r,A),I(n2,{"data-testid":P1(r),onClick:a,onContextMenu:l,onMouseOver:S,onMouseLeave:c,onMouseMove:h,onDoubleClick:function(D){w(D),E()},selected:n,code:r.name,"data-rna-preset-item-name":r.name,ref:A,children:[!p&&u(ci,{title:b,children:u(vu,{children:u(pu,{className:Ri,name:"monomer-autochain",disabled:!!b,onMouseOver:k,onMouseOut:E,onClick:w,onDoubleClick:function(D){return D.stopPropagation()}})})}),u("span",{children:r.name}),u($o,{name:"vertical-dots",className:"dots",onClick:l}),u("div",{"aria-hidden":!0,onClick:m,className:"star ".concat(r.favorite?"visible":""),children:Ii})]})},l2=x.memo(a2),xt;(function(t){t.FOR_RNA="context-menu-for-RNA",t.FOR_SEQUENCE="context-menu-for-sequence",t.FOR_POLYMER_BOND="context-menu-for-polymer-bond",t.FOR_SELECTED_MONOMERS="context-menu-for-selected-monomers"})(xt||(xt={}));var s2=C(ah,{target:"ekj16lc0"})("--contexify-activeItem-bgColor:rgba(243, 245, 247, 1);--contexify-menu-minWidth:140px;--contexify-activeItem-color:rgba(51, 51, 51, 1);--contexify-menu-padding:4px;--contexify-itemContent-padding:6px 8px;--contexify-separator-margin:4px 0;--contexify-separator-color:#e1e5ea;.contexify_itemContent{font-family:",function(t){var e=t.theme;return e.ketcher.font.family.inter},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";height:28px;}.contexify_item-title{opacity:1;font-weight:bold;background:#e1e5ea;margin:-4px 0 4px -4px;width:calc(100% + 8px);border-radius:4px 4px 0 0;}.context_menu-icon{width:16px;height:16px;display:flex;align-items:center;margin-right:4px;}.context_menu-text{display:flex;align-items:center;line-height:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";}.context_menu-delete-text{display:flex;align-items:center;line-height:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";margin-left:-3px;}"),c2=function t(e,r){var n=500,o=!1,a=[];return e.forEach(function(i,l){var s=i.name,c=i.title,d=i.icon,h=i.hidden,f=i.disabled,v=i.isMenuTitle,p=i.separator,g=i.subMenuItems,y=i.onMouseOver,b=i.onMouseOut,M=g&&g.length?u(nh,{label:c,"data-testid":s,children:t(g,r)},s):I(oh,{id:s,onClick:function(m){o=!0,setTimeout(function(){o=!1},n),r(m)},"data-testid":s,hidden:h,disabled:f,className:v?"contexify_item-title":"",onMouseOver:function(){o||y?.(s)},onMouseOut:function(){return b?.(s)},children:[d&&u("span",{className:"context_menu-icon",children:u(X,{children:d})}),u("span",{className:s==="delete"?"context_menu-delete-text":"context_menu-text",children:c})]},s);a.push(M),p&&a.push(u(ih,{},l))}),a},ji=function(e){var r=e.id,n=e.handleMenuChange,o=e.menuItems,a=ne();return x.useEffect(function(){var i=function(s){var c,d,h=((c=s.target)===null||c===void 0||(c=c.__data__)===null||c===void 0?void 0:c.node)||((d=s.target)===null||d===void 0||(d=d.__data__)===null||d===void 0?void 0:d.monomer);if(h){s.stopPropagation();return}a(jo(!1))};return document.addEventListener("click",i),document.addEventListener("contextmenu",i),function(){document.removeEventListener("click",i),document.removeEventListener("contextmenu",i)}},[a,r]),u(s2,{id:r,children:c2(o,n)})},u2=function(){var e=kr.RNA,r=ne(),n=N(Jc),o=N(Wc),a=N(Ze),i=[{name:"duplicateandedit",title:"Duplicate and Edit...",disabled:!1},{name:"edit",title:"Edit...",separator:!0,disabled:n?.default},{name:"deletepreset",title:"Delete Preset",disabled:n?.default}],l=function(d){var h=d.id,f=d.props;switch(h){case"duplicateandedit":f.duplicatePreset(n),o!==e&&r(Ir(e));break;case"edit":f.editPreset(n),o!==e&&r(Ir(e));break;case"deletepreset":r(Vt("delete"));break}},s=document.querySelector(it);return s&&!a?An.createPortal(u(ji,{id:xt.FOR_RNA,menuItems:i,handleMenuChange:l}),s):null},Bi=function(e){var r=e.presets,n=e.duplicatePreset,o=e.editPreset,a=N(Rn),i=N(ae),l=vo({id:xt.FOR_RNA}),s=l.show,c=ir(),d=function(m){var w,S,k,E=!0,O=!0,D=!0;if(m!=null&&(w=m.base)!==null&&w!==void 0&&(w=w.props)!==null&&w!==void 0&&w.MonomerCaps&&(E="R1"in m.base.props.MonomerCaps),m!=null&&(S=m.sugar)!==null&&S!==void 0&&(S=S.props)!==null&&S!==void 0&&S.MonomerCaps){var P;E&&m!==null&&m!==void 0&&(P=m.base)!==null&&P!==void 0&&(P=P.props)!==null&&P!==void 0&&P.MonomerCaps&&(O="R3"in m.sugar.props.MonomerCaps)}if(m!=null&&(k=m.phosphate)!==null&&k!==void 0&&(k=k.props)!==null&&k!==void 0&&k.MonomerCaps){var T;D="R1"in m.phosphate.props.MonomerCaps,O&&m!==null&&m!==void 0&&(T=m.sugar)!==null&&T!==void 0&&(T=T.props)!==null&&T!==void 0&&T.MonomerCaps&&(O="R2"in m.sugar.props.MonomerCaps)}return E&&O&&D},h=function(m){return function(){var w=d(m);if(!w&&m.name){c(nu(m.name));return}c(Or(m)),i?.events.selectPreset.dispatch(m),m.name!==a.name&&c(st(!1))}},f=function(m){var w,S=m instanceof HTMLDivElement;!S&&m.parentElement&&(m=m.parentElement);var k=m.getBoundingClientRect(),E=(w=m.offsetParent)===null||w===void 0?void 0:w.getBoundingClientRect(),O=140,D=k.right-O,P=k.y+k.height/2;return E!=null&&E.x&&E?.x>D&&(D=k.x),{x:D,y:P}},v=N(Br),p=x.useCallback(function(A){return c(er(A))},[c]),g=x.useCallback(ye.debounce(function(A){return p(A)},500),[p]),y=function(){g.cancel(),c(er(void 0))},b=function(m,w){if(y(),!xu(w.target)&&!(v.type===me.Preset||!w.currentTarget)){var S=[m.sugar,m.base,m.phosphate],k=w.currentTarget.getBoundingClientRect(),E={left:"".concat(k.left+k.width,"px"),top:Me(m.base)?js(m.base)(k):gh(k),transform:"translate(-100%, 0)"},O=Me(m.base)?{type:me.AmbiguousMonomer,monomer:m.base,presetMonomers:S,style:E}:{type:me.Preset,monomers:S,name:m.name,idtAliases:m.idtAliases,position:Ve.Library,style:E};g(O)}},M=function(m){return function(w){w.stopPropagation(),c(py(m)),s({event:w,props:{duplicatePreset:n,editPreset:o},position:f(w.currentTarget)})}};return I(bu,{"data-testid":"rna-preset-group",children:[u(yu,{children:r.map(function(A,m){return u(l2,{isSelected:a?.name===A.name,preset:A,onClick:h(A),onContextMenu:M(A),onMouseMove:function(S){return b(A,S)},onMouseLeave:y},"".concat(A.name).concat(m))})}),u(u2,{})]})},ro=function(e){var r=e.onItemClick,n=e.libraryName,o=e.duplicatePreset,a=e.editPreset,i=N(Tn),l=N(Bn),s=N(_n),c=n===Hc,d=c?{monomers:_1(i),presets:sy(l)}:Uc(i,n),h=Fo(c?d.monomers:d),f=c?T1(i):Pr(i,Z.PEPTIDES),v=x.useState(""),p=_(v,2),g=p[0],y=p[1];return x.useEffect(function(){s!=="monomer"&&y("")},[s]),I(r2,{children:[c&&h.length>0&&u("div",{children:"Monomers"}),h.map(function(b,M,A){var m=b.groupItems,w=b.groupTitle;return u(nr,{title:A.length===1?void 0:w,items:m,libraryName:n,onItemClick:r,selectedMonomerUniqueKey:g},w)}),c&&d.presets.length>0&&I(X,{children:[u("div",{children:"Presets"}),u(Bi,{duplicatePreset:o,editPreset:a,presets:d.presets})]}),u(X,{children:(n===C1||c)&&f.map(function(b){return u(nr,{title:b.groupTitle,items:b.groupItems,libraryName:n,onItemClick:r,selectedMonomerUniqueKey:g},b.groupTitle)})})]})},d2=C("div",{target:"e1fsx6x2"})({name:"kxxltl",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:8px;background-color:#f7f9fa;border-radius:0 0 4px 4px"}),h2=C("span",{target:"e1fsx6x1"})("font-size:",function(t){return t.theme.ketcher.font.size.medium},";overflow:hidden;text-overflow:ellipsis;color:",function(t){return t.theme.ketcher.color.text.primary},";"),f2=C("div",{target:"e1fsx6x0"})({name:"1x17g94",styles:"display:flex;align-items:center;width:100%"}),p2=function(e){var r=e.name,n=e.fullName;return!r&&!n?null:u(d2,{children:u(f2,{children:u(h2,{children:r||n})})})},v2=x.memo(p2),m2=C("div",{target:"e1ie5fzr8"})(function(t){return{height:"40px",position:"relative",marginLeft:t.isEditMode?"30px":"28.5px",display:"flex",alignItems:"center",border:t.isEditMode?"none":"1.5px solid ".concat(t.theme.ketcher.outline.color),backgroundColor:t.selected?t.theme.ketcher.color.button.primary.active:t.isEditMode?t.theme.ketcher.color.background.primary:"transparent",borderRadius:t.theme.ketcher.border.radius.regular,boxShadow:t.isEditMode?t.theme.ketcher.shadow.regular:"none",padding:"5px 10px",color:t.selected?"white":"black",gap:"8px",cursor:"pointer",outlineOffset:"1px",boxSizing:"border-box",":hover":{outline:t.theme.ketcher.outline.small},":not(:last-child)":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:t.theme.ketcher.outline.medium,borderBottom:t.theme.ketcher.outline.medium,height:"2px",width:"17px"}},":last-child":{":after":{content:'""',position:"absolute",right:"100%",bottom:"calc(50% - 1px)",borderLeft:t.theme.ketcher.outline.medium,borderBottom:t.theme.ketcher.outline.medium,borderRadius:"0 0 0 4px",height:"130px",width:"17px"}}}},""),g2=C("div",{target:"e1ie5fzr7"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),y2=C("span",{target:"e1ie5fzr6"})("font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.background.primary:r.ketcher.color.text.light},";opacity:",function(t){var e=t.selected;return e?.4:1},";"),b2=C("span",{target:"e1ie5fzr5"})("margin-top:1px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";color:",function(t){var e=t.selected,r=t.empty,n=t.theme;return e?n.ketcher.color.button.text.primary:r?"#b4b9d6":n.ketcher.color.text.primary},";opacity:",function(t){var e=t.selected,r=t.empty;return e&&r?.4:1},";"),x2=C("div",{target:"e1ie5fzr4"})({name:"wgokoh",styles:"position:relative;width:16px;height:16px;display:flex;align-items:center;justify-content:center"}),w2=C(ie,{target:"e1ie5fzr3"})("fill:",function(t){var e=t.selected,r=t.empty,n=t.theme;return r?"none":e?n.ketcher.color.background.primary:n.ketcher.color.icon.grey},";color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.background.primary:r.ketcher.color.icon.grey},";"),M2=C("div",{target:"e1ie5fzr2"})("position:relative;width:60px;display:flex;flex-direction:column;gap:8px;padding:4px;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);cursor:pointer;background-color:",function(t){var e=t.selected,r=t.theme;return e?r.ketcher.color.button.primary.active:r.ketcher.color.background.primary},";&:hover{outline:",function(t){var e=t.theme;return e.ketcher.outline.selected.small},";}"),C2=C("div",{target:"e1ie5fzr1"})("position:absolute;top:-35%;left:50%;height:15px;width:2px;background-color:",function(t){var e=t.theme;return e.ketcher.outline.color},";"),S2=C("p",{target:"e1ie5fzr0"})("margin:0;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";font-weight:",function(t){var e=t.theme;return e.ketcher.font.weight.regular},";color:",function(t){var e=t.selected,r=t.empty,n=t.theme;return e?n.ketcher.color.button.text.primary:r?"#b4b9d6":n.ketcher.color.text.primary},";opacity:",function(t){var e=t.selected,r=t.empty;return e&&r?.4:1},";"),wu=V(V(V({},Z.SUGARS,"Sugar"),Z.BASES,"Base"),Z.PHOSPHATES,"Phosphate"),A2=function(e){var r=e.selected,n=e.empty,o=e.name;return u(x2,{children:u(w2,{selected:r,empty:n,name:o})})},Mu=x.memo(A2),k2=function(e){var r=e.groupName,n=e.iconName,o=e.monomerName,a=e.selected,i=e.onClick,l=e.testid,s=N(lr),c=!o;return I(M2,{selected:a,onClick:i,isEditMode:s,"data-testid":l,children:[u(C2,{}),u(Mu,{name:n,selected:a,empty:c}),u(S2,{selected:a,empty:c,children:o||wu[r]})]})},I2=function(e){var r=e.groupName,n=e.iconName,o=e.monomerName,a=e.selected,i=e.onClick,l=e.testid,s=N(lr),c=!o;return I(m2,{selected:a,onClick:i,isEditMode:s,"data-testid":l,children:[u(Mu,{name:n,selected:a,empty:c}),I(g2,{children:[u(y2,{selected:a,children:wu[r]}),u(b2,{empty:c,selected:a,children:o||"Not selected"})]})]})};function ll(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function sl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ll(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ll(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var P2=function(e){var r=Ti();return r?u(k2,sl({},e)):u(I2,sl({},e))},E2=C("div",{target:"e18wzlbg8"})(function(t){return{display:"flex",flexDirection:"column",padding:"10px",backgroundColor:"#F7F9FA",borderRadius:"0 0 4px 4px","&.rna-editor-expanded--sequence-edit-mode":{padding:"8px",paddingTop:"10px",border:"2px ".concat(t.theme.ketcher.color.editMode.sequenceInRNABuilder," solid"),borderTop:"none"}}},""),O2=C("input",{target:"e18wzlbg7"})("width:100%;padding:6px;border:none;border-radius:4px;box-shadow:0 1px 2px 0 rgba(180, 185, 214, 0.6);&:hover,&:focus{outline:",function(t){var e=t.theme;return e.ketcher.outline.selected.small},";}"),N2=C("div",{target:"e18wzlbg6"})("width:100%;display:flex;flex-direction:",function(t){var e=t.compact;return e?"row":"column"},";justify-content:",function(t){var e=t.compact;return e?"space-between":"flex-start"},";gap:8px;margin-top:16px;"),D2=C("div",{target:"e18wzlbg5"})({name:"zmhcg5",styles:"margin-top:16px;display:flex;justify-content:space-evenly;align-items:center;gap:8px"}),ur=C(Mn,{target:"e18wzlbg4"})(function(t){return{width:"100%",whiteSpace:"nowrap",fontSize:t.theme.ketcher.font.size.regular,backgroundColor:t.primary?t.theme.ketcher.color.button.primary.active:void 0,color:t.primary&&!t.disabled?t.theme.ketcher.color.button.text.primary:t.theme.ketcher.color.text.light,outline:t.primary&&!t.disabled?t.theme.ketcher.outline.selected.small:t.theme.ketcher.outline.grey.small}},""),L2=C("div",{target:"e18wzlbg3"})(function(t){return{position:"relative",borderRadius:t.theme.ketcher.border.radius.regular,backgroundColor:t.theme.ketcher.color.background.primary,boxShadow:t.theme.ketcher.shadow.regular,cursor:"pointer",overflow:"hidden",padding:"0 6px 6px 6px",display:"flex",alignItems:"flex-end",height:"48px",outline:t.selected?t.theme.ketcher.outline.selected.medium:"none",":hover":{outline:t.selected?void 0:t.theme.ketcher.outline.small}}},""),_2=C("span",{target:"e18wzlbg2"})(function(t){return{position:"absolute",top:"0",left:"0",width:"100%",height:"8px",backgroundColor:t.selected?t.theme.ketcher.outline.selected.color:t.theme.ketcher.outline.color}},""),T2=C(Is,{target:"e18wzlbg1"})({name:"1jdipvd",styles:"width:100%;&:disabled{background:none;outline:none;color:inherit;}"}),R2=C("div",{target:"e18wzlbg0"})({name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"}),no=function(e){return e.size===0?"":e.size===1?ue(e)[0]:"[multiple]"},qo=function(e){if(e!=null&&e.length){for(var r={sugarLabel:new Set,baseLabel:new Set,phosphateLabel:new Set},n=0;n<e.length;n++)for(var o=0,a=["sugarLabel","baseLabel","phosphateLabel"];o<a.length;o++){var i,l,s,c=a[o];((i=e[n])!==null&&i!==void 0&&i[c]||!((l=e[n])!==null&&l!==void 0&&l[c])&&e[n].type===rt.Nucleoside&&!e[n].isNucleosideConnectedAndSelectedWithPhosphate)&&r[c].add((s=e[n])===null||s===void 0?void 0:s[c])}return{Sugars:no(r.sugarLabel),Bases:no(r.baseLabel),Phosphates:no(r.phosphateLabel)}}},j2=function(e){var r,n=qo(e);return"".concat(n?.Sugars,"(").concat(n?.Bases,")").concat((r=n?.Phosphates)!==null&&r!==void 0?r:"")},Cu=function(e){e(ru(null)),e(st(!1))},cl=function(e){Cu(e)},bn=function(e,r){Cu(e),e(Oi([])),r?.events.turnOffSequenceEditInRNABuilderMode.dispatch(),r?.mode instanceof ai&&r.mode.turnOffEditMode()},xn=function(e){return e.filter(function(r){return r.type?r.type===rt.Nucleotide||r.type===rt.Nucleoside:r.node?r.node instanceof yr||r.node instanceof br:!1}).length};function ul(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ul(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ul(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var B2=function(e){var r=e.isEditMode,n=e.onDuplicate,o=[{groupName:Z.SUGARS,iconName:"sugar",testId:"rna-builder-slot--sugar"},{groupName:Z.BASES,iconName:"base",testId:"rna-builder-slot--base"},{groupName:Z.PHOSPHATES,iconName:"phosphate",testId:"rna-builder-slot--phosphate"}],a=ir(),i=N(Rn),l=N(Ei),s=N(Xc),c=N(ae),d=N(jn),h=N(iy),f=x.useState(i),v=_(f,2),p=v[0],g=v[1],y=N(Zc),b=N(ny),M=N(Ze),A=x.useState(!1),m=_(A,2),w=m[0],S=m[1],k=x.useState(qo(y)),E=_(k,2),O=E[0],D=E[1],P=_t()==="sequence-layout-mode",T=function(){if(h){var $=Ct[h.groupName],G=dt(dt({},p),{},V({},$,h.groupItem));return g(G),G}return p};x.useEffect(function(){g(i)},[i]),x.useEffect(function(){y&&(xn(y)===1&&a(tu(j2(y))),D(qo(y)))},[a,y]),x.useEffect(function(){if(s!==we.Presets&&r)if(M&&h){var Q=Ct[h.groupName],$="".concat(Q,"Label"),G=y.map(function(Y){return Y.isNucleosideConnectedAndSelectedWithPhosphate&&$==="phosphateLabel"||Y.type===rt.Phosphate&&($==="sugarLabel"||$==="baseLabel")?Y:dt(dt({},Y),{},V(V({},$,h.groupItem.label),"rnaBaseMonomerItem",h.groupName==="Bases"?h.groupItem:Y.rnaBaseMonomerItem))});S(!0),a(Oi(G))}else{var ee=T(),be=p?.name;ee.editedName||(be=Qc(ee)),g(dt(dt({},ee),{},{name:be}))}},[h?.groupItem,M]);var j=function($,G){if($===we.Presets){Ho(p?.name),p&&c?.events.selectPreset.dispatch(p);return}var ee=p[Ct[$]];ee?dl(ze(ee)):G&&dl(G)},L=function($){return function(){var G=eo(p,$);G&&!P&&c?.events.selectMonomer.dispatch(G),p[Ct[$]]&&a(zo(ze(p[Ct[$]]))),a(Pt($)),a(Ni({rnaPreset:p,isEditMode:r}));var ee="";if(M&&y.length>0){var be=y[0].baseLabel,Y=be&&y.every(function(zn){return zn.baseLabel===be});if(Y){var Tt=y[0].rnaBaseMonomerItem;Tt&&(ee=ze(Tt),a(zo(ee)))}}setTimeout(function(){return j($,ee)},100)}},F=function($){if(r){var G=$.target.value;g(dt(dt({},p),{},{name:G.trim(),editedName:!0}))}},R=function(){xn(y)>1?a(Vt("updateSequenceInRNABuilder")):(c?.events.modifySequenceInRnaBuilder.dispatch(y),bn(a,c))},q=function(){if(p!=null&&p.name){var $=d.find(function(G){return G.name===p.name});if($&&i.nameInList!==$.name){a(Li(p.name));return}a(uy(p)),a(Or(p)),P||c?.events.selectPreset.dispatch(p),setTimeout(function(){Ho(p.name)},0),cl(a)}},H=function(){M?bn(a,c):(g(i),cl(a))},B=function(){a(st(!0))},z=function($){var G,ee;return h&&h.groupName===$?h.groupItem.label:((G=eo(p,$))===null||G===void 0?void 0:G.label)||((ee=eo(p,$))===null||ee===void 0?void 0:ee.props.MonomerName)},W=function($){return O?O[$]:""};x.useEffect(function(){var Q=function(G){G.key==="Escape"?(H(),G.preventDefault(),G.stopPropagation()):G.key==="Enter"&&(M?R():c?.events.startNewSequence.dispatch({}),G.preventDefault(),G.stopPropagation())};return c?.events.keyDown.add(Q),function(){c?.events.keyDown.remove(Q)}},[c,y]);var K;l&&!M?K=u(ur,{disabled:!Ka(p),primary:!0,"data-testid":"add-to-presets-btn",onClick:q,children:"Add to Presets"}):r?K=u(ur,{primary:!0,disabled:M?!w:!1,"data-testid":"save-btn",onClick:M?R:q,children:M?"Update":"Save"}):K=u(ur,{"data-testid":"edit-btn",onClick:B,disabled:i.default,children:"Edit"});var pe=Ti();return I(E2,{"data-testid":"rna-editor-expanded",className:Yt(M&&"rna-editor-expanded--sequence-edit-mode"),children:[pe?u(O2,{value:M?b:p?.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:M,onChange:F}):I(L2,{selected:s===we.Presets,onClick:function(){return L(we.Presets)},children:[r?u(T2,{value:M?b:p?.name,placeholder:"Name your structure","data-testid":"name-your-structure-editbox",disabled:M,onChange:F}):u(R2,{children:p?.name}),u(_2,{selected:s===we.Presets})]}),u(N2,{compact:pe,children:o.map(function(Q){var $=Q.groupName,G=Q.iconName,ee=Q.testId;return u(P2,{selected:s===$,groupName:$,monomerName:M?W($):z($),iconName:G,testid:ee,onClick:L($)},$)})}),I(D2,{children:[r?u(ur,{"data-testid":"cancel-btn",onClick:H,children:"Cancel"}):u(ur,{"data-testid":"duplicate-btn",disabled:!Ka(p),onClick:function(){return n(p)},children:"Duplicate and Edit"}),K]})]})},F2=C("div",{target:"e1ms1w5g2"})({name:"1tk8yx0",styles:"padding:8px"}),z2=C("button",{target:"e1ms1w5g1"})("width:100%;display:flex;justify-content:space-between;align-items:center;padding:8px;background-color:",function(t){return t.theme.ketcher.color.background.primary},";font-weight:",function(t){return t.theme.ketcher.font.weight.regular},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";border:none;border-radius:4px;text-transform:none;cursor:pointer;&.styled-header--sequence-edit-mode{background-color:",function(t){return t.theme.ketcher.color.editMode.sequenceInRNABuilder},";}&.styled-header--expanded,&.styled-header--active-preset{border-radius:4px 4px 0 0;}"),$2=C(ie,{target:"e1ms1w5g0"})("height:16px;width:16px;transform:",function(t){return t.expanded?"rotate(180deg)":"none"},";"),Su=function(e){var r=document.body.querySelector(e);r?.scrollIntoView()},Ho=function(e){Su('[data-rna-preset-item-name="'.concat(e,'"]'))},dl=function(e){Su('[data-monomer-item-id="'.concat(e,'"]'))},q2=function(e){var r=e.duplicatePreset,n=N(Rn),o=N(lr),a=N(Ze),i=Qc(n),l=ne(),s=x.useState(!1),c=_(s,2),d=c[0],h=c[1];x.useEffect(function(){if(n){(n.name||o)&&h(!0);return}l(Di()),l(Pt(we.Presets))},[n]),x.useEffect(function(){l(Ni({rnaPreset:n,isEditMode:o}))},[o]);var f=function(){h(!d),n!=null&&n.nameInList||l(st(!0))};return I(F2,{"data-testid":"rna-editor",children:[I(z2,{className:Yt(a&&"styled-header--sequence-edit-mode",d&&"styled-header--expanded",n?.name&&"styled-header--active-preset"),onClick:f,"data-testid":"rna-builder-expand-button",children:["RNA Builder",u($2,{expanded:d,name:"chevron"})]}),n&&(d?u(B2,{isEditMode:o,onDuplicate:r}):u(v2,{name:n.name,fullName:i}))]})},H2=C("div",{target:"e1ocltcl0"})({name:"16fpk5u",styles:"height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between"}),Au=function(e){var r=e.ketcher;return $s("scrollbar-width:thin;scrollbar-color:",r.color.scroll.regular," ",r.color.scroll.inactive,";&::-webkit-scrollbar{width:4px;height:4px;background-color:",r.color.scroll.inactive,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb{background-color:",r.color.scroll.regular,";border-radius:2px;-webkit-border-radius:2px;}&::-webkit-scrollbar-thumb:active{background-color:",r.color.scroll.regular,";}","")},V2={expandButton:"Modal-module_expandButton__J1QYl"};function hl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function U2(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var W2=C(uf,{target:"e45wfhi5"})({name:"dzuq2w",styles:".MuiPaper-root{min-width:304px;}"}),G2=C(kf,{target:"e45wfhi4"})(function(t){var e=t.theme,r=t.hideBorder;return{padding:"2px 4px 2px 12px",display:"flex",alignItems:"center",justifyContent:"space-between",fontFamily:"".concat(e.ketcher.font.family.inter),fontSize:"".concat(e.ketcher.font.size.medium),fontWeight:500,textTransform:"capitalize",borderBottom:r?"none":"1px solid rgba(202, 211, 221, 1)"}},""),K2=C("div",{target:"e45wfhi3"})({name:"10by1a4",styles:"margin-right:10px;font-size:14px"}),fl=C(ie,{target:"e45wfhi2"})({name:"4jxctt",styles:"width:16px;height:16px;color:rgba(51, 51, 51, 1)"}),ku=C(Mf,{target:"e45wfhi1"})("padding:0;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";line-height:17px;color:#000000;",function(t){var e=t.theme;return Au(e)},";"),Iu=C(vf,{target:"e45wfhi0"})("height:52px;margin:0;padding:0 12px;border-top:",function(t){var e=t.theme,r=t.withborder;return r==="true"?e.ketcher.border.small:"none"},";justify-content:flex-end;.MuiButtonBase-root{border-radius:4px;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";}"),re=function(e){var r=e.children,n=e.title,o=e.isOpen,a=e.showCloseButton,i=a===void 0?!0:a,l=e.showExpandButton,s=l===void 0?!1:l,c=e.onClose,d=e.className,h=e.modalWidth,f=e.expanded,v=f===void 0?!1:f,p=e.setExpanded,g=p===void 0?mt:p,y=e.testId,b=e.hideHeaderBorder,M=Dh(),A=x.useMemo(function(){return{testId:y,"data-testid":y,style:U2({background:M.ketcher.color.background.primary,borderRadius:"8px",color:M.ketcher.color.text.primary},s&&{margin:"auto",width:v?"100%":h,height:v?"100%":void 0,maxWidth:"calc(min(1280px, 100%))",maxHeight:"calc(min(980px, 100%))"})}},[M.ketcher.color.text.primary,M.ketcher.color.background.canvas,v]),m=x.useMemo(function(){return{style:{background:M.ketcher.color.background.overlay,opacity:.4}}},[M.ketcher.color.background.overlay]),w={Content:null,Footer:null};return bt.Children.forEach(r,function(S){S.type===ku?w.Content=S:S.type===Iu&&(w.Footer=S)}),I(W2,{BackdropProps:m,PaperProps:A,open:o,onClose:c,container:document.querySelector(it),disableEscapeKeyDown:!i,className:d,sx:{padding:"24px"},children:[n||i||s?I(G2,{hideBorder:b,children:[u(K2,{children:n}),I("span",{children:[s&&u(Zi,{title:"expand window","test-dataid":"expand-window-button",className:V2.expandButton,onClick:function(){g(!v)},children:u(fl,{name:v?"minimize-expansion":"expand"})}),i&&u(Zi,{title:"Close window",onClick:c,"data-testid":"close-window-button",children:u(fl,{name:"close"})})]})]}):"",w.Content,w.Footer]})};re.Content=ku;re.Footer=Iu;var Y2=C("div",{target:"e117eqk610"})({name:"uawiic",styles:"display:flex;flex-direction:column;justify-content:flex-start;overflow:hidden;height:100%"}),pl=C(Sh,{target:"e117eqk69"})({name:"u6kpdv",styles:"min-height:32px"}),X2=C("div",{target:"e117eqk68"})({name:"vz8pb8",styles:"flex-grow:2;min-height:32px"}),wn=C("div",{target:"e117eqk67"})("position:relative;width:100%;display:flex;flex-direction:column;gap:8px;justify-content:start;padding:",function(t){var e=t.compact;return e?"4px":"8px"},";"),Z2=C("div",{target:"e117eqk66"})({name:"6imefc",styles:"flex-grow:1;min-height:0;background-color:#f7f9fa;border-radius:4px;margin:4px 8px;padding:4px;&.first-tab{border-radius:0 4px 4px 4px;}&.last-tab{border-radius:4px 0 4px 4px;}"}),Q2=C("div",{target:"e117eqk65"})("height:100%;background-color:",function(t){var e=t.theme;return e.ketcher.color.tab.content},";border-radius:2px;overflow:auto;"),Fi=C(Mn,{target:"e117eqk64"})("background-color:",function(t){var e=t.theme;return e.ketcher.color.button.transparent.active},";color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";border-color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";"),Pu=C("div",{target:"e117eqk63"})({name:"1q5khk2",styles:"width:100%;height:100%;background-color:#eff2f594;position:absolute;top:0;left:0"}),J2=C("div",{target:"e117eqk62"})({name:"bimmx8",styles:"display:flex;justify-content:space-between;gap:8px;padding:6px 8px 0"}),eb=C("div",{target:"e117eqk61"})({name:"qnk899",styles:"position:relative;display:flex;align-items:center;&.rna-tab--selected{& button{border-radius:4px 4px 0 0;background-color:#f7f9fa;}&::after{content:'';position:absolute;bottom:-4px;left:0;right:0;height:8px;background-color:#f7f9fa;}}"}),tb=C(si,{target:"e117eqk60"})("height:24px;min-height:24px;min-width:24px;",function(t){var e=t.selected;return e?"min-width: 104px;":""}," display:flex;flex-direction:row;gap:4px;align-items:center;justify-content:center;padding:4px;",function(t){var e=t.selected;return e?"margin-top: -8px;":""}," font-weight:400;font-size:10px;border-radius:4px;background-color:white;opacity:",function(t){var e=t.selected;return e?1:.6},";text-transform:none;&:hover{background-color:#f3f8f9;}>svg{height:16px;width:16px;color:#b4b9d6;&.MuiTab-iconWrapper{margin:0;}}");function vl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ml(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?vl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var rb=function(e){var r=N(Tn),n=N(Bn),o=Uc(r,e),a=Fo(o),i=L1(r),l=Fo(i);return x.useMemo(function(){return[{groupName:we.Presets,iconName:"preset",groups:[{groupItems:n}]},{groupName:Z.SUGARS,iconName:"sugar",groups:a.filter(function(s){return Jn[s.groupTitle]===Z.SUGARS})},{groupName:Z.BASES,iconName:"base",groups:a.filter(function(s){return Jn[s.groupTitle]===Z.BASES}).map(function(s){return ml(ml({},s),{},{groupItems:s.groupItems.filter(function(c){var d;return((d=c.props)===null||d===void 0?void 0:d.MonomerClass)!==tt.RNA})})})},{groupName:Z.PHOSPHATES,iconName:"phosphate",groups:a.filter(function(s){return Jn[s.groupTitle]===Z.PHOSPHATES})},{groupName:Z.NUCLEOTIDES,iconName:"nucleotide",groups:l}]},[a,n,l])},nb=function(e){var r=e.activeRnaBuilderItem,n=e.groupsData,o=e.onNewPresetClick,a=e.onSelectItem,i=e.duplicatePreset,l=e.editPreset,s=e.libraryName,c=ir(),d=N(Bn),h=N(Tn),f=N(lr),v=N(Ei),p=N(eu);return I(X,{children:[u(J2,{children:n.map(function(g){var y=g.groupName,b=g.groups,M=g.iconName,A=y===r,m=Pr(h,y),w=[].concat(ue(b),ue(m)).reduce(function(k,E){return k+(E.groupItems.length||0)},0),S=A?"".concat(y," (").concat(w,")"):null;return u(eb,{className:Yt(A&&"rna-tab--selected"),children:u(tb,{label:S,title:y,selected:A,icon:u(ie,{name:M}),onClick:function(){return c(Pt(y))},"data-testid":"summary-".concat(y)})},y)})}),n.map(function(g){var y=g.groupName,b=g.groups;if(y!==r)return null;var M=Pr(h,y),A=y===we.Presets?I(wn,{compact:!0,children:[u(Fi,{onClick:o,"data-testid":"new-preset-button",children:"New Preset"}),u(Bi,{duplicatePreset:i,editPreset:l,presets:d}),f&&!v&&u(Pu,{})]}):u(wn,{compact:!0,children:I(X,{children:[b.map(function(S){var k=S.groupItems,E=S.groupTitle;return u(nr,{title:b.length>1?E:void 0,groupName:y,items:k,selectedMonomerUniqueKey:p,onItemClick:function(D){return a(D,y)}},E)}),M.map(function(S){var k=S.groupTitle,E=S.groupItems;return u(nr,{title:k,items:E,libraryName:s,selectedMonomerUniqueKey:p,onItemClick:function(D){return a(D,y)}},k)})]})}),m=r===we.Presets,w=r===Z.NUCLEOTIDES;return u(Z2,{className:Yt(m&&"first-tab",w&&"last-tab"),children:u(Q2,{children:A})},y)})]})},ob=x.memo(nb),ib=function(e){var r=e.groupName,n=e.quantity,o=e.expanded,a=e.iconName;return I(o2,{"data-testid":"summary-".concat(r),children:[u($o,{name:a}),I(i2,{children:[r," (",n,")"]}),u($o,{name:"chevron",expanded:o})]})},ab=function(e){var r=e.activeRnaBuilderItem,n=e.groupsData,o=e.newPreset,a=e.onNewPresetClick,i=e.onSelectItem,l=e.duplicatePreset,s=e.editPreset,c=e.libraryName,d=ir(),h=N(Bn),f=N(Tn),v=N(lr),p=N(Ei),g=N(eu),y=x.useState(r),b=_(y,2),M=b[0],A=b[1],m=function(S){M===S?A(null):(A(S),d(Ni({rnaPreset:o,isEditMode:v})))};return x.useEffect(function(){A(r)},[r]),u(X,{children:n.map(function(w){var S=M===w.groupName,k=Pr(f,w.groupName),E=[].concat(ue(w.groups),ue(k)).reduce(function(P,T){return P+(T.groupItems.length||0)},0),O=u(ib,{iconName:w.iconName,groupName:w.groupName,quantity:E,expanded:S}),D=w.groupName===we.Presets?I(wn,{children:[u(Fi,{onClick:a,"data-testid":"new-preset-button",children:"New Preset"}),u(Bi,{duplicatePreset:l,editPreset:s,presets:h}),v&&!p&&u(Pu,{})]}):u(wn,{children:I(X,{children:[w.groups.map(function(P){var T=P.groupItems,j=P.groupTitle;return u(nr,{title:w.groups.length>1?j:void 0,groupName:w.groupName,items:T,selectedMonomerUniqueKey:g,onItemClick:function(F){return i(F,w.groupName)}},j)}),k.map(function(P){return u(nr,{title:P.groupTitle,items:P.groupItems,libraryName:c,selectedMonomerUniqueKey:g,onItemClick:function(j){return i(j,w.groupName)}},P.groupTitle)})]})});return w.groupName===we.Presets&&S?u(X2,{children:u(pl,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(w.groupName),summary:O,details:D,expanded:S,onSummaryClick:function(){return m(w.groupName)}})},w.groupName):u(pl,{"data-testid":"styled-accordion",dataTestIdDetails:"rna-accordion-details-".concat(w.groupName),summary:O,details:D,expanded:S,onSummaryClick:function(){return m(w.groupName)}},w.groupName)})})},lb=x.memo(ab);function gl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function yl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var sb=function(e){var r=e.view,n=e.libraryName,o=e.duplicatePreset,a=e.editPreset,i=ir(),l=N(Xc),s=N(Rn),c=N(lr),d=N(ae),h=N(Ze),f=x.useState(s),v=_(f,2),p=v[0],g=v[1];x.useEffect(function(){i(Pt(c&&s?l:we.Presets))},[c]);var y=rb(n),b=x.useCallback(function(){i(Di()),i(Pt(we.Presets)),i(st(!0))},[i]),M=x.useCallback(function(A,m){var w;if(c&&i(zo(ze(A))),!h&&!c&&d?.events.selectMonomer.dispatch(A),!!c){var S=Me(A)?(w=A.monomers[0].monomerItem.props.MonomerClass)===null||w===void 0?void 0:w.toLowerCase():A.props.MonomerClass.toLowerCase(),k=yl(yl({},p),{},V({},S,A));g(k),i(ru({groupName:m,groupItem:A})),i(Pt(m))}},[i,d,c,h,p]);return u(Y2,{"data-testid":"rna-accordion",children:r==="tabs"?u(ob,{activeRnaBuilderItem:l,groupsData:y,onNewPresetClick:b,onSelectItem:M,libraryName:n,editPreset:a,duplicatePreset:o}):u(lb,{activeRnaBuilderItem:l,groupsData:y,newPreset:p,onNewPresetClick:b,onSelectItem:M,libraryName:n,editPreset:a,duplicatePreset:o})})},cb=function(e){var r=e.libraryName,n=e.duplicatePreset,o=e.editPreset,a=ne(),i=N(ay),l=N(ly),s=Ti(),c=function(){i.length>0&&a(Li("")),l.length>0&&a(nu(""))};return I(H2,{children:[u(q2,{duplicatePreset:n}),u(sb,{libraryName:r,duplicatePreset:n,editPreset:o,view:s?"tabs":"accordion"}),I(re,{isOpen:!!i||!!l,title:"Error Message",onClose:c,children:[u(re.Content,{children:I("div",{style:{padding:"12px"},children:[i&&'Preset with name "'.concat(i,'" already exists. Please choose another name.'),l&&'Preset with name "'.concat(l,`" can't be used. Because it is impossible to establish bonds between monomers. Edit it's structure or choose another one.`)]})}),u(re.Footer,{children:u(Fi,{onClick:c,children:"Close"})})]})]})},ub=function(e,r){return[{caption:Ii,tooltip:"Favorites",component:ro,testId:"FAVORITES-TAB",props:{libraryName:Hc,duplicatePreset:e,editPreset:r}},{caption:"Peptides",component:ro,testId:"PEPTIDES-TAB",props:{libraryName:gr.PEPTIDE}},{caption:"RNA",testId:"RNA-TAB",component:cb,props:{libraryName:gr.RNA,duplicatePreset:e,editPreset:r}},{caption:"CHEM",component:ro,testId:"CHEM-TAB",props:{libraryName:gr.CHEM}}]};function bl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function xl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?bl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var oo="_Copy",db=function(e){var r=e.toggleLibraryVisibility,n=x.useRef([]),o=ne(),a=N(Wc);x.useEffect(function(){o(Va(""))},[o]),N(jn,function(h){return n.current=h,!0});var i=x.useCallback(function(h){o(Va(h.target.value))},[o]),l=x.useCallback(function(h){var f="".concat(h?.name).concat(oo),v;do v=n.current.find(function(y){return y.name===f}),v&&(f+=oo);while(v);if(v){o(Li(f));return}var p=v?"".concat(f).concat(oo):f,g=xl(xl({},h),{},{name:p,nameInList:p,default:!1,favorite:!1});o(Or(g)),o(st(!0)),Ho(h?.name)},[o]),s=x.useCallback(function(h){o(Or(h)),o(st(!0))},[o]),c=x.useMemo(function(){return ub(l,s)},[l,s]),d=x.useCallback(function(h,f){o(Ir(f))},[o]);return I(Sy,{"data-testid":"monomer-library",children:[I(Ay,{children:[I(ky,{children:[u(Py,{name:"search"}),u(Ey,{type:"search","data-testid":"monomer-library-input",onChange:i,placeholder:"Search by name..."})]}),u(Iy,{title:"Hide library",onClick:r,"data-testid":"hide-monomer-library",children:u(ie,{name:"arrows-right"})})]}),u(du,{tabs:c,selectedTabIndex:a,onChange:d})]})},hb=C("div",{target:"emj253a0"})(function(t){var e=t.theme;return{margin:0,fontSize:e.ketcher.font.size.regular,position:"absolute",top:"12px",cursor:"pointer",visibility:"visible",opacity:1,whiteSpace:"nowrap",display:"flex",alignItems:"center",lineHeight:1,userSelect:"none",backgroundColor:e.ketcher.color.button.primary.active,color:e.ketcher.color.button.text.primary,right:"12px",padding:"10px 8px",borderRadius:"4px","& > span":{display:"flex",justifyContent:"center",alignItems:"center","&.icon":{marginRight:"2px"}}}},""),fb=function(e){var r=e.onClick;return I(hb,{onClick:r,"data-testid":"show-monomer-library",children:[u("span",{className:"icon",children:u(ie,{name:"arrows-left"})}),"Show Library"]})},pb=C("div",{target:"e10ckbgw0"})("display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;width:40px;height:12px;margin-top:10px;& span{display:inline-block;width:8px;height:8px;border:2px solid ",function(t){var e=t.theme;return e.ketcher.color.spinner},";border-radius:100%;box-sizing:border-box;&:nth-of-type(1){animation:bounce 1s ease-in-out infinite;}&:nth-of-type(2){animation:bounce 1s ease-in-out 0.33s infinite;}&:nth-of-type(3){animation:bounce 1s ease-in-out 0.66s infinite;}}@keyframes bounce{0%,75%,100%{-webkit-transform:translateY(0);-ms-transform:translateY(0);-o-transform:translateY(0);transform:translateY(0);}25%{-webkit-transform:translateY(-100%);-ms-transform:translateY(-100%);-o-transform:translateY(-100%);transform:translateY(-100%);}}"),Fn=function(){return I(pb,{className:"loading-spinner","data-testid":"loading-spinner",children:[u("span",{}),u("span",{}),u("span",{})]})},vb="file-thumbnail",mb=C("div",{target:"ep0evuw1"})({name:"1btsn9l",styles:"width:410px;min-height:23em;flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center"}),gb=C("div",{target:"ep0evuw0"})({name:"vbftiw",styles:"display:flex;flex-direction:row;align-items:center;svg{margin-right:13px;}p{color:#585858;font-size:16px;line-height:19px;}"}),yb=function(e){var r=e.fileName;return I(mb,{children:[r&&I(gb,{children:[u(ie,{name:vb}),u("p",{children:r})]}),u(Fn,{})]})},bb=["textLabel","iconName","disabled","disabledText"];function wl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Bt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?wl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var xb={width:"100%",height:"100%",display:"flex",alignItems:"center",flexDirection:"column",justifyContent:"space-between"},wb=C(ie,{target:"erk2iw51"})("filter:",function(t){var e=t.disabled;return e?"grayscale(1)":""},";opacity:",function(t){var e=t.disabled;return e?"0.6":"1"},";"),Mb={backgroundColor:"#F8FEFFFF"},Cb=C("div",{target:"erk2iw50"})("display:flex;flex-direction:column;align-items:center;&>span{font-size:",function(t){var e=t.theme;return e.ketcher.font.size.small},";color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";opacity:50%;}&>svg{margin-bottom:8px;}"),Ml=function(e){var r=e.textLabel,n=e.iconName,o=e.disabled,a=e.disabledText,i=Tr(e,bb),l=xh(Bt({multiple:!1,noClick:!0,disabled:o},i)),s=l.getRootProps,c=l.getInputProps,d=l.isDragActive,h=l.open,f=x.useMemo(function(){return Bt(Bt({},xb),d?Mb:{})},[d]);return I("div",Bt(Bt({},s({style:f})),{},{onClick:h,children:[u("input",Bt({},c())),u(wb,{name:n,disabled:o}),o?u(Sb,{children:a}):I(X,{children:[u(Cb,{children:r&&u("span",{children:r})}),u(Eu,{children:"Open from file"})]})]}))},io={PASTE:"open-window-paste-icon",FILE:"open-window-upload-icon",IMAGE:"image-frame"},Eu=C("p",{target:"e1035cyz3"})("font-size:10px;text-transform:uppercase;color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";margin:0;text-align:center;line-height:12px;"),Sb=C("p",{target:"e1035cyz2"})("font-size:10px;margin:0;text-align:center;color:",function(t){var e=t.theme;return e.ketcher.color.text.primary},";opacity:50%;line-height:12px;"),Ab=C("div",{target:"e1035cyz1"})({name:"h9hj7s",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;margin-bottom:20px;&>*{margin-right:18px;}& :last-child{margin-right:0;}"}),ao=C("div",{target:"e1035cyz0"})("width:128px;height:134px;box-shadow:0 4px 12px rgba(103, 104, 132, 0.18);padding:16px;border-radius:12px;flex:1;display:flex;flex-direction:column;justify-content:space-between;align-items:center;box-sizing:border-box;position:relative;cursor:pointer;&>p{margin-top:6px;text-align:center;}svg{fill:",function(t){var e=t.theme;return e.ketcher.color.button.primary.active},";}"),kb=function(e){var r=e.selectClipboard,n=e.fileLoadHandler,o=e.errorHandler;return I(Ab,{children:[I(ao,{"data-testid":"paste-from-clipboard-button",onClick:r,children:[u(ie,{name:io.PASTE}),u(Eu,{children:"Paste from clipboard"})]}),u(ao,{"data-testid":"open-from-file-button",children:u(Ml,{onDropAccepted:n,onDropRejected:function(i){return o("Unable to accept file(s). ".concat(i))},buttonLabel:"Open from file",textLabel:"or drag file here",iconName:io.FILE})}),u(ao,{"data-testid":"open-from-image-button",children:u(Ml,{accept:"image/*",onDropAccepted:n,onDropRejected:function(i){return o("Unable to accept file(s). ".concat(i))},buttonLabel:"Open from image",textLabel:"or drag file here",iconName:io.IMAGE,disabled:!0,disabledText:"Image Recognition service is not available"})})]})},Ib=C("textarea",{target:"e1q335jk0"})("min-width:430px;padding:12px;width:100%;height:100%;overflow:auto;white-space:pre-wrap;resize:none;box-sizing:border-box;outline:transparent;border:none;color:",function(t){var e=t.theme;return e.ketcher.color.input.text.active},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";background-color:",function(t){var e=t.theme,r=t.readOnly;return r?e.ketcher.color.input.background.disabled:e.ketcher.color.input.background.primary},";",function(t){var e=t.theme;return Au(e)},";"),Ou=function(e){var r=e.value,n=e.inputHandler,o=e.readonly,a=o===void 0?!1:o,i=e.selectOnInit,l=i===void 0?!1:i,s=e.className,c=e.testId,d=x.useRef(null);return x.useEffect(function(){if(l){var h;(h=d.current)===null||h===void 0||h.select()}},[d,r,l]),u(Ib,{value:r,readOnly:a,onChange:n&&function(h){return n(h.target.value)},ref:d,className:s,"data-testid":c})};function Cl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Sl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Pb=C(Ou,{target:"e17hogtk0"})({name:"17fmpnb",styles:"width:100%;height:320px"}),Eb=function(e){if(e.isAnalyzingFile)return u(yb,{fileName:e.fileName});switch(e.currentState){case e.states.openOptions:return u(kb,Sl({},e));case e.states.textEditor:return u(Pb,Sl({testId:"open-structure-textarea"},e));default:return null}},Ob=["label","clickHandler","children","styleType"];function Al(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Gr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Al(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Al(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Nu={name:"zlt300",styles:"padding:5px 8px;border-radius:2px;text-transform:none;line-height:14px;font-size:12px;text-align:center;&.MuiButtonBase-root{width:unset;min-width:70px;}"},Nb=C(_s,{target:"ejign8b1"})(function(t){var e=t.theme;return{backgroundColor:e.ketcher.color.button.primary.active,border:"1px solid ".concat(e.ketcher.color.button.primary.active),color:"rgb(245, 245, 245)",fontWeight:e.ketcher.font.weight.regular,width:"62px",height:"24px","&:hover":{backgroundColor:e.ketcher.color.button.primary.hover},"&:disabled":{background:e.ketcher.color.button.primary.disabled,border:"1px solid transparent",opacity:.4}}},Nu,""),Db=C(_s,{target:"ejign8b0"})(function(t){var e=t.theme;return{backgroundColor:"transparent",border:"1px solid ".concat(e.ketcher.color.button.secondary.active),color:e.ketcher.color.button.secondary.active,fontWeight:e.ketcher.font.weight.regular,width:"72px",height:"24px","&:hover":{border:"1px solid ".concat(e.ketcher.color.button.secondary.hover),color:e.ketcher.color.button.secondary.hover},"&:disabled":{border:"1px solid ".concat(e.ketcher.color.button.secondary.disabled),color:e.ketcher.color.button.secondary.disabled},"&:clicked":{border:"1px solid ".concat(e.ketcher.color.button.secondary.clicked),color:e.ketcher.color.button.secondary.clicked}}},Nu,""),Oe=function(e){var r=e.label,n=e.clickHandler,o=e.children,a=e.styleType,i=Tr(e,Ob);return a==="secondary"?u(Db,Gr(Gr({onClick:n,title:i.title||r,role:"button"},i),{},{children:o||r})):u(Nb,Gr(Gr({onClick:n,title:i.title||r,role:"button"},i),{},{children:o||r}))};function Lb(){return new Promise(function(t,e){globalThis.FileReader?t(_b):e(new Error("Your browser does not support opening files locally"))})}function _b(t){return new Promise(function(e,r){var n=new FileReader;n.onload=function(){var o=n.result;t.msClose&&t.msClose(),e(o)},n.onerror=function(o){r(o)},n.readAsText(t,"UTF-8")})}var Tb=C("div",{target:"efvrr8x1"})("position:relative;padding:",function(t){var e=t.currentState;return e===pt.openOptions?"10px 12px":"0"},";");C(Oe,{target:"efvrr8x0"})({name:"1tx1l5v",styles:"margin-right:auto"});C(ie,{target:"e23iben1"})({name:"1ux2zfx",styles:"fill:#343434"});var Rb=C(ie,{target:"e23iben0"})({name:"wpnrak",styles:"user-select:none;width:16px;height:1em;display:inline-block;flex-shrink:0;transition:fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;font-size:1.5rem;position:absolute;right:7px;top:calc(50% - 0.5em);pointer-events:none;fill:#5b6077"}),jb=function(e){var r=e.className;return u(Rb,{name:"chevron",className:r})};function kl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Il(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Bb=C(Nf,{target:"e944g1i2"})({name:"1pt8ucq",styles:"width:100%;padding:0 8px;& label{font-size:12px;line-height:unset;}"}),Fb={name:"af34ib",styles:"background-color:white;border-bottom-left-radius:0;border-bottom-right-radius:0"},zb=C(hh,{target:"e944g1i1"})("height:24px;border:1px solid #e1e5ea;border-radius:4px;font-size:14px;background-color:white;",function(t){var e=t.open;return e&&Fb}," & .MuiSelect-select{padding:0 24px 0 8px;height:100%;}& span{",function(t){var e=t.theme;return"font-size: ".concat(e.ketcher.font.size.medium)},";}& .MuiOutlinedInput-notchedOutline{border:0;}"),$b={width:"120px",backgroundColor:"white",border:"1px solid #5B6077",borderTopWidth:"0",borderRadius:"0px 0px 2px 2px",boxShadow:"0 6px 10px rgba(103, 104, 132, 0.15)"},qb=C(dh,{target:"e944g1i0"})("display:flex;flex-direction:row;justify-content:space-between;padding:0 8px;height:28px;font-size:14px;&.MuiButtonBase-root:hover{border-left:2px solid #167782;}& .MuiTypography-root{",function(t){var e=t.theme;return"font-size: ".concat(e.ketcher.font.size.medium)},";}"),Du=function(e){var r=e.options,n=e.currentSelection,o=e.selectionHandler,a=e.className,i=e.label,l=e.testId,s=e.customStylesForExpanded,c=s===void 0?{}:s,d=e.disabled,h=d===void 0?!1:d,f=x.useState(!1),v=_(f,2),p=v[0],g=v[1],y=function(w){var S=r.filter(function(k){return k.id===w})[0];return u("span",{children:S.label})},b=function(w){o(w.target.value)},M=function(w){w.type!=="keydown"&&g(!0)},A=function(){g(!1)};return I(Bb,{className:a,children:[i&&u("label",{htmlFor:"fileformat",children:"File format:"}),u(zb,{value:n,onChange:b,open:p,onOpen:M,onClose:A,renderValue:y,IconComponent:jb,disabled:h,fullWidth:!0,"data-testid":l??"dropdown-select",MenuProps:{PaperProps:{style:Il(Il({},$b),c)},MenuListProps:{style:{padding:"0"}}},children:r.map(function(m){return u(qb,{value:m.id,"data-testid":"".concat(m.label,"-option"),children:u(Tf,{primary:m.label})},m.id)})})]})},Hb=C("form",{target:"el6v3ot5"})({name:"9pd72t",styles:"display:flex;flex-direction:column;height:300px"}),Vb=C("div",{target:"el6v3ot4"})({name:"itz7qk",styles:"display:flex;justify-content:space-between;margin-bottom:16px"}),Lu=C(Du,{target:"el6v3ot3"})(function(t){var e=t.theme;return{width:"calc(50% - 6px)",height:"28px","& .MuiOutlinedInput-root:hover:not(.Mui-disabled)":{border:"1px solid ".concat(e.ketcher.color.input.border.hover)},"& .MuiOutlinedInput-root":{border:"1px solid ".concat(e.ketcher.color.input.border.regular),backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary,fontFamily:e.ketcher.font.family.inter}}},""),Vo={border:"none"},_u=C("div",{target:"el6v3ot2"})({name:"kq43v2",styles:"position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background:#fff"}),Ub=C("div",{target:"el6v3ot1"})(function(t){var e=t.theme;return{height:"100%",position:"relative",border:"1px solid ".concat(e.ketcher.color.input.border.regular),"& svg":{width:"100%",height:"100%","& .drawn-structures":{"& .monomer":{lineHeight:"initial !important"}}}}},""),Wb=C("div",{target:"el6v3ot0"})(function(t){var e=t.theme;return{display:"flex",flexGrow:1,position:"relative","& button":{opacity:0,position:"absolute",right:"12px",top:"12px",borderRadius:"4px",padding:"2px",width:"28px",height:"28px","&:not(:active)":{backgroundColor:e.ketcher.color.background.primary,color:e.ketcher.color.text.primary}},"&:hover button":{opacity:1},"&:focus-within button":{opacity:0},"&:focus-within button:hover":{opacity:1}}},""),Gb=C(re,{target:"e1oaegu38"})(function(t){var e=t.modalWidth;return`
    .MuiPaper-root {
      width: `.concat(e,`;
      max-width: `).concat(e,`;
    }`)},""),Kb=C("div",{target:"e1oaegu37"})({name:"kj5rtd",styles:"width:100%;display:flex;flex-direction:row;justify-content:space-between;align-items:center"}),Yb=C("div",{target:"e1oaegu36"})({name:"rpuipy",styles:"display:flex;height:24px;font-size:12px"}),zi=C(Lu,{target:"e1oaegu35"})({name:"7nflbq",styles:"padding:0;font-size:12px;& .MuiSelect-select{display:flex;align-items:center;padding:0 20px 0 8px;padding-right:20px !important;height:100%;}& span{font-size:12px;}"}),Xb=C(zi,{target:"e1oaegu34"})(function(){return{width:"140px"}},""),Zb=C(zi,{target:"e1oaegu33"})({name:"16zm0c",styles:"width:76px;margin-left:8px"}),Qb=C(zi,{target:"e1oaegu32"})({name:"l4tg7k",styles:"width:105px;margin-left:8px"}),Jb=C("div",{target:"e1oaegu31"})({name:"oq6u0f",styles:"display:flex;gap:10px"}),Pl=C(Oe,{target:"e1oaegu30"})({name:"b9l38d",styles:"width:min-content"}),Uo="ket",Qr="seq",Wo="rna",Tu="peptide",Ru="fasta",ju="one-letter",Go="three-letter",El=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"seq",label:"Sequence"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"axo-labs",label:"AXO-LABS"},{id:"helm",label:"HELM"}],ex=[{id:Wo,label:"RNA"},{id:"dna",label:"DNA"},{id:Tu,label:"Peptide"}],tx=[{id:ju,label:"1-letter code"},{id:Go,label:"3-letter code"}],lo=vh,pt={openOptions:"openOptions",textEditor:"textEditor"},Ol=function(e){var r=e.ketSerializer,n=e.editor,o=e.struct,a=!n.drawingEntitiesManager.hasDrawingEntities,i=r.deserializeToDrawingEntities(o);if(!i)throw new Error("Error during parsing file");i.drawingEntitiesManager.centerMacroStructure();var l=i.drawingEntitiesManager.mergeInto(n.drawingEntitiesManager),s=l.command,c=new Ls(n),d=n.mode instanceof ai,h=n.mode instanceof wh,f=n.mode instanceof Mh;f&&n.drawingEntitiesManager.hasAntisenseChains&&(s.merge(n.drawingEntitiesManager.applySnakeLayout(!0,!0,!0)),s.setUndoOperationsByPriority()),n.drawingEntitiesManager.detectBondsOverlappedByMonomers(),n.renderersContainer.update(s),c.update(s),d&&(s.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:Qi.sequence,mergeWithLatestHistoryCommand:!0})),h&&(s.setUndoOperationReverse(),n.events.selectMode.dispatch({mode:Qi.snake,mergeWithLatestHistoryCommand:!0})),a&&n.zoomToStructuresIfNeeded(),n.calculateAndStoreNextAutochainPosition(i.drawingEntitiesManager)},Nl=(function(){var t=_r(We.mark(function e(r){var n,o,a,i,l,s,c,d,h,f,v,p,g,y,b,M,A,m;return We.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(n=r.struct,o=r.formatSelection,a=r.additionalSelection,i=r.peptideLettersFormatSelection,l=r.onCloseCallback,s=r.setIsLoading,c=r.dispatch,d=o===Uo,h=o===Qr,f=o===Ru,v=new Jr,p=Dr.provideEditorInstance(),y=n,b=function(E){var O="Convert error! "+E;c(Er({errorMessage:O,errorTitle:h||f?"Unsupported symbols":""}))},!d){S.next=13;break}try{Ol({struct:n,ketSerializer:v,editor:p}),l()}catch{b("Error during file parsing.")}return S.abrupt("return");case 13:f||h&&i!==Go?(g=lo[o][a],y=y.toUpperCase()):h&&i===Go?g=lo.seq.peptide3Letter:g=lo[o];case 14:return M=Sn.getIndigo(),S.prev=15,s(!0),S.next=19,M.convert({struct:y,output_format:ht.KET,input_format:g});case 19:A=S.sent,Ol({struct:A.struct,ketSerializer:v,editor:p}),l(),S.next=29;break;case 24:S.prev=24,S.t0=S.catch(15),m=typeof S.t0=="string"?S.t0:JSON.stringify(S.t0),b(m),Gt.error(S.t0);case 29:return S.prev=29,s(!1),S.finish(29);case 32:case"end":return S.stop()}},e,null,[[15,24,29,32]])}));return function(r){return t.apply(this,arguments)}})(),Dl=!1,Ll=function(e){},rx=function(e){var r=e.isModalOpen,n=e.onClose,o=ne(),a=x.useState(""),i=_(a,2),l=i[0],s=i[1],c=x.useState(""),d=_(c,2),h=d[0],f=d[1],v=x.useState(!1),p=_(v,2),g=p[0],y=p[1],b=x.useState(),M=_(b,2),A=M[0],m=M[1],w=x.useState(pt.openOptions),S=_(w,2),k=S[0],E=S[1],O=x.useState(Uo),D=_(O,2),P=D[0],T=D[1],j=x.useState(Wo),L=_(j,2),F=L[0],R=L[1],q=x.useState(ju),H=_(q,2),B=H[0],z=H[1];x.useEffect(function(){var G=h?.split("."),ee=G[G.length-1];if(ee){var be=El.find(function(Tt){return Tt.id===ee}),Y=be!=null&&be.id?be.id:Qr;T(Y)}},[h]),x.useEffect(function(){Lb().then(function(G){m({chosenOpener:G})})},[]);var W=x.useCallback(function(){E(pt.openOptions),s(""),T(Uo),R(Wo),n()},[n]),K=function(ee){var be=function(zn){s(zn),E(pt.textEditor)},Y=function(){return Ll()};f(ee[0].name),A?.chosenOpener(ee[0]).then(be,Y)},pe=function(){Nl({struct:l,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:B,onCloseCallback:W,setIsLoading:y,dispatch:o})},Q=function(){var ee=Dr.provideEditorInstance(),be=new Ls(ee),Y=ee.drawingEntitiesManager.deleteAllEntities();be.update(Y),ee.renderersContainer.update(Y),ee.zoomToStructuresIfNeeded(),Nl({struct:l,formatSelection:P,additionalSelection:F,peptideLettersFormatSelection:B,onCloseCallback:W,setIsLoading:y,dispatch:o})},$=function(){return I(Kb,{children:[I(Yb,{children:[u(Xb,{options:El,currentSelection:P,selectionHandler:T,customStylesForExpanded:Vo},P),P===Qr||P===Ru?u(Zb,{options:ex,currentSelection:F,selectionHandler:R,customStylesForExpanded:Vo,testId:"dropdown-select-type"},F):null,P===Qr&&F===Tu?u(Qb,{options:tx,currentSelection:B,selectionHandler:z,testId:"dropdown-select-peptide-letters-format"}):null]}),I(Jb,{children:[u(Pl,{disabled:!l,clickHandler:Q,label:"Open as New",styleType:"secondary","data-testid":"open-as-new-button"},"openButton"),u(Pl,{disabled:!l,clickHandler:pe,label:"Add to Canvas",title:"Structure will be loaded as fragment and added to Clipboard","data-testid":"add-to-canvas-button"},"copyButton")]})]})};return I(Gb,{isOpen:r,title:"Open Structure",onClose:W,modalWidth:k===pt.textEditor?"620px":"",testId:"openStructureModal",children:[u(re.Content,{children:I(Tb,{currentState:k,children:[u(Eb,{isAnalyzingFile:Dl,fileName:h,currentState:k,states:pt,selectClipboard:function(){return E(pt.textEditor)},fileLoadHandler:K,errorHandler:Ll,value:l,inputHandler:s}),g&&u(_u,{children:u(Fn,{})})]})}),k===pt.textEditor&&!Dl?u(re.Footer,{withborder:"true",children:$()}):u(X,{})]})},nx=["value","id","onChange","label","type","className","inputClassName"];function _l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ox(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_l(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_l(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var ix=C("label",{target:"e10m4n7r1"})(function(t){var e=t.theme;return{display:"flex",flexDirection:"column",marginRight:"8px",color:e.ketcher.color.text.primary,fontSize:"12px"}},""),ax=C("input",{target:"e10m4n7r0"})(function(t){var e=t.theme;return{height:"24px",padding:"3px 7px",border:"1px solid ".concat(e.ketcher.color.input.border.regular),fontSize:"14px",borderRadius:"4px",backgroundColor:e.ketcher.color.input.background.primary,color:e.ketcher.color.text.primary,outline:"transparent",width:"164px",letterSpacing:"normal","&:active, &:focus":{color:e.ketcher.color.input.text.active},"&:hover":{border:"1px solid ".concat(e.ketcher.color.input.border.hover)}}},""),Bu=function(e){var r=e.value,n=e.id,o=e.onChange,a=e.label,i=e.type,l=e.className,s=e.inputClassName,c=Tr(e,nx),d=function(f){o(f.target.value)};return u(X,{children:I(ix,{htmlFor:n,className:l,children:[a&&u("span",{children:a}),u(ax,ox({type:i||"text",id:n,value:r,className:s,onChange:d},c))]})})},_e;(function(t){t.Ket="chemical/x-ket",t.Mol="chemical/x-mdl-molfile",t.HELM="chemincal/x-helm",t.Fasta="chemical/x-fasta",t.Sequence="chemical/x-sequence",t.Idt="chemical/x-idt",t.AxoLabs="chemical/x-axo-labs",t.Svg="image/svg+xml"})(_e||(_e={}));var Je=Os(function t(e,r,n,o,a){Ts(this,t),this.name=e,this.mime=r,this.extensions=n,this.supportsCoords=o||!1,this.options=a||{}}),lx={ket:new Je("Ket file",_e.Ket,[".ket"],!0,{}),mol:new Je("MDL Molfile V3000",_e.Mol,[".mol"],!0,{"molfile-saving-mode":"3000"}),fasta:new Je("FASTA",_e.Fasta,[".fasta"],!1,{}),sequence:new Je("SEQUENCE",_e.Sequence,[".seq"],!1,{}),"sequence-3-letter":new Je("SEQUENCE (3-letter code)",_e.Sequence,[".seq"],!1,{}),idt:new Je("IDT",_e.Idt,[".idt"],!1,{}),"axo-labs":new Je("AXO-LABS",_e.AxoLabs,[".axolabs"],!1,{}),helm:new Je("HELM",_e.HELM,[".helm"]),svg:new Je("SVG Document",_e.Svg,[".svg"])},Tl=function(e){return lx[e]},sx=[{id:"ket",label:"Ket"},{id:"mol",label:"MDL Molfile V3000"},{id:"sequence",label:"Sequence (1-letter code)"},{id:"sequence-3-letter",label:"Sequence (3-letter code)"},{id:"fasta",label:"FASTA"},{id:"idt",label:"IDT"},{id:"axo-labs",label:"AXO-LABS"},{id:"svg",label:"SVG Document"},{id:"helm",label:"HELM"}],cx={mol:ht.Mol,fasta:ht.FASTA,sequence:ht.SEQUENCE,"sequence-3-letter":ht.PeptideSequenceThreeLetter,idt:ht.IDT,"axo-labs":ht.AXOLABS,helm:ht.HELM},ux=C(re,{target:"e12csxs60"})({name:"krpfk5",styles:"& div.MuiPaper-root{background:white;min-height:400px;min-width:430px;}& .MuiDialogContent-root{overflow:hidden;height:100%;}"}),dx=function(e){var r=e.onClose,n=e.isModalOpen,o=ne(),a=x.useState("ket"),i=_(a,2),l=i[0],s=i[1],c=x.useState("ketcher"),d=_(c,2),h=d[0],f=d[1],v=x.useState(""),p=_(v,2),g=p[0],y=p[1],b=x.useState(!1),M=_(b,2),A=M[0],m=M[1],w=x.useState(),S=_(w,2),k=S[0],E=S[1],O=Sn.getIndigo(),D=Dr.provideEditorInstance(),P=x.useRef({x:0,y:0}),T=x.useRef(null),j=(function(){var H=_r(We.mark(function B(z){var W,K,pe,Q,$,G,ee;return We.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(s(z),W=new Jr,K=W.serialize(D.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),D.drawingEntitiesManager),E(void 0),z!=="ket"){Y.next=7;break}return y(K),Y.abrupt("return");case 7:if(z!=="svg"){Y.next=11;break}return pe=Xi(D.canvas,"preview",{horizontal:P.current.x,vertical:P.current.y}),E(pe),Y.abrupt("return");case 11:if(z==="helm"&&!Jd(Array.from(D.drawingEntitiesManager.monomers.values()),D.monomersLibrary)&&D.events.error.dispatch("Some of the monomers do not have aliases in the HELM Core Library - they are exported using Ketcher aliases."),Y.prev=12,m(!0),!(z==="fasta"||z==="sequence")){Y.next=18;break}if(Q=D.drawingEntitiesManager.validateIfApplicableForFasta(),Q){Y.next=18;break}throw new Error("Error during sequence type recognition(RNA, DNA or Peptide)");case 18:return Y.next=20,O.convert({struct:K,output_format:cx[z]});case 20:$=Y.sent,y($.struct),Y.next=31;break;case 24:Y.prev=24,Y.t0=Y.catch(12),Y.t0 instanceof Error?G=Y.t0.message:G=typeof Y.t0=="string"?Y.t0:JSON.stringify(Y.t0),ee="Convert error! "+G,o(Er(ee)),Gt.error(ee),s("ket");case 31:return Y.prev=31,m(!1),Y.finish(31);case 34:case"end":return Y.stop()}},B,null,[[12,24,31,34]])}));return function(z){return H.apply(this,arguments)}})(),L=function(B){f(B)},F=function(){T.current||(T.current=document.querySelector(it));var B=T.current;if(!B){(P.current.x!==0||P.current.y!==0)&&(P.current={x:0,y:0});return}var z=B.getBoundingClientRect(),W=z.x,K=W===void 0?0:W,pe=z.y,Q=pe===void 0?0:pe;P.current.x===K&&P.current.y===Q||(P.current={x:K,y:Q})},R=function(){var B;if(l==="svg"){var z=Xi(D.canvas,"file",{horizontal:P.current.x,vertical:P.current.y});if(!z){r();return}B=z}else B=g;var W=new Blob([B],{type:Tl(l).mime}),K=Tl(l);lh.saveAs(W,"".concat(h).concat(K.extensions[0])),r()},q=function(B){B.preventDefault();try{sh()?navigator.clipboard.writeText(g):ch(B.clipboardData,{"text/plain":g})}catch(z){Gt.error("copyAs.js::copyAs",z),o(Er("This feature is not available in your browser"))}};return x.useLayoutEffect(function(){F()},[]),x.useEffect(function(){if(l==="ket"){var H=new Jr,B=H.serialize(D.drawingEntitiesManager.micromoleculesHiddenEntities.clone(),D.drawingEntitiesManager);y(B)}},[l]),I(ux,{title:"save structure",isOpen:n,onClose:r,testId:"save-structure-dialog",children:[u(re.Content,{children:I(Hb,{onSubmit:R,id:"save",children:[I(Vb,{style:{padding:"12px 12px 10px"},children:[u("div",{children:u(Bu,{value:h,id:"filename",onChange:L,label:"File name:","data-testid":"filename-input"})}),u(Lu,{label:"File format:",options:sx,currentSelection:l,selectionHandler:j,customStylesForExpanded:Vo,testId:"file-format-list"})]}),k?u(Ub,{dangerouslySetInnerHTML:{__html:k},"data-testid":"preview-area"}):I(Wb,{children:[u(Ou,{testId:"preview-area",value:g,readonly:!0}),u(Kt,{onClick:q,iconName:"copy",title:"Copy to clipboard",testId:"copy-to-clipboard"}),A&&u(_u,{children:u(Fn,{})})]})]})}),I(re.Footer,{children:[u(Oe,{label:"Cancel",styleType:"secondary",clickHandler:r,"data-testid":"cancel-button"}),u(Oe,{label:"Save",clickHandler:R,disabled:!h,"data-testid":"save-button"})]})]})},Rl=C(Oe,{target:"e1kgbmg80"})(function(){return{width:"72px"}},""),hx=C("div",{target:"e11sfr0q0"})({name:"606i4c",styles:"padding:12px"}),fx=function(e){var r=e.isModalOpen,n=e.onClose,o=ne(),a=N(Jc),i=N(ae),l=x.useCallback(function(){n()},[n]),s=function(){l()},c=function(){l(),o(dy(a)),o(st(!1)),o(Di()),i?.events.selectPreset.dispatch(null)};return I(re,{isOpen:r,title:"Delete RNA Preset",onClose:l,"data-testid":"delete-preset-modal",children:[u(re.Content,{children:I(hx,{"data-testid":"delete-preset-popup-content",children:[u("div",{children:"You are about to delete"}),I("div",{children:['"',a.name,'" RNA preset.']}),u("div",{children:"This operation cannot be undone."})]})}),I(re.Footer,{children:[u(Rl,{clickHandler:s,label:"Cancel",styleType:"secondary","data-testid":"cancel-delete-preset-button"},"cancel"),u(Rl,{clickHandler:c,label:"Delete","data-testid":"delete-preset-button"},"delete")]})]})},px=C("div",{target:"e1wvbgsi0"})({name:"606i4c",styles:"padding:12px"}),vx=function(e){var r=e.isModalOpen,n=e.onClose,o=ne(),a=N(Zc),i=N(ae),l=xn(a),s=x.useCallback(function(){n()},[n]),c=function(){bn(o,i)},d=function(){s()},h=function(){s(),i?.events.modifySequenceInRnaBuilder.dispatch(a),c()};return I(re,{isOpen:r,title:"Update sequence",onClose:s,children:[u(re.Content,{children:I(px,{children:["You are going to modify ",l," nucleotides. Are you sure?"]})}),I(re.Footer,{children:[u(Oe,{clickHandler:d,label:"Cancel",styleType:"secondary"},"cancel"),u(Oe,{clickHandler:h,label:"Yes"},"update")]})]})},mx=C("div",{target:"e1tvvbc92"})(function(){return{display:"flex",flexDirection:"column",rowGap:"2px",alignItems:"center",marginBottom:"5px"}},""),gx=C("span",{target:"e1tvvbc91"})(function(t){return{margin:0,padding:0,textAlign:"center",display:"block",font:t.theme.ketcher.font.family.inter,fontSize:t.theme.ketcher.font.size.small,fontWeight:t.theme.ketcher.font.weight.regular,color:t.disabled?"rgba(180, 185, 214, 1)":t.theme.ketcher.color.text.light}},""),yx=C("div",{target:"e1tvvbc90"})(function(){return{height:"100%"}},""),bx=function(e){return e==="O"?"OH":e},Fu=bx,xx=C(Rs,{target:"e1huhxto1"})(function(t){var e=t.theme,r=t.isExpanded;return{display:"flex",border:"1.5px solid ".concat(e.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:r?"auto":"150px",width:r?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),wx=C("div",{target:"e1huhxto0"})({name:"wfzm1y",styles:"display:flex;flex-wrap:wrap;justify-content:center;align-self:flex-start;width:100%;gap:7px"}),Mx=C("div",{target:"e8i5wzj0"})({name:"2oefzz",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;gap:8px;padding:8px;color:#7c7c7f;border:1px solid #cad3dd;width:100%;height:100%"}),Cx=function(e){var r=e.testId;return I(Mx,{"data-testid":r,children:[u(ie,{name:"questionMark"}),"Unknown structure"]})},zu=Cx,Sx=C("div",{target:"e1q9gayd0"})(function(t){var e=t.theme,r=t.expanded;return{display:"flex",border:"1.5px solid ".concat(e.ketcher.outline.color),borderRadius:"6px",padding:5,maxHeight:"100%",minHeight:"150px",height:r?"auto":"150px",width:r?"auto":"150px",alignSelf:"stretch","& svg":{maxWidth:"fit-content",margin:"auto"}}},""),Ax=function(e){var r=e.monomer,n=e.expanded,o=e.selectedAttachmentPoint,a=e.connectedAttachmentPoints,i=e.usage,l=e.testId,s=x.useRef(null);return x.useLayoutEffect(function(){var c=s.current;if(c){var d=Fe(c);if(r instanceof $e){var h=(c.width.baseVal.value-c.x.baseVal.value)/2,f=(c.height.baseVal.value-c.y.baseVal.value)/2,v=new yh(h,f),p=bh.canvasToModel(v),g=new $e(r.variantMonomerItem,p),y=new Ps(g);y.showExternal({canvas:d,usage:i,selectedAttachmentPoint:o,connectedAttachmentPoints:a})}}},[o,a]),u(Sx,{expanded:n,"data-testid":l,children:u("svg",{ref:s})})},kx=Ax,Ix=function(e){var r=e.monomer,n=e.attachmentPoints,o=e.connectedAttachmentPoints,a=e.selectedAttachmentPoint,i=e.usage,l=e.needCache,s=e.update,c=e.expanded,d=e.testId,h=r instanceof $e,f=r.monomerItem.props.unresolved;return I(X,{children:[h?u(kx,{monomer:r,expanded:c,selectedAttachmentPoint:a,connectedAttachmentPoints:o,usage:i,testId:d}):f?u(zu,{testId:d}):u(xx,{struct:r.monomerItem.struct,options:{connectedMonomerAttachmentPoints:o,currentlySelectedMonomerAttachmentPoint:a??void 0,usageInMacromolecule:i,labelInMonomerConnectionsModal:!0,needCache:l??!1},update:s,isExpanded:c,testId:d}),u(wx,{children:u(X,{children:n})})]})},Ko=Ix,jl=C("div",{target:"e14t14ao2"})(function(t){var e=t.theme,r=t.isExpanded;return{margin:0,padding:0,textAlign:"center",alignSelf:"flex-end",display:"block",font:e.ketcher.font.family.inter,fontSize:e.ketcher.font.size.regular,fontWeight:e.ketcher.font.weight.regular,flexBasis:"200px",lineHeight:"14px",maxWidth:r?void 0:"150px"}},""),Px=C("div",{target:"e14t14ao1"})(function(t){var e=t.theme;return{width:10,height:2,display:"block",color:e.ketcher.color.button.secondary.hover,backgroundColor:e.ketcher.color.button.secondary.hover,borderRadius:20,margin:"auto"}},""),Ex=C("div",{target:"e14t14ao0"})(function(){return{display:"grid",gridAutoFlow:"column",gridTemplateRows:"auto auto auto",gridTemplateColumns:"1fr 10px 1fr",justifyContent:"center",alignItems:"flex-start",padding:"12px",paddingBottom:0,height:"100%",columnGap:"12px",rowGap:"8px"}},""),Ox=function(e){return e instanceof $e?"Ambiguous ".concat(e.monomerClass):e.monomerItem.props.Name},Bl=Ox,Nx=function(e){var r=e.firstMonomer,n=e.secondMonomer,o=e.expanded,a=e.firstMonomerOverview,i=e.secondMonomerOverview,l=Bl(r),s=Bl(n);return u(Ex,{children:I(X,{children:[u(jl,{isExpanded:o,children:l}),a,u("span",{}),u(Px,{}),u("span",{}),u(jl,{isExpanded:o,children:s}),i]})})},$u=Nx;function Fl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Dx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Fl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Fl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Lx=C(re,{target:"e1byht5d3"})({name:"1j7jcep",styles:"& .MuiPaper-root{background:#fff !important;}& .MuiDialogContent-root{overflow:hidden;}"}),_x=C(Oe,{target:"e1byht5d2"})(function(){return{width:"97px !important"}},""),Tx=C(Oe,{target:"e1byht5d1"})(function(t){return{width:"97px !important",color:t.disabled?"rgba(51, 51, 51, 0.6)":"",background:t.disabled?"rgba(225, 229, 234, 1) !important":"",opacity:"1 !important",minHeight:"0"}},""),Rx=C(Oe,{target:"e1byht5d0"})(function(t){return{borderRadius:5,minWidth:"45px !important",padding:"4px",border:"1px solid ".concat(t.theme.ketcher.color.border.secondary),color:t.disabled?"rgba(51, 51, 51, 0.6) !important":"",background:t.disabled?"rgba(225, 229, 234)":"",borderColor:t.disabled?"rgba(225, 229, 234) !important":""}},""),jx=function(e){var r=e.onClose,n=e.isModalOpen,o=e.firstMonomer,a=e.secondMonomer,i=e.polymerBond,l=e.isReconnectionDialog,s=N(ae),c=x.useRef(i?.firstMonomerAttachmentPoint),d=x.useRef(i?.secondMonomerAttachmentPoint),h=x.useRef(o?.hasFreeAttachmentPoint||a?.hasFreeAttachmentPoint);if(!o||!a)throw new Error("Monomers must exist!");var f=x.useState(c.current||$l(o)),v=_(f,2),p=v[0],g=v[1],y=x.useState(d.current||$l(a)),b=_(y,2),M=b[0],A=b[1],m=x.useState(!1),w=_(m,2),S=w[0],k=w[1],E=function(){if(l){var P;i?.firstMonomer.setBond(c.current,i),i==null||(P=i.secondMonomer)===null||P===void 0||P.setBond(d.current,i),r()}else s?.events.cancelBondCreationViaModal.dispatch(a),r()},O=function(){if(!p||!M)throw new Error("Attachment points cannot be falsy");if(p===c.current&&M===d.current){E();return}s?.events.createBondViaModal.dispatch({firstMonomer:o,secondMonomer:a,firstSelectedAttachmentPoint:p,secondSelectedAttachmentPoint:M,polymerBond:i,isReconnection:l,initialFirstMonomerAttachmentPoint:c.current,initialSecondMonomerAttachmentPoint:d.current}),r()};return I(Lx,{title:l?"Edit Connection Points":"Select connection points",isOpen:n,onClose:E,showExpandButton:!0,modalWidth:"358px",expanded:S,setExpanded:k,testId:"monomer-connection-modal",children:[u(re.Content,{children:u(yx,{children:u($u,{firstMonomer:o,secondMonomer:a,expanded:S,firstMonomerOverview:u(zl,{monomer:o,selectedAttachmentPoint:p,onSelectAttachmentPoint:g,expanded:S,position:"left"}),secondMonomerOverview:u(zl,{monomer:a,selectedAttachmentPoint:M,onSelectAttachmentPoint:A,expanded:S,position:"right"})})})}),I(re.Footer,{children:[u(_x,{label:"Cancel","data-testid":"cancel-button",styleType:"secondary",clickHandler:E}),u(Tx,{label:l?"Reconnect":"Connect","data-testid":l?"Reconnect-button":"Connect-button",disabled:!p||!M||!h.current,clickHandler:O})]})]})};function zl(t){var e=t.monomer,r=t.selectedAttachmentPoint,n=t.onSelectAttachmentPoint,o=t.expanded,a=o===void 0?!1:o,i=t.position,l=x.useState(e.attachmentPointsToBonds),s=_(l,2),c=s[0],d=s[1],h=x.useState(function(){return to(c)}),f=_(h,2),v=f[0],p=f[1];x.useEffect(function(){d(e.attachmentPointsToBonds)},[r]),x.useEffect(function(){var b=to(c);p(b)},[c]);var g=function(M){var A=e.monomerCaps,m=e instanceof $e;if(!A)return m?null:"H";var w=A[M];return Fu(w)},y=function(M){var A=Dx({},e.attachmentPointsToBonds),m=r?A[r]:null;r&&m&&e.removeBond(m);var w=e.getPotentialBond(M);A[M]=w,d(A),n(M);var S=to(A);p(S)};return u(Ko,{monomer:e,connectedAttachmentPoints:v,selectedAttachmentPoint:r,usage:tn.MonomerConnectionsModal,update:a,expanded:a,attachmentPoints:e.listOfAttachmentPoints.map(function(b){var M=!!(v.includes(b)&&b!==r);return I(mx,{children:[u(Rx,{label:b,styleType:b===r?"primary":"secondary",clickHandler:function(){return y(b)},disabled:M,"data-testid":"".concat(i,"-").concat(b),"data-isActive":b===r}),u(gx,{"data-testid":"leaving-group-value",disabled:M,children:g(b)})]},b)}),testId:"".concat(i,"-monomer-preview")})}function $l(t){if(t.chosenFirstAttachmentPointForBond)return t.chosenFirstAttachmentPointForBond;if(t.chosenSecondAttachmentPointForBond)return t.chosenSecondAttachmentPointForBond;var e=Object.entries(t.attachmentPointsToBonds).filter(function(o){var a=_(o,2);a[0];var i=a[1];return i==null});if(e.length===1){var r=_(e[0],1),n=r[0];return n}return null}var Bx=C("p",{target:"e1e4h5hm0"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),Fx=function(e){var r=e.title,n=e.confirmationText,o=e.onConfirm,a=e.isModalOpen,i=e.onClose,l=function(){o(),i()};return I(re,{isOpen:a,title:r||"Confirm your action",onClose:i,children:[u(re.Content,{children:u(Bx,{children:n})}),I(re.Footer,{children:[u(Oe,{label:"Cancel",clickHandler:i}),u(Oe,{label:"Yes",clickHandler:l,styleType:"secondary"})]})]})},qu={open:rx,save:dx,delete:fx,updateSequenceInRNABuilder:vx,monomerConnection:jx,confirmationDialog:Fx};function ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function zx(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ql(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var $x=function(){var e=N(H1),r=N(q1),n=N(V1),o=ne(),a=x.useCallback(function(){o(F1())},[o]);if(!r)return null;var i=qu[r];if(!i)throw new Error("There is no modal window named ".concat(r));return n?u(i,zx({onClose:a,isModalOpen:e},n)):u(i,{onClose:a,isModalOpen:e})},qx=C("div",{target:"e15avtnm2"})({name:"1bweptz",styles:"background-color:#333333;max-height:40px;display:flex;align-items:stretch"}),Hx=C("div",{target:"e15avtnm1"})({name:"1my6l07",styles:"max-width:356px;padding:4px 10px 4px 10px;color:white;display:flex"}),Vx=C(Kt,{target:"e15avtnm0"})({name:"1c8hqv0",styles:"color:white;width:24px;height:auto;display:flex;align-items:center;justify-content:center;&:hover{background-color:#585858;color:white;}svg{width:16px;height:16px;}"}),Ux=function(){return I(X,{children:[u("symbol",{id:"chem",viewBox:"0 0 59 59",width:"59",height:"59",children:u("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"0.75",fill:"#F5F6F7"})}),u("symbol",{id:"chem-selection",viewBox:"0 0 59 59",width:"59",height:"59",children:u("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"0.75",stroke:"#0097A8",fill:"none",strokeWidth:"1.5"})}),I("symbol",{id:"chem-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[u("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),u("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),u("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),u("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),u("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),u("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),u("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),u("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),u("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),u("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),u("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),u("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),u("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),u("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),u("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),u("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),u("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),u("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),u("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),u("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},Wx=function(){return I(X,{children:[u("symbol",{id:"peptide",viewBox:"0 0 70 61",width:"70",height:"61",children:u("path",{className:"monomer-body",transform:"scale(0.5)","data-actual-width":"35","data-actual-height":"30.5",d:"M16.9236 1.00466C17.2801 0.383231 17.9418 6.10888e-07 18.6583 5.98224e-07L51.3417 2.04752e-08C52.0582 7.81036e-09 52.7199 0.383234 53.0764 1.00466L69.4289 29.5047C69.7826 30.1211 69.7826 30.8789 69.4289 31.4953L53.0764 59.9953C52.7199 60.6168 52.0582 61 51.3417 61H18.6583C17.9418 61 17.2801 60.6168 16.9236 59.9953L0.571095 31.4953C0.217407 30.8789 0.217408 30.1211 0.571096 29.5047L16.9236 1.00466Z"})}),I("symbol",{id:"peptide-hover",viewBox:"0 0 70 61",width:"70",height:"61",children:[u("path",{d:"M18.2246 1.75116C18.3137 1.59581 18.4792 1.5 18.6583 1.5L51.3417 1.5C51.5208 1.5 51.6863 1.59581 51.7754 1.75116L53.06 1.01408L51.7754 1.75117L68.1279 30.2512C68.2163 30.4053 68.2163 30.5947 68.1279 30.7488L51.7754 59.2488C51.6863 59.4042 51.5208 59.5 51.3417 59.5H18.6583C18.4792 59.5 18.3137 59.4042 18.2246 59.2488L1.87215 30.7488C1.78372 30.5947 1.78372 30.4053 1.87215 30.2512L18.2246 1.75116Z",fill:"none",transform:"scale(0.5)",stroke:"#0097A8",strokeWidth:"3"})," "]}),u("symbol",{id:"modified-background",viewBox:"0 0 60 20",width:"30",height:"20",x:"2.5",y:"5",children:u("path",{xmlns:"http://www.w3.org/2000/svg",d:`M6.52702 20C5.81057 20 5.14885 19.6168 4.79229 18.9953L0.570974 11.6382C0.217285 11.0218 
           0.217285 10.2639 0.570974 9.64751L5.52999 1.00466C5.88654 0.383235 6.54827 0 7.26472 0H52.735C53.4515
           0 54.1132 0.383234 54.4698 1.00466L59.4288 9.64751C59.7825 10.2639 59.7825 11.0218 59.4288 11.6382
           L55.2075 18.9953C54.8509 19.6168 54.1892 20 53.4727 20H6.52702Z`,fillOpacity:"0.6"})}),I("symbol",{id:"peptide-autochain-preview",viewBox:"0 0 37 32",width:"37",height:"32","data-actual-width":"37","data-actual-height":"32",children:[u("path",{d:"M8.27143 3.53027L9.29272 1.77462C9.65083 1.15901 10.3093 0.780274 11.0215 0.780274L13.1642 0.780274M29.2131 3.53027L28.1919 1.77462C27.8337 1.15901 27.1753 0.780273 26.4631 0.780273L24.3164 0.780273M2.45429 13.5303L1.585 15.0246C1.22337 15.6463 1.22337 16.4143 1.585 17.0359L2.45429 18.5303M29.0386 28.5303L28.0233 30.2756C27.6619 30.897 26.991 31.2803 26.2646 31.2803L24.1459 31.2803M8.09693 28.5303L9.11221 30.2756C9.47371 30.897 10.1446 31.2803 10.871 31.2803H12.9936M34.8558 18.5303L35.7311 17.0256C36.0896 16.4092 36.0896 15.6514 35.7311 15.0349L34.8558 13.5303"}),u("path",{d:"M14.8937 0.780178L17.8937 0.780178"}),u("path",{d:"M19.597 0.780178L22.597 0.780178"}),u("path",{d:"M14.8937 31.2804H17.8937"}),u("path",{d:"M19.597 31.2804H22.597"}),u("path",{d:"M3.61253 11.7412L5.11253 9.14309"}),u("path",{d:"M5.96421 7.66792L7.46421 5.06984"}),u("path",{d:"M30.1034 26.877L31.6034 24.2789"}),u("path",{d:"M32.455 22.8038L33.955 20.2057"}),u("path",{d:"M7.32633 26.9903L5.82633 24.3922"}),u("path",{d:"M4.97465 22.917L3.47465 20.319"}),u("path",{d:"M33.9528 11.8759L32.4782 9.26339"}),u("path",{d:"M31.6409 7.78023L30.1662 5.16769"})]})]})},Gx=function(){return I(X,{children:[u("symbol",{id:"sugar",viewBox:"0 0 70 70",width:"70",height:"70",children:u("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",rx:"5"})}),u("symbol",{id:"sugar-selection",viewBox:"-1 -1 100 100",width:"70",height:"70",children:u("rect",{width:"39",height:"39",rx:"5",fill:"none",stroke:"#0097A8",strokeWidth:"2.5"})}),u("symbol",{id:"sugar-variant",viewBox:"0 0 72 72",width:"70",height:"70",children:u("rect",{className:"monomer-body",width:"28.5",height:"28.5","data-actual-width":"28.5","data-actual-height":"28.5",x:"0.5",y:"0.5",rx:"5",stroke:"#585858",strokeWidth:"0.5"})}),u("symbol",{id:"sugar-modified-background",viewBox:"0 0 28 10",width:"27",height:"10",x:"0.7",y:"10",children:u("path",{d:"M1.5 10C0.947715 10 0.5 9.55229 0.5 9V1C0.5 0.447715 0.947715 0 1.5 0H26.5C27.0523 0 27.5 0.447715 27.5 1V9C27.5 9.55228 27.0523 10 26.5 10H1.5Z",fill:"white",fillOpacity:"0.6"})}),I("symbol",{id:"sugar-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[u("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),u("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),u("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),u("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),u("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),u("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),u("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),u("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),u("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),u("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),u("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),u("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),u("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),u("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),u("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),u("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),u("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),u("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),u("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),u("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},Kx=function(){return I(X,{children:[u("symbol",{id:"phosphate",viewBox:"0 0 70 70",width:"70",height:"70",children:u("rect",{className:"monomer-body",width:"28",height:"28","data-actual-width":"28","data-actual-height":"28",rx:"15"})}),u("symbol",{id:"phosphate-selection",viewBox:"-1 -1 75 75",width:"70",height:"70",children:u("rect",{width:"28",height:"28",rx:"15",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),u("symbol",{id:"phosphate-variant",viewBox:"0 0 70 70",width:"70",height:"70",children:u("rect",{className:"monomer-body",width:"27",height:"27","data-actual-width":"27","data-actual-height":"27",stroke:"#585858",strokeWidth:"0.5",x:"0.5",y:"0.5",rx:"15"})}),u("symbol",{id:"phosphate-modified-background",viewBox:"0 0 28 10",width:"26",height:"10",x:"1",y:"9.5",children:u("path",{d:"M2.13388 0C1.72465 0 1.35333 0.248229 1.22109 0.635509C0.753639 2.00455 0.5 3.47265 0.5 5C0.5 6.52735 0.753639 7.99545 1.22109 9.36449C1.35333 9.75177 1.72465 10 2.13389 10H25.8661C26.2753 10 26.6467 9.75177 26.7789 9.36449C27.2464 7.99545 27.5 6.52735 27.5 5C27.5 3.47265 27.2464 2.00455 26.7789 0.635509C26.6467 0.248229 26.2753 0 25.8661 0H2.13388Z",fill:"#333333",fillOpacity:"0.6"})}),u("symbol",{id:"phosphate-autochain-preview",viewBox:"-1 -1 30 30",width:"30",height:"30","data-actual-width":"30","data-actual-height":"30",children:u("rect",{width:"28",height:"28",rx:"15",strokeDasharray:"4 4"})})]})},Yx=function(){return I(X,{children:[u("symbol",{id:"rna-base",viewBox:"-16 0 65 65",width:"65",height:"95",children:u("rect",{width:"22.5",height:"22.5","data-actual-width":"31.82","data-actual-height":"31.82",rx:"1",x:"-11.25",y:"-11.25",transform:"rotate(45)",className:"monomer-body"})}),u("symbol",{id:"rna-base-selection",viewBox:"-15.75 -0.25 65 65",width:"65",height:"95",children:u("rect",{width:"21",height:"21",rx:"1",x:"-10.5",y:"-10.5",transform:"rotate(45)",stroke:"#0097A8",strokeWidth:"1.5",fill:"none"})}),u("symbol",{id:"rna-base-variant",viewBox:"-16 0 65 65",width:"65",height:"94",children:u("rect",{width:"21.5",height:"21.5","data-actual-width":"30","data-actual-height":"30",stroke:"#585858",strokeWidth:"0.5",rx:"1",x:"-10.25",y:"-10.25",transform:"rotate(45)",className:"monomer-body"})}),u("symbol",{id:"rna-base-modified-background",viewBox:"0 0 32 10",width:"30",height:"9",x:"0.8",y:"10.8",children:u("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30156 10C6.03634 10 5.78199 9.89464 5.59445 9.70711L1.1508 5.26346C0.760279 4.87293 0.760279 4.23977 1.1508 3.84924L4.70715 0.292893C4.89469 0.105357 5.14904 0 5.41426 0H26.5858C26.851 0 27.1054 0.105357 27.2929 0.292893L30.8493 3.84924C31.2398 4.23977 31.2398 4.87293 30.8493 5.26346L26.4056 9.70711C26.2181 9.89464 25.9637 10 25.6985 10H6.30156Z",fill:"#333333",fillOpacity:"0.6"})}),I("symbol",{id:"rna-base-autochain-preview",viewBox:"0 0 36 36",width:"36",height:"36","data-actual-width":"36","data-actual-height":"36",children:[u("path",{d:"M2.77636 20.2837L1.83359 19.341C1.05254 18.5599 1.05254 17.2936 1.83359 16.5125L2.77468 15.5715"}),u("path",{d:"M15.7398 33.2465L16.6826 34.1893C17.4636 34.9704 18.73 34.9704 19.511 34.1893L20.4521 33.2482"}),u("path",{d:"M20.4412 2.61969L19.4984 1.67691C18.7173 0.89586 17.451 0.895861 16.67 1.67691L15.7289 2.618"}),u("path",{d:"M33.4046 15.5825L34.3474 16.5252C35.1284 17.3063 35.1284 18.5726 34.3474 19.3537L33.4063 20.2948"}),u("path",{d:"M21.6425 32.0586L23.4089 30.2921"}),u("path",{d:"M24.5747 29.126L26.3412 27.3595"}),u("path",{d:"M27.5073 26.1934L29.2737 24.4269"}),u("path",{d:"M30.4753 23.2256L32.2418 21.4591"}),u("path",{d:"M3.96771 21.4492L5.73546 23.217"}),u("path",{d:"M6.90216 24.3838L8.6699 26.1515"}),u("path",{d:"M9.83673 27.3184L11.6045 29.0861"}),u("path",{d:"M12.8069 30.2881L14.5747 32.0558"}),u("path",{d:"M3.96497 14.3809L5.73145 12.6144"}),u("path",{d:"M6.89728 11.4482L8.66376 9.68176"}),u("path",{d:"M9.82977 8.5166L11.5963 6.75012"}),u("path",{d:"M12.7979 5.54785L14.5643 3.78137"}),u("path",{d:"M21.6326 3.78418L23.4003 5.55192"}),u("path",{d:"M24.567 6.71875L26.3347 8.48649"}),u("path",{d:"M27.5016 9.65332L29.2693 11.4211"}),u("path",{d:"M30.4718 12.623L32.2395 14.3908"})]})]})},Xx=function(){return I(X,{children:[I("symbol",{id:"unresolved-monomer",viewBox:"0 0 59 59",width:"59",height:"59",children:[u("rect",{className:"monomer-body",width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",stroke:"#333333"}),u("rect",{width:"29.5",height:"29.5","data-actual-width":"29.5","data-actual-height":"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"#585858"})]}),u("symbol",{id:"unresolved-monomer-hover",children:u("rect",{width:"29.5",height:"29.5",x:"0.5",y:"0.5",rx:"1.5",fill:"none",stroke:"#0097A8",strokeWidth:"1.5"})}),I("symbol",{id:"unresolved-monomer-autochain-preview",viewBox:"0 0 32 32",width:"32",height:"32","data-actual-width":"32","data-actual-height":"32",children:[u("path",{d:"M1 4.63574V2.63574C1 1.53117 1.89543 0.635742 3 0.635742H5"}),u("path",{d:"M1 26.6357V28.6357C1 29.7403 1.89543 30.6357 3 30.6357H5"}),u("path",{d:"M31 4.63574V2.63574C31 1.53117 30.1046 0.635742 29 0.635742H27"}),u("path",{d:"M31 26.6357V28.6357C31 29.7403 30.1046 30.6357 29 30.6357H27"}),u("path",{d:"M7.02142 30.6357L10.0214 30.6357"}),u("path",{d:"M12.0013 30.6357L15.0013 30.6357"}),u("path",{d:"M16.9816 30.6357L19.9816 30.6357"}),u("path",{d:"M22.0222 30.6357L25.0222 30.6357"}),u("path",{d:"M1.02185 6.63574L1.02185 9.63574"}),u("path",{d:"M1.02185 11.6152L1.02185 14.6152"}),u("path",{d:"M1.02185 16.5957L1.02185 19.5957"}),u("path",{d:"M1.02185 21.6367L1.02185 24.6367"}),u("path",{d:"M7.02142 0.635742L10.0214 0.635742"}),u("path",{d:"M12.0013 0.635742L15.0013 0.635742"}),u("path",{d:"M16.9816 0.635742L19.9816 0.635742"}),u("path",{d:"M22.0222 0.635742L25.0222 0.635742"}),u("path",{d:"M31.0219 6.63574L31.0219 9.63574"}),u("path",{d:"M31.0219 11.6152L31.0219 14.6152"}),u("path",{d:"M31.0219 16.5957L31.0219 19.5957"}),u("path",{d:"M31.0219 21.6367L31.0219 24.6367"})]})]})},Zx=function(){return I(X,{children:[u("symbol",{id:"nucleotide",viewBox:"0 0 84 84",width:"42",height:"42",children:u("path",{className:"monomer-body","data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)"})}),u("symbol",{id:"nucleotide-hover",viewBox:"0 0 84 84",width:"42",height:"42",children:u("path",{"data-actual-width":"42","data-actual-height":"42",d:"M43.0152 71.4019C42.3887 71.771 41.6113 71.771 40.9848 71.4019L9.25584 52.7093C8.50744 52.2684 8.1292 51.3948 8.31974 50.5473L16.6358 13.5613C16.841 12.6485 17.6516 12 18.5871 12L65.4129 12C66.3484 12 67.159 12.6485 67.3642 13.5613L75.6803 50.5473C75.8708 51.3948 75.4926 52.2684 74.7442 52.7093L43.0152 71.4019Z",transform:"rotate(180, 42, 42)",fill:"none",stroke:"#0097A8",strokeWidth:"3"})}),I("symbol",{id:"nucleotide-autochain-preview",viewBox:"0 0 36 32",width:"36",height:"32","data-actual-width":"36","data-actual-height":"32",children:[u("path",{d:"M20.3771 2.38574L18.5929 1.0722C18.2402 0.812609 17.7598 0.812609 17.4071 1.0722L15.6229 2.38574M32.6021 11.3857L34.4405 12.7392C34.7769 12.9868 34.9239 13.4174 34.8092 13.8191L34.2725 15.6985M3.39787 11.3857L1.55948 12.7392C1.2231 12.9868 1.07608 13.4174 1.19078 13.8191L1.72751 15.6985M30.8088 27.8266L30.2138 29.9168C30.0914 30.3466 29.6988 30.643 29.252 30.643H27.0063M5.19116 27.8266L5.7931 29.9194C5.91633 30.3479 6.30831 30.643 6.75414 30.643H9.00194"}),u("path",{d:"M10.5017 30.6426L13.5017 30.6426"}),u("path",{d:"M16.5032 30.6426L19.5032 30.6426"}),u("path",{d:"M22.5046 30.6426L25.5046 30.6426"}),u("path",{d:"M2.23663 17.4971L3.06363 20.3808"}),u("path",{d:"M3.83911 23.0859L4.66611 25.9697"}),u("path",{d:"M22.356 3.85059L25.5765 6.22306"}),u("path",{d:"M27.5099 7.64746L30.7304 10.0199"}),u("path",{d:"M13.605 3.85156L10.3846 6.22404"}),u("path",{d:"M8.45105 7.64844L5.23059 10.0209"}),u("path",{d:"M33.7705 17.4971L32.9435 20.3808"}),u("path",{d:"M32.168 23.0859L31.341 25.9697"})]})]})},Qx=function(){return I(X,{children:[u("path",{strokeLinecap:"round",d:"M5,0 0,2.5 5,5z",id:"arrow-marker-content"}),u("marker",{id:"arrow-marker",markerHeight:"3",markerWidth:"5",orient:"auto",refX:"2.5",refY:"1.5",children:u("use",{href:"#arrow-marker-content",transform:"rotate(180 2.5 1.5) scale(1,0.6)",strokeWidth:"1.2500",fill:"black",stroke:"none"})}),u("marker",{id:"arrow-marker-arc",markerWidth:"5",markerHeight:"5",viewBox:"0 0 5 5",refX:"5",refY:"2.5",orient:"auto",children:u("use",{href:"#arrow-marker-content",transform:"rotate(180, 2.5, 2.5)",fill:"#365CFF",stroke:"none"})})]})},Jx=function(){return u(X,{children:u("symbol",{id:"sequence-start-arrow",viewBox:"0 0 65 65",width:"65",height:"95",children:u("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u("path",{d:"M10.2802 5.09664C10.9756 5.49813 10.9756 6.50187 10.2802 6.90336L2.56467 11.3579C1.86926 11.7594 1 11.2576 1 10.4546V1.54541C1 0.742426 1.86926 0.240558 2.56467 0.642053L10.2802 5.09664Z",stroke:"#7C7C7F"})})})})},e3=C("div",{target:"e1phidy70"})({name:"1fayh9l",styles:"padding:12px;font-size:12px;color:#000"}),t3=function(){var e=ne(),r=N(W1),n=N(G1)||"Error message",o=r!=="",a=function(){e($1())};return I(re,{isOpen:o,title:n,onClose:a,testId:"info-modal-window",children:[u(re.Content,{children:u(e3,{"data-testid":"error-message-body",children:r})}),u(re.Footer,{children:u(Oe,{label:"Close",clickHandler:a,"data-testId":"info-modal-close"})})]})},r3=C("div",{target:"embh3ih3"})(function(){return{height:"100%"}},""),n3=C("div",{target:"embh3ih2"})(function(){return{display:"flex",alignItems:"center"}},""),o3=C("div",{target:"embh3ih1"})(function(){return{background:"","&.toggler-component-wrapper--disabled":{opacity:.4,pointerEvents:"none",cursor:"default"}}},""),i3=C("svg",{target:"embh3ih0"})(function(){return{"&.handCursor":{cursor:`
      url('data:image/svg+xml;base64,PHN2ZwogICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICBmaWxsPSJub25lIgogICAgICAgIHZpZXdCb3g9IjAgMCAyNCAyNCI+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjMDAwIgogICAgICAgICAgICBkPSJNMjAuNDM0IDcuNjczYy0uMS0uNi0uNzEzLTEuNzMxLTIuMzItMS43MzEtLjEyNiAwLS4yNTIuMDA3LS4zNzcuMDIzdi0uNzlhMS4wMSAxLjAxIDAgMCAwLS4wNDUtLjNjLS4xNzctLjU2NC0uODc2LTEuNjMxLTIuMjYyLTEuNjMxYTIuNTk5IDIuNTk5IDAgMCAwLS42NzYuMDg2IDIuMzk0IDIuMzk0IDAgMCAwLS4xNDYtLjIzYy0uNDUzLS42NDUtMS4xODYtMS0yLjA2My0xLS44NzcgMC0xLjU4NC4zNi0yLjAyNSAxLjAxN2EyLjQ2MSAyLjQ2MSAwIDAgMC0uMzYxLjg1IDIuNjYzIDIuNjYzIDAgMCAwLS40MDgtLjAzYy0xLjQ3NCAwLTIuMTI0IDEuMTUtMi4yNjIgMS43NTdhMS4wMzQgMS4wMzQgMCAwIDAtLjAyNC4yMjJWMTEuMWwtLjEzLS4xYy0uNTg4LS41LTIuMDM0LTEuMTIxLTMuMzkxLjAyOS0xLjM1NyAxLjE1LTEuMDE1IDIuNjY0LS40MzEgMy40NTIuNDUzLjc3MyA0LjUxMiA3LjQyNSAxMC4yMjMgNy40MjUgMy4yNSAwIDQuOTEtMS41MTIgNS43MjktMi43ODFhNi4yOTEgNi4yOTEgMCAwIDAgLjk4LTIuOFY3LjgzOGMuMDAxLS4wNTYtLjAwMy0uMTEtLjAxMS0uMTY1WiIKICAgIC8+CiAgICA8cGF0aAogICAgICAgICAgICBmaWxsPSIjZmZmIgogICAgICAgICAgICBzdHJva2U9IiNmZmYiCiAgICAgICAgICAgIGQ9Ik0xOC40NDggMTYuMjE1YTQuNDc0IDQuNDc0IDAgMCAxLS43IDEuODg3Yy0uODA1IDEuMi0yLjE1MyAxLjgtNC4wMDggMS44LTQuNzY4IDAtOC40ODQtNi40MTItOC41Mi02LjQ3NmEuNjY5LjY2OSAwIDAgMC0uMDktLjEyNmMtLjI5NC0uNDA4IDAtLjY1NS4xMDctLjc0OC4yNjctLjIyNy41NC0uMjM3LjgxLS4wMzFsMS43NyAxLjQ1MmExIDEgMCAwIDAgMS42NDQtLjc2M1Y2LjA4YS4yODcuMjg3IDAgMCAxIC4yOS0uMTQ4LjQ0LjQ0IDAgMCAxIC4zNzIuMTZ2NC43YTEgMSAwIDEgMCAyIDB2LTYuNDVjLjA2OC0uMjQ4LjMtLjI0OC40MjItLjI0OC4yIDAgLjQxNC4wMzIuNDgyLjI1NXY2LjQ0YTEgMSAwIDEgMCAyIDB2LTUuMmEuNzUuNzUgMCAwIDEgLjA3NC0uMTljLjA0OS0uMDgxLjEwOC0uMTUuMzI1LS4xNWEuMzUuMzUgMCAwIDEgLjMwNy4xNXY1LjM5YTEgMSAwIDEgMCAyIDBWOC4wNDdhLjU4My41ODMgMCAwIDEgLjM3Ny0uMWMuMDY1IDAgLjI1OC4wMDYuMzM0LjA3OGwuMDA0IDguMTlaIgogICAgLz4KPC9zdmc+Cg=='),
      auto
    `},"&.handCursorGrabbing":{cursor:`
      url('data:image/svg+xml;base64,PHN2ZwogICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICAgd2lkdGg9IjI0IgogICAgaGVpZ2h0PSIyNCIKICAgIGZpbGw9Im5vbmUiCiAgICB2aWV3Qm94PSIwIDAgMzAgMzAiCiAgPgogICAgPHBhdGgKICAgICAgZmlsbD0iI2ZmZiIKICAgICAgZD0iTTEwLjc0NCAzQzguODkgMyA3LjM4NCA0LjUyNSA3LjM4NCA2LjR2LjIyaC0uMDEyYy0xLjk5NyAwLTMuNjIyIDEuNjAyLTMuNjIyIDMuNTY4bC4wMDEgNy4wMmMwIDEuNzcgMS41MTIgMy41MTUgMy4xMTIgNS4zNjEuNzIuODMgMS45MTkgMi4yMTYgMi4wMzQgMi43MzF2MS41MjJoMTMuNDQydi0xLjU1NGMwLS41OS42MTgtMS43NyAxLjE2My0yLjgxLjkzOC0xLjc4OSAxLjk5OC0zLjgxNSAxLjk5OC01Ljk5MSAwLTMuMjU4LS4wMS02LjI0OC0uMDEtNi4yNDggMC0xLjY5Ni0xLjM5LTMuMDgtMy4xLTMuMDgtLjIwMyAwLS40LjAyLS41OTIuMDU3YTMuNjUgMy42NSAwIDAgMC0zLjAzMy0xLjYwN2MtLjM2NyAwLS43Mi4wNTMtMS4wNTUuMTUzYTMuNjM2IDMuNjM2IDAgMCAwLTMuMDktMS43MDVjLS40NDQgMC0uODcuMDgtMS4yNjQuMjI1QTMuMzQ1IDMuMzQ1IDAgMCAwIDEwLjc0NCAzWiIKICAgIC8+CiAgICA8cGF0aAogICAgICBmaWxsPSIjMDAwIgogICAgICBkPSJNMTAuNzQ0IDQuNTU0YzEgMCAxLjgwOC44MjYgMS44MDggMS44NDV2MS4xOTdjMC0xLjEwOS45MjctMi4wMDggMi4wNjgtMi4wMDggMS4xNDMgMCAyLjA2OC45IDIuMDY4IDIuMDA4djEuNTUyYzAtMS4xMS45My0yLjAwOCAyLjA3Ny0yLjAwOCAxLjE0NyAwIDIuMDc2Ljg5OSAyLjA3NiAyLjAwOHYxLjA2OEExLjU0IDEuNTQgMCAwIDEgMjIuMzkgOC42OWMuODU2IDAgMS41NDguNjg0IDEuNTQ4IDEuNTMgMCAwIC4wMSAyLjk4OC4wMSA2LjI0NCAwIDMuMjU3LTMuMTYxIDYuNjM2LTMuMTYxIDguODAySDEwLjQ1YzAtMS45NC01LjE0Ni01Ljc3My01LjE0Ni04LjA2MXYtNy4wMmMwLTEuMTEyLjkyNi0yLjAxNCAyLjA3LTIuMDE1djQuMDUxYzAgLjM0Mi4zNS42Mi43ODEuNjIuNDMyIDAgLjc4Mi0uMjc4Ljc4Mi0uNjJWNi40YzAtMS4wMi44MDktMS44NDUgMS44MDctMS44NDVabTAtMS41NTRDOC44OSAzIDcuMzg0IDQuNTI1IDcuMzg0IDYuNHYuMjJoLS4wMTJjLTEuOTk3IDAtMy42MjIgMS42MDItMy42MjIgMy41NjhsLjAwMSA3LjAyYzAgMS43NyAxLjUxMiAzLjUxNSAzLjExMiA1LjM2MS43Mi44MyAxLjkxOSAyLjIxNiAyLjAzNCAyLjczMXYxLjUyMmgxMy40NDJ2LTEuNTU0YzAtLjU5LjYxOC0xLjc3IDEuMTYzLTIuODEuOTM4LTEuNzg5IDEuOTk4LTMuODE1IDEuOTk4LTUuOTkxIDAtMy4yNTgtLjAxLTYuMjQ4LS4wMS02LjI0OCAwLTEuNjk2LTEuMzktMy4wOC0zLjEtMy4wOC0uMjAzIDAtLjQuMDItLjU5Mi4wNTdhMy42NSAzLjY1IDAgMCAwLTMuMDMzLTEuNjA3Yy0uMzY3IDAtLjcyLjA1My0xLjA1NS4xNTNhMy42MzYgMy42MzYgMCAwIDAtMy4wOS0xLjcwNWMtLjQ0NCAwLS44Ny4wOC0xLjI2NC4yMjVBMy4zNDUgMy4zNDUgMCAwIDAgMTAuNzQ0IDNaIgogICAgLz4KICA8L3N2Zz4='),
      auto
    `}}},"");function a3(){var t,e=N(jc),r=x.useState(!1),n=_(r,2),o=n[0],a=n[1],i;try{i=xs.getKetcher(e)}catch(c){Gt.error("Failed to get ketcher instance with id ".concat(e),c)}var l=x.useCallback(function(){return a(!0)},[a]),s=x.useCallback(function(){return a(!1)},[a]);return x.useEffect(function(){var c,d,h;return(c=i)===null||c===void 0||c.eventBus.addListener(Rt.LOADING,l),(d=i)===null||d===void 0||d.eventBus.addListener(Rt.SUCCESS,s),(h=i)===null||h===void 0||h.eventBus.addListener(Rt.FAILURE,s),function(){var f,v,p;(f=i)===null||f===void 0||f.eventBus.removeListener(Rt.LOADING,l),(v=i)===null||v===void 0||v.eventBus.removeListener(Rt.SUCCESS,s),(p=i)===null||p===void 0||p.eventBus.removeListener(Rt.FAILURE,s)}},[(t=i)===null||t===void 0?void 0:t.eventBus,s,l]),o}function Hl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Vl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Hl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function l3(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=s3(t))||e){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var c=r.next();return i=c.done,c},e:function(c){l=!0,a=c},f:function(){try{i||r.return==null||r.return()}finally{if(l)throw a}}}}function s3(t,e){if(t){if(typeof t=="string")return Ul(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ul(t,e):void 0}}function Ul(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function c3(){var t=ne(),e=N(ae),r=N(j1);x.useEffect(function(){if(e){var n=e.monomersLibrary,o=r.length?r:e.defaultRnaPresetsLibraryItems,a=ue(ol(n,o,!0)),i=rr(),l=[],s=a.map(function(p){return p.name});if(i){var c=l3(i),d;try{for(c.s();!(d=c.n()).done;){for(var h=d.value,f=0,v=h.name;s.includes(v);)f++,v="".concat(h.name).concat("_Copy".repeat(f));v!==h.name&&Kc(Vl(Vl({},h),{},{name:v}))}}catch(p){c.e(p)}finally{c.f()}i=rr(),l=ol(n,i)}return t(Bo(n)),t(O1(null)),t(hy(a)),i&&t(fy(l)),t(my()),function(){t(Bo([])),t(gy())}}},[e,r])}function u3(){x.useEffect(function(){var t=nn.HELP_LINK||"master",e="https://github.com/epam/ketcher/blob/".concat(t,"/documentation/help.md#ketcher-macromolecules-mode"),r=function(o){if(!o.defaultPrevented){var a=o.target,i=!!(a&&(a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||a.closest('[contenteditable="true"]')));if(!i){var l=o.key==="?"||o.key==="/"&&o.shiftKey;if(l&&!o.repeat){var s,c;o.preventDefault(),(s=window.open(e,"_blank"))===null||s===void 0||(c=s.focus)===null||c===void 0||c.call(s)}}}};return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}},[])}var d3=C("div",{target:"ex562360"})({name:"1vtgpt7",styles:"position:absolute;top:0;left:0;height:100%;width:100%;display:flex;justify-content:center;align-items:center"}),h3=function(){return u(d3,{children:u(Fn,{})})},f3=function(e){e.requestFullscreen&&e.requestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},p3=function(){document.exitFullscreen&&document.exitFullscreen()||document.msExitFullscreen&&document.msExitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen()},v3=function(){return!!(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)},m3=C("div",{target:"e1yct69a0"})({name:"14ocoqf",styles:"display:flex;& svg:first-of-type{display:flex;justify-content:center;align-items:center;width:24px;height:24px;padding:2px;border-radius:4px;}"}),g3=function(e){var r=x.useState(v3()),n=_(r,2),o=n[0],a=n[1],i=function(){var s=document.querySelector(it)||document.documentElement;o?p3():f3(s),a(!o)};return u(m3,{className:e.className,children:u(Kt,{onClick:i,iconName:o?"fullscreen-exit":"fullscreen-enter",testId:"fullscreen-mode-button"})})},Hu=function(){return bt.useContext(_i)},y3=C(Kt,{target:"e1erwxoo0"})({name:"1y95nj0",styles:"margin:2px;outline:none"});function $i(){var t;(t=document.activeElement)===null||t===void 0||t.blur()}var b3=C(Cn,{target:"e1ann9o40"})({name:"2gmlyg",styles:"display:flex;justify-content:space-between;font-weight:400;font-size:12px;line-height:14px;padding:7px 8px;text-transform:none;color:#333333;width:max-content"}),Yo=function(e){var r=e.itemId,n=e.title,o=n===void 0?"":n,a=e.disabled,i=e.testId,l=e.onClick,s=e.type,c=s===void 0?"icon-button":s,d=Hu(),h=d.isActive,f=d.activate,v=x.useCallback(function(){f(r),$i(),l&&l()},[f,r]),p=h(r),g=p?" active":"";return u(X,{children:c==="icon-button"?u(y3,{title:o,className:r+g,isActive:p,onClick:v,iconName:r,testId:i,disabled:a}):u(b3,{title:o,onClick:v,disabled:a,"data-testid":i,children:o})})},x3=C(ie,{shouldForwardProp:function(e){return e!=="isActive"},target:"e13kdqxv4"})("position:absolute;height:7px;width:7px;right:3px;bottom:3px;cursor:pointer;path{fill:",function(t){var e=t.isActive;return e?"white":void 0},";}"),w3=C("div",{target:"e13kdqxv3"})({name:"k5saax",styles:"display:flex;position:relative;align-items:center;&:active{.dropdown{fill:white;}}"}),M3=C("div",{target:"e13kdqxv2"})("display:flex;border-radius:4px;flex-direction:",function(t){var e=t.isVertical;return e?"column":"row"},";z-index:1;background-color:white;padding:2px;width:",function(t){var e=t.isVertical,r=t.isAutoSize;return e&&!r?"38px":"auto"},";height:",function(t){var e=t.isVertical,r=t.isAutoSize;return e||r?"auto":"38px"},";"),C3=C(Ah,{target:"e13kdqxv1"})({name:"a4hmbt",styles:"position:absolute"}),S3=C("div",{target:"e13kdqxv0"})({name:"a1qh1t",styles:"display:flex;align-items:center;position:relative;width:32px;height:32px;padding:0;justify-content:center;border-radius:2px"});function Wl(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function A3(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Wl(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wl(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var k3=function(e){var r=e.children,n=e.vertical,o=n===void 0?!1:n,a=e.autoSize,i=a===void 0?!1:a,l=e.disabled,s=l===void 0?!1:l,c=e.needOpenByMenuItemClick,d=c===void 0?!1:c,h=e.testId,f=e.layoutModeButton,v=f===void 0?!1:f,p=e.generalTitle,g=e.activeItem,y=e.subMenuId,b=ne(),M=x.useRef(null),A=x.useState(!1),m=_(A,2),w=m[0],S=m[1],k=Hu(),E=k.isActive,O=Ih([M,w,o,it]),D=_(O,1),P=D[0],T=N(w1(y)),j=y?T:null,L=function(){s||S(function(G){return!G})},F=function(){w&&S(!1)},R=bt.Children.map(r,function($){return $.type===Yo?$:null}),q=R.map(function($){return $.props.itemId}).filter(function($){return $}),H=q.filter(function($){return E($)}),B=H[0];x.useEffect(function(){y&&B&&B!==j&&b(v1({groupName:y,activeItemName:B}))},[b,y,B,j]);var z=g??(B||j||q[0]),W=R.find(function($){return $.props.itemId===z}),K=W?.props.testId,pe=p??W?.props.title,Q=document.querySelector(it);return u(w3,{"data-testid":h,ref:M,children:I(X,{children:[I(S3,{children:[u(Yo,{disabled:s,itemId:z,title:pe,testId:K,onClick:d?L:mt}),w||u(x3,{className:"dropdown",name:"dropdown",onClick:L,isActive:E(z),dataTestId:"dropdown-expand"})]}),Q&&An.createPortal(u(C3,{in:w,timeout:0,style:A3({},P),unmountOnExit:!0,onClick:F,children:u(bs,{onClickAway:F,children:u(M3,{isVertical:o,isAutoSize:i,islayoutModeButton:v,"data-testid":"multi-tool-dropdown",children:R.map(function($){return $})})})}),Q)]})})},I3=C("div",{target:"e1fh0ozy3"})(function(t){var e=t.theme,r=t.isHorizontal;return{backgroundColor:e.ketcher.color.background.primary,borderRadius:"4px",display:"flex",flexDirection:r?"row":"column",zIndex:e.ketcher.zIndex.toolbar}},""),P3=C("hr",{target:"e1fh0ozy2"})("width:18px;margin:6px 0;align-self:center;border-width:thin 0px 0px 0px;border-style:solid;border-color:",function(t){var e=t.theme;return e.ketcher.color.divider},";"),Xo=C("hr",{target:"e1fh0ozy1"})("height:18px;margin:0px 6px;align-self:center;border-width:0px thin 0px 0px;border-style:solid;border-color:",function(t){var e=t.theme;return e.ketcher.color.divider},";"),E3=C("div",{target:"e1fh0ozy0"})(function(t){var e=t.theme,r=t.isHorizontal;return{display:"flex",flexDirection:r?"row":"column",flexWrap:"nowrap",alignItems:"center",backgroundColor:e.ketcher.color.background.primary,borderRadius:"2px",width:r?void 0:"32px",marginBottom:r?void 0:"8px","> :last-child":r?void 0:{marginBottom:0}}},""),Vu=function(e){var r=e.children,n=e.divider,o=n===void 0?!1:n,a=e.isHorizontal,i=bt.Children.map(r,function(l){return l});return I(X,{children:[u(E3,{isHorizontal:a,children:i.map(function(l){return l})}),o&&(a?u(Xo,{}):u(P3,{}))]})},J=function(e){var r=e.children,n=e.onItemClick,o=e.activeMenuItems,a=e.testId,i=e.isHorizontal,l=bt.useMemo(function(){return{isActive:function(d){return o?o.includes(d):!1},activate:function(d){n(d)}}},[o,n]),s=bt.Children.map(r,function(c){return c.type===Vu?c:null});return u(_i.Provider,{value:l,children:u(I3,{"data-testid":a,isHorizontal:i,children:s.map(function(c){return c})})})};J.Group=Vu;J.Item=Yo;J.Submenu=k3;var O3=function(){var e=N(ae),r=_t(),n=x.useState(r),o=_(n,2),a=o[0],i=o[1],l=N(Ze),s={isActive:function(d){return a===d},activate:function(d){d!==a&&(i(d),e?.events.selectMode.dispatch(d),e?.events.layoutModeChange.dispatch(d))}};return x.useEffect(function(){i(r)},[r]),u(_i.Provider,{value:s,children:I(J.Submenu,{disabled:l,testId:"layout-mode",vertical:!0,needOpenByMenuItemClick:!0,layoutModeButton:!0,children:[u(J.Item,{itemId:"sequence-layout-mode",testId:"sequence-layout-mode",title:"Switch to sequence layout mode"}),u(J.Item,{itemId:"snake-layout-mode",testId:"snake-layout-mode",title:"Switch to snake layout mode"}),u(J.Item,{itemId:"flex-layout-mode",testId:"flex-layout-mode",title:"Switch to flex layout mode"})]})})};function N3(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=D3(t))||e){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var c=r.next();return i=c.done,c},e:function(c){l=!0,a=c},f:function(){try{i||r.return==null||r.return()}finally{if(l)throw a}}}}function D3(t,e){if(t){if(typeof t=="string")return Gl(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gl(t,e):void 0}}function Gl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}var L3=function(e){var r=[],n=N3(e),o;try{for(n.s();!(o=n.n()).done;){var a=o.value,i=a.node,l=a.nodeIndexOverall,s=a.isNucleosideConnectedAndSelectedWithPhosphate,c=a.hasR1Connection,d=a.twoStrandedNode,h=!!d?.antisenseNode;if(i instanceof yr){var f,v,p;r.push({type:rt.Nucleotide,baseLabel:i==null||(f=i.rnaBase)===null||f===void 0?void 0:f.label,sugarLabel:i==null||(v=i.sugar)===null||v===void 0?void 0:v.label,phosphateLabel:i==null||(p=i.phosphate)===null||p===void 0?void 0:p.label,rnaBaseMonomerItem:i.rnaBase instanceof $e?i.rnaBase.variantMonomerItem:i.rnaBase.monomerItem,hasR1Connection:c,nodeIndexOverall:l,hasAntisense:h})}else if(i instanceof br){var g,y;r.push({type:rt.Nucleoside,baseLabel:i==null||(g=i.rnaBase)===null||g===void 0?void 0:g.label,sugarLabel:i==null||(y=i.sugar)===null||y===void 0?void 0:y.label,rnaBaseMonomerItem:i.rnaBase instanceof $e?i.rnaBase.variantMonomerItem:i.rnaBase.monomerItem,isNucleosideConnectedAndSelectedWithPhosphate:s,hasR1Connection:c,nodeIndexOverall:l,hasAntisense:h})}else if(i?.monomer instanceof Ds){var b;r.push({type:rt.Phosphate,phosphateLabel:i==null||(b=i.monomer)===null||b===void 0?void 0:b.label,nodeIndexOverall:l,hasAntisense:h})}}}catch(M){n.e(M)}finally{n.f()}return r};function _3(t){var e=t.node;return e instanceof yr||e instanceof br||e?.monomer instanceof Ds}var T3=function(e){for(var r="",n=e.length===1?e[0]:ye.merge.apply(void 0,[{}].concat(ue(e))),o=0,a=["sugarLabel","baseLabel","phosphateLabel"];o<a.length;o++){var i=a[o],l=ye.get(n,i,"");i==="baseLabel"?r+="(".concat(l,")"):r+=l}return r},R3=function(e){if(e!=null&&e.length){for(var r=ye.flatten(e),n=r.length,o=xn(r),a,i=!1,l=!0,s=!1,c=!0,d=L3(r),h=0;h<d.length;h++){var f=d[h],v=d[h-1],p=f.type===rt.Nucleotide||f.type===rt.Nucleoside,g=v?.isNucleosideConnectedAndSelectedWithPhosphate;p&&(i=!0),p||g?f.hasR1Connection&&(c=!1):(c=!1,l=!1),f.hasAntisense&&(s=!0)}return n>o&&(r.every(_3)||(l=!1)),n===1||o===1&&l?a=T3(d):a=l?"".concat(o," nucleotides"):"".concat(n," elements"),{title:a,selectedSequenceLabeledNodes:d,isSelectedOnlyNucleoelements:l,isSelectedAtLeastOneNucleoelement:i,isSequenceFirstsOnlyNucleoelementsSelected:c,hasAntisense:s}}};function Kl(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return t.every(function(e){return e.every(function(r){return Ms(r.twoStrandedNode)})})}function so(t){return t?.monomers.some(function(e){return e.hydrogenBonds.length!==0})}var j3=function(e){return e.map(function(r){return r.monomerItem.props.MonomerNaturalAnalogCode}).sort().join("")},Yl=function(e){var r=e.monomerItem,n=r.props.MonomerNaturalAnalogCode==="A"||r.props.MonomerNaturalAnalogCode==="C"||r.props.MonomerNaturalAnalogCode==="G"||r.props.MonomerNaturalAnalogCode==="T"||r.props.MonomerNaturalAnalogCode==="U";if(n)return!0;if(!e.monomerItem.isAmbiguous||e.subtype===eh.MIXTURE)return!1;var o="ACGT",a="ACGU",i="CGT",l="CGU",s="AGT",c="AGU",d="ACT",h="ACU",f="GT",v="GU",p="AT",g="AU",y="CT",b="CU",M="AC",A="AG",m="CG",w="ACG",S=[o,a,i,l,s,c,d,h,f,v,p,g,y,b,M,A,m,w],k=j3(e.monomers);return S.some(function(E){return E===k})},gt=function(e){return e?.some(function(r){var n=r instanceof Lr&&As(r);return r instanceof ks&&(r.hydrogenBonds.length>0||r.covalentBonds.length>1)||Fd(r)&&!Yl(r)||n&&(n.hydrogenBonds.length>0||!Yl(n))})},B3=function(e){return e?.every(function(r){return r instanceof Lr?r.label===Ns.SUGAR_DNA:!0})},F3=function(e){return e?.every(function(r){return r instanceof Lr?r.label===Ns.SUGAR_RNA:!0})},ot=function(e){return e?.some(function(r){return r instanceof ks&&zd(r)||r instanceof Lr&&As(r)})},Nr="aminoAcidModification-",z3="Natural amino acid",Uu=function(e){var r=new Set,n=new Set,o=new Map,a=Dr.provideEditorInstance();e.forEach(function(l){var s,c=l.monomerItem.props.MonomerNaturalAnalogCode;!(l instanceof Es)||!c||(o.has(c)||o.set(c,[]),(s=o.get(c))===null||s===void 0||s.push(l))}),a?.monomersLibrary.forEach(function(l){var s,c=o.get((s=l.props)===null||s===void 0?void 0:s.MonomerNaturalAnalogCode);if(!(!l.props||!c)){var d=l.props.modificationTypes;d&&d.forEach(function(h){if(c.some(function(f){return f.label!==l.label&&!Yd(f,l)})){n.add(h);return}c.every(function(f){return f.label===l.label})||r.add(h)})}});var i=ue(r.values()).filter(function(l){return!n.has(l)}).map(function(l){var s=Xd(e,l,a.monomersLibrary);return{name:"".concat(Nr).concat(l),title:l,onMouseOver:function(){a.transientDrawingView.showModifyAminoAcidsView({monomersToModify:ue(s.keys())}),a.transientDrawingView.update()},onMouseOut:function(){a.transientDrawingView.hideModifyAminoAcidsView(),a.transientDrawingView.update()}}});return i.sort(function(l,s){var c=l.title.toLowerCase(),d=s.title.toLowerCase(),h=z3.toLowerCase();return c===h?-1:d===h?1:c.localeCompare(d)}),i},Wu=function(e,r){var n,o,a=r==null||(n=r.target)===null||n===void 0?void 0:n.__data__,i=a==null||(o=a.node)===null||o===void 0?void 0:o.monomer,l=(e.length?e:i?[i]:[]).filter(function(s){return s instanceof Es});return l},se;(function(t){t.title="sequence_menu_title",t.createRnaAntisenseStrand="create_antisense_rna_chain",t.createDnaAntisenseStrand="create_antisense_dna_chain",t.modifyInRnaBuilder="modify_in_rna_builder",t.modifyAminoAcids="modify_amino_acids",t.establishHydrogenBond="establish_hydrogen_bond",t.deleteHydrogenBond="delete_hydrogen_bond",t.editSequence="edit_sequence",t.startNewSequence="start_new_sequence",t.copy="copy",t.paste="paste",t.delete="delete"})(se||(se={}));var $3=function(e){var r,n,o=e.selections,a=e.contextMenuEvent,i=N(ae),l=ne(),s=R3(o),c=(o==null||(r=o.flat())===null||r===void 0?void 0:r.flatMap(function(m){return m.node.monomers}))||[],d=Wu(c,a),h=N(Ze),f=_t()==="sequence-layout-mode",v=Uu(d),p=(n=o?.some(function(m){return m.some(function(w){return so(w.node)})}))!==null&&n!==void 0?n:!1,g=c?.length>0&&ot(c),y=!Kl(o)||p,b=[{name:se.title,title:s?.title,isMenuTitle:!0,disabled:!0,hidden:function(w){var S=w.props;return!(S!=null&&S.sequenceItemRenderer)||!(s!=null&&s.isSelectedAtLeastOneNucleoelement)}},{name:se.copy,title:"Copy",icon:u(ie,{name:"copyMenu"}),disabled:c?.length===0},{name:se.paste,title:"Paste",icon:u(ie,{name:"pasteNavBar"}),disabled:!1,separator:!0},{name:se.editSequence,title:"Edit sequence",disabled:!1,hidden:function(w){var S=w.props;return!(S!=null&&S.sequenceItemRenderer)}},{name:se.startNewSequence,title:"Start new sequence",disabled:!1,separator:g||y},{name:se.createRnaAntisenseStrand,title:"Create RNA antisense strand",disabled:gt(c),hidden:function(){return!c||!ot(c)}},{name:se.createDnaAntisenseStrand,title:"Create DNA antisense strand",disabled:gt(c),hidden:function(){return!c||!ot(c)}},{name:se.establishHydrogenBond,title:"Establish Hydrogen Bonds",disabled:function(w){var S,k=w.props;return o?.length===0?Ms(k==null||(S=k.sequenceItemRenderer)===null||S===void 0?void 0:S.twoStrandedNode):Kl(o)},hidden:function(w){var S=w.props;return!(S!=null&&S.sequenceItemRenderer)}},{name:se.deleteHydrogenBond,title:"Remove hydrogen bonds",disabled:function(w){var S,k=w.props;return o?.length===0?!so(k==null||(S=k.sequenceItemRenderer)===null||S===void 0?void 0:S.node):!(o!=null&&o.some(function(E){return E.some(function(O){return so(O.node)})}))},hidden:function(w){var S=w.props;return!(S!=null&&S.sequenceItemRenderer)}},{name:se.modifyInRnaBuilder,title:"Modify in RNA Builder...",disabled:!(s!=null&&s.isSelectedOnlyNucleoelements)||s.hasAntisense,hidden:function(w){var S=w.props;return!(S!=null&&S.sequenceItemRenderer)||!(s!=null&&s.isSelectedAtLeastOneNucleoelement)}},{name:se.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!v.length,subMenuItems:v,separator:!0},{name:se.delete,title:"Delete",disabled:c?.length===0,icon:u(ie,{name:"deleteMenu"})}],M=function(w){var S,k=w.id,E=w.props;if(i)switch(!0){case k===se.modifyInRnaBuilder:i.events.turnOnSequenceEditInRNABuilderMode.dispatch(),l(Ir(kr.RNA)),l(st(!0)),l(Or({})),l(Pt(null)),s!=null&&(S=s.selectedSequenceLabeledNodes)!==null&&S!==void 0&&S.length&&s!==null&&s!==void 0&&s.title&&(l(tu(s?.title)),l(Oi(s?.selectedSequenceLabeledNodes)),l(cy(s?.isSequenceFirstsOnlyNucleoelementsSelected)));break;case k===se.startNewSequence:i.events.startNewSequence.dispatch(E.sequenceItemRenderer);break;case k===se.editSequence:i.events.editSequence.dispatch(E.sequenceItemRenderer);break;case k===se.createRnaAntisenseStrand:i.events.createAntisenseChain.dispatch(!1);break;case k===se.createDnaAntisenseStrand:i.events.createAntisenseChain.dispatch(!0);break;case k===se.establishHydrogenBond:i.events.establishHydrogenBond.dispatch(E.sequenceItemRenderer);break;case k===se.deleteHydrogenBond:{var O,D=Zd.sequenceViewModel,P=D.chainsCollection.monomerToChain,T=new Map,j=o!=null&&o.length?o.reduce(function(R,q){return[].concat(ue(R),ue(q))},[]).map(function(R){return R.twoStrandedNode}):[(O=E.sequenceItemRenderer)===null||O===void 0?void 0:O.twoStrandedNode];j.forEach(function(R){if(R.antisenseChain&&R.antisenseNode&&!(R.antisenseNode instanceof Qd||R.antisenseNode instanceof ws)){T.has(R.antisenseChain)||T.set(R.antisenseChain,new Set);var q=T.get(R.antisenseChain);if(!q)return;q.add(R)}});var L=!1;T.forEach(function(R,q){var H=ue(R.values())[0],B=H.chain,z=new Set(ue(R.values()).map(function(K){return K.antisenseNode})),W=q.nodes.some(function(K){return!z.has(K)&&K.monomers.some(function(pe){return pe.hydrogenBonds.some(function(Q){var $=Q.getAnotherMonomer(pe),G=$&&P.get($);return G===B})})});W||(L=!0)}),L?i.events.openConfirmationDialog.dispatch({title:"Deletion of all Hydrogen Bonds",confirmationText:"Deleting all hydrogen bonds will cause the separation of two chains. Do you wish to proceed?",onConfirm:function(){i.events.deleteHydrogenBond.dispatch(E.sequenceItemRenderer)}}):i.events.deleteHydrogenBond.dispatch(E.sequenceItemRenderer);break}case k?.startsWith(Nr):{var F=k?.replace(Nr,"");i.events.modifyAminoAcids.dispatch({monomers:d,modificationType:F});break}case k==="copy":i.events.copySelectedStructure.dispatch();break;case k==="paste":i.events.pasteFromClipboard.dispatch();break;case k==="delete":i.events.deleteSelectedStructure.dispatch();break}},A=document.querySelector(it);return A&&f&&!h?An.createPortal(u(ji,{id:xt.FOR_SEQUENCE,handleMenuChange:M,menuItems:b}),A):null},q3=C("div",{target:"e1amohl43"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),H3=C("p",{target:"e1amohl42"})("width:calc(100% - 16px);padding:8px;color:",function(t){return t.theme.ketcher.color.text.primary},";background-color:#cceaee;font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:left;margin:0;"),V3=C(Rs,{target:"e1amohl41"})({name:"156nqlv",styles:"height:100%;width:100%;padding:0 8px"}),U3=C("div",{target:"e1amohl40"})({name:"10sp49k",styles:"width:100%;display:flex;gap:8px;padding:0 8px 4px"}),Zo=function(e){var r=e.monomerCaps,n=e.attachmentPointsToBonds;return x.useMemo(function(){var o=[],a=[];return r?(Object.entries(r).forEach(function(i){var l=_(i,2),s=l[0],c=l[1],d=!!n?.[s];d&&a.push(s);var h={id:s,label:Fu(c),connected:d};o.push(h)}),{preparedAttachmentPointsData:o,connectedAttachmentPoints:a}):{preparedAttachmentPointsData:o,connectedAttachmentPoints:a}},[r,n])},W3=function(e){var r=e.idtAliases,n=e.attachmentPointsToBonds,o=e.monomerClass;return x.useMemo(function(){if(!r)return null;var a=r.base,i=r.modifications;if(!i)return Te(a);var l=i.endpoint5,s=i.internal,c=i.endpoint3;if(n){var d=n.R1,h=n.R2;if(o===tt.Phosphate&&d&&!(d instanceof ph)&&d.firstMonomer instanceof Lr)return null;if(d!==null&&h===null)return Te(c??s);if(d===null&&h!==null)return Te(l??s);if(d!==null&&h!==null){var f;return Te((f=s??l)!==null&&f!==void 0?f:c)}else{var v;return Te((v=l??s)!==null&&v!==void 0?v:c)}}var p=Object.values(i).every(function(y){return y.includes(a)});if(c&&l&&s&&p)return Te(a);var g={};return Object.values(i).forEach(function(y){var b=Te(y)||"",M=[b.charAt(0),b.slice(1)],A=M[0],m=M[1];g[m]=g[m]?[].concat(ue(g[m]),[A]):[A]}),Object.entries(g).map(function(y){var b=_(y,2),M=b[0],A=b[1];return"(".concat(A.join(", "),")").concat(M)}).join(", ")},[r,n,o])},G3=W3,K3=C("div",{target:"e112ss7f3"})({name:"1m2mukt",styles:"flex:1;display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:12px;line-height:14px"}),Y3=C("div",{target:"e112ss7f2"})("display:flex;align-items:center;gap:2px;border-radius:4px;background-color:",function(t){var e=t.connected;return e?"#E1E5EA":"transparent"},";padding:",function(t){var e=t.connected;return e?"4px":"0"},";color:",function(t){var e=t.connected;return e?"#8A8B8E":"inherit"},";"),X3=C("span",{target:"e112ss7f1"})({name:"f3vz0n",styles:"font-weight:500"}),Z3=C("span",{target:"e112ss7f0"})({name:"16ceglb",styles:"font-weight:600"}),Q3=x.memo(function(t){var e=t.preparedAttachmentPointsData;return e.length?u(K3,{children:e.map(function(r){var n=r.id,o=r.connected,a=r.label;return I(Y3,{connected:o,children:[I(X3,{children:[n,!o&&":"]}),!o&&u(Z3,{children:a})]},n)})}):null}),J3=Q3,e5=C("span",{target:"e1v1msbx3"})("max-width:",function(t){var e=t.preset;return e?"100%":"50%"},";display:flex;align-items:center;font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:500;line-height:normal;color:",function(t){return t.theme.ketcher.color.text.lightgrey},";padding-left:",function(t){var e=t.preset;return e?"0":"8px"},";border-left:",function(t){var e=t.preset;return e?"none":"1px solid #D9DCEA"},";"),t5=C("p",{target:"e1v1msbx2"})({name:"ti75j2",styles:"margin:0"}),r5=C("span",{target:"e1v1msbx1"})({name:"1b7n4tc",styles:"color:#7c7c7c"}),n5=C("span",{target:"e1v1msbx0"})({name:"dtvj5",styles:"color:#585858;text-wrap:wrap"}),o5=x.memo(function(t){var e=t.idtAliasesText,r=t.preset;return u(e5,{preset:r,children:I(t5,{children:[u(r5,{children:"IDT: "}),u(n5,{children:e})]})})}),Gu=o5,i5=function(e){var r,n=e.className,o=N(Br),a=o.monomer,i=o.attachmentPointsToBonds,l=a?.props.idtAliases,s=Zo({monomerCaps:a?.props.MonomerCaps,attachmentPointsToBonds:i}),c=s.preparedAttachmentPointsData,d=s.connectedAttachmentPoints,h=G3({idtAliases:l,attachmentPointsToBonds:i,monomerClass:a?.props.MonomerClass});if(!a)return null;var f=a.props.unresolved,v=f?a.label:(r=a.struct)===null||r===void 0?void 0:r.name;return(a.struct||f)&&I(q3,{className:n,"data-testid":"polymer-library-preview",children:[v&&u(H3,{"data-testid":"preview-tooltip-title",children:v}),f?u(zu,{}):u(V3,{struct:a.struct,options:{connectedMonomerAttachmentPoints:d,usageInMacromolecule:tn.MonomerPreview,labelInPreview:!0,needCache:!1}}),I(U3,{children:[u(J3,{preparedAttachmentPointsData:c}),h&&u(Gu,{idtAliasesText:h})]})]})},a5=C(i5,{target:"e86yc5p0"})("width:",en.width+"px",";height:",en.height+"px",";"),l5=a5,s5=C("div",{target:"ec5fs975"})("display:flex;flex-direction:column;align-items:center;gap:8px;padding:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),c5=C("div",{target:"ec5fs974"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),u5=C("div",{target:"ec5fs973"})("font-size:",function(t){return t.theme.ketcher.font.size.regular},";line-height:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:600;padding-right:2px;"),d5=C("div",{target:"ec5fs972"})("color:",function(t){return t.theme.ketcher.color.text.lightgrey},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:400;white-space:nowrap;"),h5=C("p",{target:"ec5fs971"})("color:",function(t){return t.theme.ketcher.color.text.primary},";font-size:",function(t){return t.theme.ketcher.font.size.regular},";font-weight:700;word-break:break-all;text-align:center;margin-top:0;margin-bottom:8px;"),f5=C(ie,{target:"ec5fs970"})("height:14px;width:14px;margin-right:4px;color:",function(t){var e=t.theme;return e.ketcher.color.icon.grey},";stroke:",function(t){var e=t.theme;return e.ketcher.color.icon.grey},";"),p5=function(e){var r=e.presetName,n=e.position,o=e.idtAliases;return x.useMemo(function(){if(!r||!o)return null;if(r.includes("MOE")){var a,i,l,s=o.base,c=o.modifications,d=(a=Te(c?.endpoint5))!==null&&a!==void 0?a:"5".concat(s),h=(i=Te(c?.internal))!==null&&i!==void 0?i:"i".concat(s),f=(l=Te(c?.endpoint3))!==null&&l!==void 0?l:"3".concat(s);switch(n){case Ve.Library:return"".concat(d,", ").concat(h);case Ve.ChainStart:return d;case Ve.ChainMiddle:return h;case Ve.ChainEnd:return f}}return Te(o.base)},[r,n,o])},v5=p5,m5=["sugar","base","phosphate"],g5=function(e){var r=e.className,n=N(Br),o=n.monomers,a=n.name,i=n.position,l=n.idtAliases,s=_(o,2),c=s[1],d=a??c?.props.Name,h=v5({presetName:d,position:i,idtAliases:l});return I(s5,{className:r,style:{alignItems:"flex-start"},"data-testid":"polymer-library-preview",children:[u(h5,{"data-testid":"preview-tooltip-title",children:d}),o.map(function(f,v){return f&&I(c5,{children:[u(f5,{name:m5[v]}),u(u5,{children:f.label}),I(d5,{children:["(",f.props.Name,")"]})]},v)}),h&&u(Gu,{idtAliasesText:h,preset:!0})]})},y5=C(g5,{target:"e1wupxfd0"})(""),b5=y5,Xl=C("div",{target:"envzkt90"})("display:flex;flex-direction:column;align-items:start;gap:8px;background:",function(t){return t.theme.ketcher.color.background.primary},";border:",function(t){return t.theme.ketcher.border.regular},";border-radius:",function(t){return t.theme.ketcher.border.radius.regular},";box-shadow:",function(t){return t.theme.ketcher.shadow.regular},";"),x5=C("div",{target:"e1m0yzrp2"})(function(t){var e=t.connected,r=t.inBond,n=t.theme;return{display:"flex",flexDirection:"column",alignItems:"center",gap:"2px",color:r||!e?n.ketcher.color.text.primary:"#B4B9D6"}},""),w5=C("p",{target:"e1m0yzrp1"})(function(t){var e=t.theme;return{margin:0,fontSize:e.ketcher.font.size.small,lineHeight:"12px"}},""),M5=C("p",{target:"e1m0yzrp0"})(function(t){var e=t.inBond,r=t.theme;return{margin:0,padding:"4px",fontWeight:r.ketcher.font.weight.bold,lineHeight:"14px",borderRadius:"4px",backgroundColor:e?"#CDF1FC":"transparent"}},""),C5=function(e){var r=e.attachmentPoints,n=e.attachmentPointInBond;return u(X,{children:r.map(function(o){return I(x5,{connected:o.connected,inBond:o.id===n,children:[u(w5,{children:o.id}),u(M5,{inBond:o.id===n,children:o.label})]},o.id)})})},Zl=C5,S5=function(e){var r=e.className,n=N(Br),o=n.polymerBond,a=n.style,i=x.useMemo(function(){var b,M,A;return a?C(Xl,{target:"e18hk05c1"})("top:",(b=a?.top)!==null&&b!==void 0?b:"",";left:",(M=a?.left)!==null&&M!==void 0?M:"",";right:",(A=a?.right)!==null&&A!==void 0?A:"",";"):C(Xl,{target:"e18hk05c2"})("")},[a]),l=o.firstMonomer,s=o.secondMonomer,c=o.firstMonomerAttachmentPoint,d=o.secondMonomerAttachmentPoint,h=Zo({monomerCaps:l.monomerCaps,attachmentPointsToBonds:l.attachmentPointsToBonds}),f=h.preparedAttachmentPointsData,v=h.connectedAttachmentPoints,p=Zo({monomerCaps:s?.monomerCaps,attachmentPointsToBonds:s?.attachmentPointsToBonds}),g=p.preparedAttachmentPointsData,y=p.connectedAttachmentPoints;return!l||!s?null:u(i,{className:r,"data-testid":"polymer-library-preview",children:u($u,{firstMonomer:l,secondMonomer:s,firstMonomerOverview:u(Ko,{monomer:l,usage:tn.BondPreview,connectedAttachmentPoints:v,selectedAttachmentPoint:c,attachmentPoints:u(Zl,{attachmentPoints:f,attachmentPointInBond:c})}),secondMonomerOverview:u(Ko,{monomer:s,usage:tn.BondPreview,connectedAttachmentPoints:y,selectedAttachmentPoint:d,attachmentPoints:u(Zl,{attachmentPoints:g,attachmentPointInBond:d})})})})},A5=C(S5,{target:"e18hk05c0"})("width:",en.widthForBond,"px;height:",en.heightForBond,"px;"),k5=A5;function Ql(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function I5(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ql(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var P5=C("div",{target:"e88xzqx0"})("display:inline-block;position:absolute;background:",function(t){var e=t.theme;return e.ketcher.color.background.primary},";z-index:",function(t){var e=t.theme;return e.ketcher.zIndex.overlay},";"),E5=function(){var e=N(Br),r=x.useRef(null),n=x.useState(!1),o=_(n,2),a=o[0],i=o[1];return x.useEffect(function(){if(!(!r.current||e.style))if(e&&e.type){var l,s,c;r.current.setAttribute("style",""),i(!0);var d=5,h=(l=r.current)===null||l===void 0?void 0:l.getBoundingClientRect(),f=h?.height||0,v=h?.width||0,p=(s=ce.instance)===null||s===void 0||(s=s.canvasWrapper.node())===null||s===void 0?void 0:s.getBoundingClientRect(),g=p?.bottom||0,y=p?.left||0,b=p?.right||0,M=(c=e.target)===null||c===void 0?void 0:c.getBoundingClientRect(),A=M?.top||0,m=M?.bottom||0,w=M?.left||0,S=M?.width||0,k=w-S/2,E=A-f-d,O=m+d,D=w+S/2-v/2;if(A>f+d||m+f>g&&m>g/2?r.current.style.top="".concat(E,"px"):r.current.style.top="".concat(O,"px"),k>v/2&&k+v/2<b)r.current.style.left="".concat(D,"px");else if(k<v/2)r.current.style.left="".concat(y,"px");else{var P=10;r.current.style.left="".concat(b-v-P,"px")}}else a&&(i(!1),r.current.setAttribute("style",""))},[e]),e?I(P5,{ref:r,style:I5({},e?.style),children:[e.type===me.Monomer&&u(l5,{}),e.type===me.Preset&&u(b5,{}),e.type===me.Bond&&u(k5,{}),e.type===me.AmbiguousMonomer&&u(Ld,{preview:e})]}):null},co=C(Cn,{target:"e1brfei30"})(function(t){var e=t.theme,r=t.variant;return{color:r==="outlined"?e.ketcher.color.text.primary:e.ketcher.color.button.text.primary,boxShadow:"none",transition:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"4px 8px",border:r==="outlined"?e.ketcher.outline.small:"none",background:r==="outlined"?e.ketcher.color.background.primary:e.ketcher.color.button.group.active,borderRadius:e.ketcher.border.radius.regular,textTransform:"none",fontSize:e.ketcher.font.size.regular,fontWeight:e.ketcher.font.weight.regular,":hover":{color:r==="outlined"?e.ketcher.color.text.dark:e.ketcher.color.button.text.primary,background:r==="outlined"?e.ketcher.color.background.primary:e.ketcher.color.button.group.hover,boxShadow:"none"},":disabled":{cursor:"auto",background:"#e1e5ea",outline:"none"}}},""),O5=function(){var e=N(ae),r=x.useState(e?.events.changeSequenceTypeEnterMode),n=_(r,2),o=n[0],a=n[1],i=x.useState(!1),l=_(i,2),s=l[0],c=l[1],d=N(Ze),h=_t(),f=!!d,v=ne(),p=function(b){var M=Nh(b)==="object"?b.mode:b;c(M==="sequence-layout-mode")};x.useEffect(function(){return e?.events.selectMode.add(p),e?.events.changeSequenceTypeEnterMode.add(function(y){v(Ir(y===gr.PEPTIDE?kr.PEPTIDES:kr.RNA)),a(y)}),e?.events.changeSequenceTypeEnterMode.dispatch(He.RNA),function(){e?.events.selectMode.remove(p)}},[e]),x.useEffect(function(){p(h)},[h]);var g=function(b){e?.events.changeSequenceTypeEnterMode.dispatch(b)};return s?u(X,{children:u(qs,{sx:{mr:1,ml:1},children:I(tf,{disabled:f,children:[u(co,{"data-testid":"".concat(He.RNA,"Btn"),title:"RNA (Ctrl+Alt+R)",variant:o===He.RNA?"contained":"outlined",onClick:function(){return g(He.RNA)},children:"RNA"}),u(co,{"data-testid":"".concat(He.DNA,"Btn"),title:"DNA (Ctrl+Alt+D)",variant:o===He.DNA?"contained":"outlined",onClick:function(){return g(He.DNA)},children:"DNA"}),u(co,{"data-testid":"".concat(He.PEPTIDE,"Btn"),title:"Peptides (Ctrl+Alt+P)",variant:o===He.PEPTIDE?"contained":"outlined",onClick:function(){return g(He.PEPTIDE)},children:"PEP"})]})})}):null},Ku=function(){var e=ne(),r=N(ae),n=N(Ci),o=N(Si),a=N(Ai),i=N(ki);return(function(){var l=_r(We.mark(function s(c){var d,h,f,v,p,g,y,b,M,A,m;return We.wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!(!r||c)){S.next=2;break}return S.abrupt("return");case 2:if(h=Sn.getIndigo(),f=r.drawingEntitiesManager.filterSelection(),v=new Jr,p=f.hasDrawingEntities?f:r.drawingEntitiesManager,g=Gd.fromMonomers(ue(p.monomers.values())),y=(d=g.firstNode)===null||d===void 0?void 0:d.monomer,b=!y||g.chains.reduce(function(k,E){return k+E.monomers.length},0)<=Kd(y).length,!(!p.hasDrawingEntities||!b)){S.next=12;break}return e(Qn(void 0)),S.abrupt("return");case 12:return M=v.serialize(new Wd,r.drawingEntitiesManager,void 0,!1,!0),S.next=15,h.calculateMacromoleculeProperties({struct:M},{upc:a/Ba[n],nac:i/Ba[o]});case 15:A=S.sent;try{m=A.properties&&JSON.parse(A.properties),Ud(),e(Qn(m))}catch(k){Gt.error("Error during parsing macromolecule properties: ",k),e(Qn(void 0))}case 17:case"end":return S.stop()}},s)}));return function(s){return l.apply(this,arguments)}})()},N5=["className"];function D5(t,e){var r=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=L5(t))||e){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(c){throw c},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a,i=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var c=r.next();return i=c.done,c},e:function(c){l=!0,a=c},f:function(){try{i||r.return==null||r.return()}finally{if(l)throw a}}}}function L5(t,e){if(t){if(typeof t=="string")return Jl(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jl(t,e):void 0}}function Jl(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function es(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function ts(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?es(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var uo="Other",ho=function(e,r){var n,o=e==null||(n=e.monomerCount)===null||n===void 0?void 0:n[r];return o&&Object.keys(o).length>0},_5=C("div",{target:"eifx56c30"})(function(t){var e=t.hasError;return{width:"100%",height:e?"124px":"177px",position:"relative",backgroundColor:"white",padding:"2px 0",borderRadius:"8px 8px",overflow:"hidden",boxShadow:"0px 2px 5px rgba(103, 104, 132, 0.15)"}},""),T5=C("div",{target:"eifx56c29"})(function(){return{display:"flex"}},""),R5=C("div",{target:"eifx56c28"})(function(){return{flex:1,display:"flex",justifyContent:"center"}},""),j5=C(ie,{target:"eifx56c27"})(function(){return{display:"flex",alignItems:"center",width:"12px",height:"12px",padding:"2px 6px",cursor:"pointer"}},""),B5=C("div",{target:"eifx56c26"})(function(){return{display:"flex",height:"25px",alignItems:"center",padding:"0 8px"}},""),F5=C("div",{target:"eifx56c25"})(function(){return{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"700",padding:"0 8px",color:"#585858"}},""),z5=C("div",{target:"eifx56c24"})(function(){return{display:"flex",alignItems:"center",height:"24px",borderLeft:"1px solid #CAD3DD",color:"#585858"}},""),$5=C("div",{target:"eifx56c23"})(function(){return{fontSize:"14px",fontWeight:"700",padding:"0 8px"}},""),q5=C("div",{target:"eifx56c22"})(function(){return{width:"100%",height:"100%",top:"-25px",position:"relative"}},""),Yu=C("div",{target:"eifx56c21"})(function(){return{width:"100%",padding:"0 4px 4px"}},""),Xu=C("div",{target:"eifx56c20"})(function(){return{display:"flex",width:"100%",height:"74px",flexDirection:"column",justifyContent:"center",alignItems:"center"}},""),Zu=C("div",{target:"eifx56c19"})(function(){return{fontSize:"14px"}},""),Qu=C("div",{target:"eifx56c18"})(function(){return{fontSize:"12px"}},""),Ju=C("div",{target:"eifx56c17"})(function(){return{display:"flex",padding:"4px 0px",height:"32px",gap:"12px"}},""),H5=C("div",{target:"eifx56c16"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0 2px"}},""),V5=C("div",{target:"eifx56c15"})(function(){return{height:"90px",backgroundColor:"white",borderRadius:"8px",padding:"5px"}},""),U5=C("div",{target:"eifx56c14"})(function(){return{display:"flex",justifyContent:"space-between"}},""),W5=C("div",{target:"eifx56c13"})(function(){return{display:"grid",gridTemplateColumns:"2fr 1fr"}},""),G5=C("div",{target:"eifx56c12"})(function(t){var e=t.disabled;return{display:"flex",alignItems:"center",padding:"0 0 0 6px",pointerEvents:e?"none":"auto",opacity:e?.5:1}},""),K5=C(function(t){var e=t.className,r=Tr(t,N5);return u(ci,ts(ts({},r),{},{classes:{popper:e}}))},{target:"eifx56c11"})(function(){return V({},"& .".concat(fh.tooltip),{maxWidth:"220px",padding:"12px",backgroundColor:"white",color:"rgba(0, 0, 0, 0.87)",boxShadow:"0 1px 5px 0 #CCCCCC",fontSize:11})},""),Y5=C("div",{target:"eifx56c10"})(function(){return{display:"flex",flexDirection:"column",gap:"4px",fontSize:"12px",fontWeight:"700",color:"#585858",borderBottom:"1px solid #585858",paddingBottom:"8px",marginBottom:"8px"}},""),X5=C("div",{target:"eifx56c9"})(function(){return{fontSize:"10px",paddingRight:"5px",whiteSpace:"nowrap"}},""),Z5=C("div",{target:"eifx56c8"})(function(){return{fontSize:"14px",fontWeight:"700"}},""),Q5=C(ie,{target:"eifx56c7"})(function(){return{width:"20px",height:"20px"}},""),J5=C("div",{target:"eifx56c6"})(function(){return{display:"flex",alignItems:"center"}},""),ed=C(Du,{target:"eifx56c5"})(function(){return{position:"relative",padding:"0 0 0 5px",zIndex:1}},""),td="text-input-field-input",ew=C(Bu,{target:"eifx56c4"})(function(){return V({margin:0},".".concat(td),{width:"60px","::-webkit-inner-spin-button":{WebkitAppearance:"none",margin:0},"::-webkit-outer-spin-button":{WebkitAppearance:"none",margin:0},MozAppearance:"textfield"})},""),tw=C("div",{target:"eifx56c3"})(function(){return{display:"grid",gridTemplateColumns:"repeat(8, 1fr)",gap:"4px 6px",width:"100%",backgroundColor:"white",borderRadius:"8px",padding:"6px",height:"90px",alignContent:"flex-start"}},""),rw=C("div",{target:"eifx56c2"})("display:flex;position:relative;justify-content:space-between;background-color:#eff2f5;padding:4px 6px;font-weight:500;font-size:12px;border-radius:2px;min-width:50px;flex:1;opacity:",function(t){var e=t.disabled;return e?.4:1},";&:after{content:'';position:absolute;bottom:0;left:0;width:15px;height:2px;background:",function(t){var e,r=t.theme,n=t.monomerShortName,o=t.isPeptide,a=o?r.ketcher.peptide.color:r.ketcher.monomer.color;return((e=a[n])===null||e===void 0?void 0:e.regular)||r.ketcher.monomer.color.default.regular},";border-radius:0 0 0 2px;}"),nw=C("div",{target:"eifx56c1"})(function(){return{fontWeight:"700"}},""),rd=function(e){var r=e.isPeptide?th:rh,n=r.map(function(o){return[o,e.monomerCount[o]||0]});return n.push([uo,e.monomerCount[uo]||0]),n.sort(function(o,a){return o[0]===uo?1:o[0].localeCompare(a[0])}),u(tw,{children:Bh(n,function(o){var a=_(o,2),i=a[0],l=a[1];return I(rw,{monomerShortName:i,"data-testid":i+"-option",isPeptide:e.isPeptide,disabled:l===0,children:[u(nw,{children:i}),u("div",{children:l})]},i)})})},Ut=function(e){var r;return u(G5,{"data-testid":e.testId,disabled:e.disabled,children:I(X,{children:[I(X5,{children:[e.name,e.value!==void 0&&":"]}),e.onChangeValue?u(ew,{value:(r=e.value)!==null&&r!==void 0?r:"",id:"macromolecule-property-".concat(e.name),"data-testid":"".concat(e.testId,"-input"),type:"number",min:0,inputClassName:td,onChange:function(o){var a;return e==null||(a=e.onChangeValue)===null||a===void 0?void 0:a.call(e,Number(o))}}):u(Z5,{"data-testid":e.testId+"-value",children:e.value}),e.hint&&u(K5,{title:e.hint,children:u(J5,{children:u(Q5,{name:"about",dataTestId:e.name+"-info"})})}),e.options&&e.selectedOption&&e.onChangeOption&&u(ed,{options:e.options.map(function(n){return{id:n,label:n}}),testId:e.testId+"-selector",currentSelection:e.selectedOption,selectionHandler:e.onChangeOption})]})})},ow=function(e){var r=e.part,n=r.match(/^([A-Za-z]+)(\d+)$/);if(!n)return r;var o=_(n,3);o[0];var a=o[1],i=o[2];return I("span",{children:[a,u("sub",{children:i})," "]})},iw=C("svg",{target:"eifx56c0"})(function(){return{width:"100%",height:"100%"}},"");function aw(t,e,r){var n=t.length;if(r>=n||r===0)return{xs:t,ys:e};for(var o=[t[0]],a=[e[0]],i=(n-2)/(r-2),l=0,s=0;s<r-2;s++){for(var c=Math.floor((s+1)*i)+1,d=Math.floor((s+2)*i)+1,h=c,f=d,v=0,p=0,g=f-h,y=h;y<f;y++)v+=t[y],p+=e[y];v/=g,p/=g;for(var b=Math.floor(s*i)+1,M=Math.floor((s+1)*i)+1,A=-1,m=b,w=b;w<M;w++){var S=Math.abs((t[l]-v)*(e[w]-e[l])-(t[l]-t[w])*(p-e[l]));S>A&&(A=S,m=w)}o.push(t[m]),a.push(e[m]),l=m}return o.push(t[n-1]),a.push(e[n-1]),{xs:o,ys:a}}var lw=function(e){return e>360?5:e>300?4:e>240?3:2},rs=function(e){return e<1?0:e<2?1:e<3?2:e<5?3:e<10?5:e<100?Math.floor(e/10)*10:e<1e3?Math.floor(e/50)*50:Math.floor(e/100)*100},sw=function(e){var r=e.data,n=aw(r.map(function(d,h){return h+1}),r,100),o=x.useState(0),a=_(o,2),i=a[0],l=a[1],s=x.useRef(null);x.useEffect(function(){if(!(!n.xs.length||!s.current)){var d=s.current.width.baseVal.value,h=s.current.height.baseVal.value,f={top:10,right:10,bottom:20,left:30};Fe(s.current).selectAll("*").remove();var v=Ro().domain([0,n.xs.length-1]).range([f.left,d-f.right]),p=Ro().domain([0,1]).range([h-f.bottom,f.top]),g=n1().x(function(L,F){return v(F)}).y(function(L){return p(L)}).curve(Lc),y=Fe(s.current),b=lw(d),M=rs(r.length/b),A=M,m;if(M>=1){for(var w=-1/0,S=-1/0,k=-1/0,E=2;E<=b;E++){var O=E,D=rs(r.length/O),P=Number((D*(O/r.length)).toFixed(2));(P>k||P===k&&O>w)&&(w=O,k=P,S=D)}m=Array.from({length:w},function(L,F){return n.xs.findLastIndex(function(R){return R<=(F+1)*S&&R>F*S})}),A=S}else m=ue(Array(Math.min(b,n.xs.length)).keys()),A=1;var T=Qp(v).tickValues(m).tickFormat(function(L,F){return((F+1)*A).toString()});y.append("g").attr("transform","translate(0,".concat(h-f.bottom,")")).call(T).call(function(L){return L.select(".domain").remove()}).call(function(L){return L.selectAll("line").attr("stroke","#CAD3DD").attr("y1",-h)}).call(function(L){return L.selectAll("text").attr("font-size","8px")});var j=Jp(p).tickValues([0,.5,1]).tickFormat(Mi(".1f"));y.append("g").attr("transform","translate(".concat(f.left,",0)")).call(j).call(function(L){return L.select(".domain").remove()}).call(function(L){L.selectAll("line").each(function(F,R,q){F===.5?Fe(q[R]).attr("x1",d).attr("stroke","#CAD3DD").attr("stroke-dasharray",2):Fe(q[R]).remove()})}).call(function(L){return L.selectAll("text").attr("font-size","8px")}),y.append("path").datum(n.ys).attr("fill","none").attr("stroke","#167782").attr("stroke-width",1).attr("d",g)}},[r,i]);var c=new ResizeObserver(ye.debounce(function(d){var h=D5(d),f;try{for(h.s();!(f=h.n()).done;){var v=f.value;v.contentRect.width!==i&&l(v.contentRect.width)}}catch(p){h.e(p)}finally{h.f()}},100));return x.useEffect(function(){return s.current&&c.observe(s.current),function(){c.disconnect()}},[s,i]),u(iw,{"data-testid":"Hydrophobicity-Chart",ref:s})},cw=function(e){return e.isError?I(Xu,{children:[u(Zu,{children:"No Data Available"}),u(Qu,{children:"Select monomer, chain or part of a chain"})]}):I(Yu,{children:[I(W5,{children:[I(Ju,{children:[u(Ut,{name:"Isoelectric Point",testId:"Isoelectric Point",value:ye.isNumber(e.macromoleculesProperties.pKa)?rn(e.macromoleculesProperties.pKa,2):"",hint:"The isoelectric point is calculated as the median of all pKa values for the structure."}),u(Ut,{name:"Extinction Coef.(1/Mcm)",testId:"Extinction Coefficient",value:ye.isNumber(e.macromoleculesProperties.extinctionCoefficient)?rn(e.macromoleculesProperties.extinctionCoefficient):"",hint:I("div",{children:["The extinction coefficient for wavelength of 280nm is calculated using the method from"," ",u("i",{children:"Gill, S.C. and von Hippel, P.H. (1989)."})," Natural analogue is used in place of a modified amino acid."]})})]}),u(Ut,{name:"Hydrophobicity",testId:"Hydrophobicity",hint:I("div",{children:[I(Y5,{children:[u("div",{children:"y = Hydrophobicity score"}),u("div",{children:"x = Position of the amino acid residue"})]}),"The hydrophobicity is calculated using the method from"," ",u("i",{children:"Black S.D. and Mould D.R. (1991)."})," Natural analogue is used in place of a modified amino acid."]})})]}),I(H5,{children:[e.macromoleculesProperties.monomerCount.peptides&&u(rd,{monomerCount:e.macromoleculesProperties.monomerCount.peptides,isPeptide:!0}),u(V5,{children:e.macromoleculesProperties.hydrophobicity&&u(sw,{data:e.macromoleculesProperties.hydrophobicity})})]})]})},ns=function(e){return!/[^0.,]/.test(String(e))},uw=function(e){var r=ne(),n=N(Ci),o=N(Si),a=N(Ai),i=N(ki),l=function(f){r(c1(f))},s=function(f){r(u1(f))},c=function(f){r(h1(f.toString()))},d=function(f){r(f1(f.toString()))};return e.isError?I(Xu,{children:[u(Zu,{children:"No Data Available"}),u(Qu,{children:"Select a nucleotide/nucleoside, chain or part of a chain containing nucleotides/nucleosides"})]}):I(Yu,{children:[I(U5,{children:[ye.isNumber(e.macromoleculesProperties.Tm)?u(Ut,{name:"Melting Temp. (C)",value:rn(e.macromoleculesProperties.Tm,1),testId:"Melting-Temperature",hint:I("div",{children:["The melting temperature is calculated using the method from"," ",u("i",{children:"Khandelwal G. and Bhyravabhotla J. (2010)."})," Natural analogue is used in place of a modified base."]})}):u("div",{}),I(Ju,{children:[u(Ut,{name:"[Unipositive Ions]",value:a,options:["nM","M","mM"],testId:"Unipositive Ions",selectedOption:n,disabled:!ye.isNumber(e.macromoleculesProperties.Tm)&&!ns(a),onChangeOption:l,onChangeValue:c}),u(Ut,{name:"[Oligonucleotides]",value:i,options:["nM","M","mM"],testId:"Oligonucleotides",selectedOption:o,disabled:!ye.isNumber(e.macromoleculesProperties.Tm)&&!ns(i),onChangeOption:s,onChangeValue:d})]})]}),e.macromoleculesProperties.monomerCount.nucleotides&&u(rd,{monomerCount:e.macromoleculesProperties.monomerCount.nucleotides})]})},St;(function(t){t[t.PEPTIDES=0]="PEPTIDES",t[t.RNA=1]="RNA",t[t.NO_TAB=-1]="NO_TAB"})(St||(St={}));var Ne;(function(t){t.Da="Da",t.kDa="kDa",t.MDa="MDa"})(Ne||(Ne={}));var dw=V(V(V({},Ne.Da,1),Ne.kDa,1e3),Ne.MDa,1e6),os=function(e){return ye.isNumber(e)?e<1e3?Ne.Da:e<1e6?Ne.kDa:Ne.MDa:Ne.Da},Ft,hw=function(){var e=ne(),r=N(ae),n=N(b1),o=N(Ci),a=N(Si),i=N(Ai),l=N(ki),s=n?.[0],c=x.useState(St.PEPTIDES),d=_(c,2),h=d[0],f=d[1],v=x.useState(os(s?.mass)),p=_(v,2),g=p[0],y=p[1],b=N(zc),M=Ku(),A=!b,m=x.useRef(M),w=x.useCallback(ye.debounce(function(L){m.current(L)},500),[]);x.useEffect(function(){m.current=function(L){M(L)}},[M]),x.useEffect(function(){return Ft&&r!==null&&r!==void 0&&r.events.selectEntities.hasHandler(Ft)&&r?.events.selectEntities.remove(Ft),Ft=function(){w(A)},r?.events.selectEntities.add(Ft),function(){r?.events.selectEntities.remove(Ft)}},[w,r,A]),x.useEffect(function(){w(A)},[o,a,i,l,A,w]),x.useEffect(function(){f(ho(s,"nucleotides")?St.RNA:St.PEPTIDES),y(os(s?.mass))},[s]);var S=function(F,R){f(R)},k=function(){e(s1(!1))},E=function(F){y(F)},O=!s||n.length>1,D=O||!ho(s,"peptides"),P=O||!ho(s,"nucleotides"),T=x.useMemo(function(){return s!=null&&s.grossFormula?u(F5,{"data-testid":"Gross-formula",children:s?.grossFormula.split(" ").map(function(L,F){return u(ow,{part:L},F)})}):null},[s?.grossFormula]),j=x.useMemo(function(){return s!=null&&s.mass?I(X,{children:[u($5,{"data-testid":"Molecular-Mass-Value",children:rn(s?.mass/dw[g],3)})," "]}):null},[s?.mass,g]);return b?I(_5,{hasError:h===St.PEPTIDES&&D||h===St.RNA&&P,children:[I(T5,{children:[u(R5,{children:I("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[u("path",{d:"M2 6H14",stroke:"#333333"}),u("path",{d:"M2 10H14",stroke:"#333333"})]})}),u(j5,{name:"close",onClick:k,dataTestId:"macromolecule-properties-close"})]}),I(B5,{children:[T,j&&I(z5,{children:[j,u(ed,{testId:"Molecular Mass Unit",options:[Ne.Da,Ne.kDa,Ne.MDa].map(function(L){return{id:L,label:L}}),currentSelection:g,selectionHandler:E})]})]}),u(q5,{children:u(du,{selectedTabIndex:h,onChange:S,isLayoutToRight:!0,tabs:[{caption:"Peptides",testId:"peptides-properties-tab",component:cw,props:{macromoleculesProperties:s,isError:D}},{caption:"RNA/DNA",component:uw,testId:"rna-properties-tab",props:{macromoleculesProperties:s,isError:P}}]})})]}):null},ge=Od(kh),fw=function(e){var r=parseInt(e??"");return isNaN(r)?0:r},pw=function(e,r){if(e===0)return r;var n=ce.instance.MINZOOMSCALE*100,o=ce.instance.MAXZOOMSCALE*100;return e<n?n:e>o?o:e},Qo=function(e,r){r&&(r.value="".concat(Math.round(e),"%"))},vw=C(Mn,{target:"e1pc97tg0"})(function(t){var e=t.theme,r=t.isActive;return{width:"28px",height:"28px",backgroundColor:r?e.ketcher.color.button.group.active:"white",margin:"2px",padding:"0",borderRadius:"4px",outline:"none",":hover":{backgroundColor:r?e.ketcher.color.button.group.hover:"white"},":hover svg":{fill:r?"white":e.ketcher.color.button.group.active}}},""),mw=function(){var e=ne(),r=N(zc),n=Ku(),o=(function(){var a=_r(We.mark(function i(){var l;return We.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return l=!r,c.next=3,n(l);case 3:e(Rc({})),$i();case 5:case"end":return c.stop()}},i)}));return function(){return a.apply(this,arguments)}})();return u(vw,{isActive:r,onClick:o,title:"Calculate properties (".concat(ge.toggleMacromoleculesPropertiesVisibility,")"),"data-testid":"calculate-macromolecule-properties-button",children:u("svg",{width:"15",height:"16",viewBox:"0 0 15 16",xmlns:"http://www.w3.org/2000/svg",fill:r?"white":"#333333",children:u("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.87727 1.65517H9.03053V4.46737L9.42288 5.12973C9.76799 5.04496 10.1287 5 10.5 5C12.9853 5 15 7.01472 15 9.5C15 10.6812 14.5449 11.7562 13.8004 12.559C14.4936 14.1572 13.3016 16 11.456 16H2.54694C0.627617 16 -0.60048 14.0008 0.302223 12.3451C1.6087 9.94883 3.5345 6.39671 4.51457 4.49368V1.65517H3.66783V0H9.87727V1.65517ZM12.2962 13.6272C11.746 13.867 11.1385 14 10.5 14C8.01472 14 6 11.9853 6 9.5C6 7.98987 6.74386 6.65348 7.88515 5.83725L7.33705 4.91194V1.65517H6.20806V4.88502L6.11866 5.05976C5.15873 6.93619 3.14099 10.658 1.79676 13.1235C1.49524 13.6765 1.9056 14.3448 2.54694 14.3448H11.456C11.9075 14.3448 12.2417 14.0139 12.2962 13.6272ZM13.5375 9.5C13.5375 11.1776 12.1776 12.5375 10.5 12.5375C8.82244 12.5375 7.4625 11.1776 7.4625 9.5C7.4625 7.82243 8.82244 6.4625 10.5 6.4625C12.1776 6.4625 13.5375 7.82243 13.5375 9.5Z"})})})};function gw(){var t=ne(),e=N(_n),r=N(ae),n=N(Ze),o=x.useState([]),a=_(o,2),i=a[0],l=a[1],s=x.useState(!1),c=_(s,2),d=c[0],h=c[1],f=x.useState(),v=_(f,2),p=v[0],g=v[1],y=[e],b=n,M=N(qc);x.useEffect(function(){var m=function(S){l(S),S.length&&!gt(S)&&(h(!1),B3(S)?g("antisenseDnaStrand"):F3(S)?g("antisenseRnaStrand"):(g("antisenseStrand"),h(!0)))};return r?.events.selectEntities.add(m),function(){r?.events.selectEntities.remove(m)}},[r]);var A=function(w){qu[w]?t(Vt(w)):w==="undo"||w==="redo"?r?.events.selectHistory.dispatch(w):w==="clear"?(r?.events.selectTool.dispatch([w]),t(ft(M)),r?.events.selectTool.dispatch([M]),n&&bn(t,r)):(w==="antisenseRnaStrand"||w==="antisenseDnaStrand")&&r?.events.createAntisenseChain.dispatch(w==="antisenseDnaStrand")};return I(J,{onItemClick:A,activeMenuItems:y,isHorizontal:!0,children:[I(J.Group,{isHorizontal:!0,divider:!0,children:[u(J.Item,{itemId:"clear",title:"Clear Canvas (".concat(ge.clear,")"),testId:"clear-canvas"}),u(J.Item,{itemId:"open",title:"Open...",disabled:b,testId:"open-file-button"}),u(J.Item,{itemId:"save",title:"Save as...",testId:"save-file-button"})]}),I(J.Group,{isHorizontal:!0,divider:!0,children:[u(J.Item,{itemId:"undo",title:"Undo (".concat(ge.undo,")"),disabled:b,testId:"undo"}),u(J.Item,{itemId:"redo",title:"Redo (".concat(ge.redo,")"),disabled:b,testId:"redo"})]}),I(J.Group,{isHorizontal:!0,children:[I(J.Submenu,{disabled:!(i!=null&&i.length)||!ot(i)||gt(i),needOpenByMenuItemClick:d,vertical:!0,autoSize:!0,layoutModeButton:!0,generalTitle:"Create Antisense Strand",testId:"Create Antisense Strand",activeItem:p,children:[u(J.Item,{itemId:"antisenseRnaStrand",title:"Create RNA Antisense Strand (".concat(ge.createRnaAntisenseStrand,")"),disabled:!(i!=null&&i.length)||!ot(i)||gt(i),testId:"antisenseRnaStrand",type:"button"}),u(J.Item,{itemId:"antisenseDnaStrand",title:"Create DNA Antisense Strand (".concat(ge.createDnaAntisenseStrand,")"),disabled:!(i!=null&&i.length)||!ot(i)||gt(i),testId:"antisenseDnaStrand",type:"button"})]}),u(mw,{})]})]})}function yw(){var t=N(_n),e=N(ae),r=_t()==="sequence-layout-mode",n=[t],o=function(i){e?.events.selectTool.dispatch([i,{toolName:i}])};return I(J,{testId:"left-toolbar",onItemClick:o,activeMenuItems:n,children:[I(J.Group,{divider:!0,children:[u(J.Item,{itemId:"hand",title:"Hand Tool (".concat(ge.hand,")"),testId:"hand"}),u(J.Group,{children:I(J.Submenu,{testId:"select-drop-down-button",subMenuId:_c,needOpenByMenuItemClick:!1,children:[u(J.Item,{itemId:"select-rectangle",title:"Select Rectangle (".concat(ge.switchSelectTool,")"),testId:"select-rectangle"}),u(J.Item,{itemId:"select-lasso",title:"Lasso selection (".concat(ge.switchSelectTool,")"),testId:"select-lasso"}),u(J.Item,{itemId:"select-fragment",title:"Fragment selection (".concat(ge.switchSelectTool,")"),testId:"select-fragment"})]})}),u(J.Item,{itemId:"erase",title:"Erase (".concat(ge.erase,")"),testId:"erase",disabled:r})]}),u(J.Group,{children:I(J.Submenu,{disabled:r,testId:"bonds-drop-down-button",needOpenByMenuItemClick:!1,children:[u(J.Item,{itemId:"bond-single",title:"Single Bond (1)",testId:"single-bond",disabled:r}),u(J.Item,{itemId:"bond-hydrogen",title:"Hydrogen Bond (2)",testId:"hydrogen-bond",disabled:r})]})})]})}var bw=C("div",{target:"e1aw4j3q7"})({name:"bjn8wh",styles:"position:relative"}),xw=C(Cn,{target:"e1aw4j3q6"})("display:flex;color:",function(t){var e=t.theme;return e.ketcher.color.dropdown.primary},";padding-right:0;padding-left:0;& svg{margin-left:2px;width:1rem;height:1rem;}"),ww=C("span",{target:"e1aw4j3q5"})({name:"td41hq",styles:"width:35px"}),Mw=C(Hd,{target:"e1aw4j3q4"})("& .MuiPopover-paper{padding:8px;width:175px;border:none;border-radius:0px 0px 4px 4px;box-shadow:",function(t){var e=t.theme;return e.ketcher.shadow.regular},";box-sizing:border-box;}"),Cw=C("div",{target:"e1aw4j3q3"})({name:"5s1n17",styles:"display:flex;flex-direction:column;white-space:nowrap;word-break:keep-all;background:white"}),fo=C(Cn,{target:"e1aw4j3q2"})("display:flex;justify-content:space-between;font-size:",function(t){var e=t.theme;return e.ketcher.font.size.regular},";line-height:14px;padding:7px 8px;text-transform:none;color:",function(t){var e=t.theme;return e.ketcher.color.dropdown.primary},";"),po=C("span",{target:"e1aw4j3q1"})({name:"btyqtq",styles:"color:#cad3dd"}),Sw=C("input",{target:"e1aw4j3q0"})("border:1px solid #cad3dd;border-radius:4px;padding:3px 8px;color:",function(t){var e=t.theme;return e.ketcher.color.text.light},";font-size:",function(t){var e=t.theme;return e.ketcher.font.size.medium},";line-height:16px;margin-bottom:8px;&:hover{border-color:",function(t){var e=t.theme;return e.ketcher.color.input.border.hover},";}&:active,&:focus{border-color:",function(t){var e=t.theme;return e.ketcher.outline.selected.color},";outline:none;}&::after,&::before{display:none;}"),Aw=function(e){var r=e.onZoomSubmit,n=e.currentZoom,o=e.inputRef,a=x.useCallback(function(l){var s=o.current;if(s){var c=[ge["zoom-out"],ge["zoom-in"]];c.includes(l.key)||l.nativeEvent.stopImmediatePropagation(),l.key==="Enter"&&(r(),s.select())}},[r,o,ge]),i=function(s){var c=s.target;c.select()};return x.useEffect(function(){var l=o.current;Qo(n,l),document.activeElement===l&&l?.select()},[n,o]),x.useEffect(function(){var l=o.current;l?.focus(),l?.select()},[o]),u(Sw,{ref:o,"data-testid":"zoom-value",onFocus:i,onKeyDown:a})},kw=function(){var e=x.useState(!1),r=_(e,2),n=r[0],o=r[1],a=x.useState(100),i=_(a,2),l=i[0],s=i[1],c=x.useRef(null),d=x.useRef(null);x.useEffect(function(){var b;ce===null||ce===void 0||(b=ce.instance)===null||b===void 0||b.subscribeOnZoomEvent(function(){var M;s(Math.round((ce===null||ce===void 0||(M=ce.instance)===null||M===void 0?void 0:M.getZoomLevel())*100))})},[ce===null||ce===void 0?void 0:ce.instance]);var h=x.useCallback(function(){var b=d.current;if(b){var M=fw(b.value);if(M&&M!==l){var A=pw(M,l);Qo(A,b),ce.instance.zoomTo(A/100)}else Qo(l,b)}},[l]),f=function(){o(!1)},v=function(){o(!0)},p=function(){ce.instance.zoomIn()},g=function(){ce.instance.zoomOut()},y=function(){ce.instance.resetZoom()};return I(bw,{ref:c,children:[I(xw,{onClick:v,"data-testid":"zoom-selector",children:[I(ww,{"data-testid":"zoom-input",children:[l,"%"]}),u(ie,{name:"chevron"})]}),u(Mw,{open:n,onClose:f,anchorEl:c.current,container:document.querySelector(it),anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:I(Cw,{children:[u(Aw,{onZoomSubmit:h,inputRef:d,currentZoom:l}),I(fo,{"data-testid":"zoom-out",title:"Zoom Out",onClick:g,children:[u("span",{children:"Zoom out"}),u(po,{children:ge["zoom-minus"]})]}),I(fo,{"data-testid":"zoom-in",title:"Zoom In",onClick:p,children:[u("span",{children:"Zoom in"}),u(po,{children:ge["zoom-plus"]})]}),I(fo,{"data-testid":"zoom-default",title:"Zoom 100%",onClick:y,children:[u("span",{children:"Zoom 100%"}),u(po,{children:ge["zoom-reset"]})]})]})})]})};function is(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Iw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?is(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):is(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}var Pw=[Yi.bondSingle,Yi.selectRectangle],Ew=function(){var e=N(ae),r=N(_n),n=N(y1),o=ne(),a=N(jn),i=N(Fc),l=N(qc),s=x.useCallback(function(){o(Bo(e?.monomersLibrary)),o(E1(e?.defaultRnaPresetsLibraryItems))},[e]);x.useEffect(function(){return e?.events.updateMonomersLibrary.add(s),function(){e?.events.updateMonomersLibrary.remove(s)}},[e]),x.useEffect(function(){var p=function(){e?.events.selectTool.dispatch([l]),o(ft(l))};return e&&e.events.selectSelectionTool.add(p),function(){e?.events.selectSelectionTool.remove(p)}},[o,e,l]),x.useEffect(function(){var p=function(y){var b=_(y,1),M=b[0];M!==r&&o(ft(M))};return e&&(e.events.error.add(function(g){o(Ua(g))}),e.events.openErrorModal.add(function(g){o(Er(g))}),o(ft("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(g){return o(Vt({name:"monomerConnection",additionalProps:g}))}),e.events.openConfirmationDialog.add(function(g){return o(Vt({name:"confirmationDialog",additionalProps:g}))}),e.events.selectTool.add(p)),function(){o(ft(null)),e?.events.selectTool.remove(p)}},[e]);var c=x.useCallback(function(p){return o(er(p))},[o]),d=x.useCallback(ye.debounce(function(p){return c(p)},500),[c]);x.useEffect(function(){var p=function(y){var b=_(y,1),M=b[0];M!==r&&o(ft(M))};return e&&(e.events.error.add(function(g){o(Ua(g))}),e.events.openErrorModal.add(function(g){o(Er(g))}),o(ft("select-rectangle")),e.events.selectTool.dispatch(["select-rectangle"]),e.events.openMonomerConnectionModal.add(function(g){return o(Vt({name:"monomerConnection",additionalProps:g}))}),e.events.selectTool.add(p)),function(){o(ft(null)),e?.events.selectTool.remove(p)}},[e]);var h=x.useCallback(function(p,g){var y={type:me.Bond,polymerBond:p,style:g};d(y)},[d]),f=x.useCallback(function(p){var g,y,b;if(p.buttons!==1&&p.buttons!==2){if(n){p.preventDefault(),p.stopPropagation();return}var M=(g=p.target.__data__)===null||g===void 0?void 0:g.polymerBond;if(!(M&&!M.finished||M instanceof Nd)){if(M){var A=Dd(M,p.target.getBoundingClientRect());h(M,A);return}var m=(y=p.target.__data__)===null||y===void 0?void 0:y.node,w=((b=p.target.__data__)===null||b===void 0?void 0:b.monomer)||m?.monomer;if(!(m&&m instanceof ws)){if(w instanceof $e){var S={type:me.AmbiguousMonomer,monomer:w.variantMonomerItem,target:p.target};d(S);return}var k=w.monomerItem,E=Iw({},w.attachmentPointsToBonds),O=m instanceof yr||m instanceof br;if(O){var D,P=m instanceof yr?[m.sugar.monomerItem,m.rnaBase.monomerItem,(D=m.phosphate)===null||D===void 0?void 0:D.monomerItem]:[m.sugar.monomerItem,m.rnaBase.monomerItem];if(m.rnaBase instanceof $e){var T={type:me.AmbiguousMonomer,monomer:m.rnaBase.variantMonomerItem,presetMonomers:P,target:p.target};d(T);return}var j=a.find(function(q){var H=[q.sugar,q.base,q.phosphate];return P.every(function(B,z){var W;return B?.props.Name===((W=H[z])===null||W===void 0?void 0:W.props.Name)})}),L;m instanceof br?L=Ve.ChainEnd:m.firstMonomerInNode.R1AttachmentPoint!==void 0?L=Ve.ChainStart:L=Ve.ChainMiddle;var F={type:me.Preset,monomers:P,name:j?.name,idtAliases:j?.idtAliases,position:L,target:p.target};d(F);return}var R={type:me.Monomer,monomer:k,attachmentPointsToBonds:E,target:p.target};d(R)}}}},[h,d,a,n]),v=x.useCallback(function(){d.cancel(),o(er(void 0))},[d,o]);return x.useEffect(function(){e?.events.mouseOverMonomer.add(f),e?.events.mouseLeaveMonomer.add(v),e?.events.mouseLeaveAttachmentPoint.add(v),e?.events.mouseDownAttachmentPoint.add(v),e?.events.mouseOverSequenceItem.add(f),e?.events.mouseLeaveSequenceItem.add(v),e?.events.mouseOverPolymerBond.add(f),e?.events.mouseLeavePolymerBond.add(v);var p=function(y){v();var b=y.buttons===1;(!b||!Pw.includes(r))&&f(y)};return e?.events.mouseOnMoveMonomer.add(p),e?.events.mouseMoveAttachmentPoint.add(p),e?.events.mouseOnMoveSequenceItem.add(p),e?.events.mouseOnMovePolymerBond.add(p),window.addEventListener("hidePreview",v),function(){e?.events.mouseOverMonomer.remove(f),e?.events.mouseLeaveMonomer.remove(v),e?.events.mouseLeaveAttachmentPoint.remove(v),e?.events.mouseOverSequenceItem.remove(f),e?.events.mouseLeaveSequenceItem.remove(v),e?.events.mouseOverPolymerBond.remove(f),e?.events.mouseLeavePolymerBond.remove(v),e?.events.mouseOnMoveMonomer.remove(p),e?.events.mouseMoveAttachmentPoint.remove(p),e?.events.mouseOnMoveSequenceItem.remove(p),e?.events.mouseOnMovePolymerBond.remove(p),window.removeEventListener("hidePreview",v)}},[e,r,f,v]),x.useEffect(function(){i||e?.events.resetSequenceEditMode.dispatch()},[i]),u(X,{})},Ow=function(e){var r=e.selectedMonomers,n=e.contextMenuEvent,o=r||[],a=N(ae),i=Wu(o,n),l=function(g){return!(g!=null&&g.polymerBondRenderer)&&(!(g!=null&&g.selectedMonomers)||g?.selectedMonomers.length===0)},s=Uu(i),c=function(g){return!!(g!=null&&g.polymerBondRenderer)},d=o&&o.length>0&&ot(o),h=[{name:"copy",title:"Copy",icon:u(ie,{name:"copyMenu"}),disabled:function(g){var y=g.props,b=y===void 0?{}:y;return c(b)||l(b)}},{name:se.paste,title:"Paste",icon:u(ie,{name:"pasteNavBar"}),disabled:function(g){var y=g.props,b=y===void 0?{}:y;return!l(b)},separator:!0},{name:"create_antisense_rna_chain",title:"Create Antisense RNA Strand",separator:!1,disabled:gt(o),hidden:function(g){var y=g.props;return!(y!=null&&y.selectedMonomers)||!ot(y?.selectedMonomers)}},{name:"create_antisense_dna_chain",title:"Create Antisense DNA Strand",disabled:gt(o),hidden:function(g){var y=g.props;return!(y!=null&&y.selectedMonomers)||!ot(y?.selectedMonomers)},separator:d},{name:se.modifyAminoAcids,title:"Modify amino acids",disabled:!1,hidden:!s.length,subMenuItems:s},{name:"edit_connection_points",title:"Edit Connection Points...",disabled:function(g){var y=g.props;return!c(y)},separator:!0},{name:"delete",title:"Delete",icon:u(ie,{name:"deleteMenu"}),disabled:function(g){var y=g.props,b=y===void 0?{}:y;return c(b)||l(b)}}],f=function(g){var y=g.id,b=g.props;switch(!0){case y==="copy":a?.events.copySelectedStructure.dispatch();break;case y==="create_antisense_rna_chain":a?.events.createAntisenseChain.dispatch(!1);break;case y==="create_antisense_dna_chain":a?.events.createAntisenseChain.dispatch(!0);break;case y==="delete":a?.events.deleteSelectedStructure.dispatch();break;case y==="paste":a?.events.pasteFromClipboard.dispatch();break;case y==="edit_connection_points":{var M,A=b==null||(M=b.polymerBondRenderer)===null||M===void 0?void 0:M.polymerBond;if(!A)return;a?.events.openMonomerConnectionModal.dispatch({firstMonomer:A.firstMonomer,secondMonomer:A.secondMonomer,polymerBond:A,isReconnectionDialog:!0});break}case y?.startsWith(Nr):{var m=y?.replace(Nr,"");a?.events.modifyAminoAcids.dispatch({monomers:i,modificationType:m});break}}},v=document.querySelector(it);return v&&An.createPortal(u(ji,{id:xt.FOR_SELECTED_MONOMERS,handleMenuChange:f,menuItems:h}),v)},Nw=C(Mn,{target:"e1846tr80"})(function(t){var e=t.theme,r=t.isActive;return{width:"40px",height:"31px",backgroundColor:r?e.ketcher.color.button.group.active:"white",marginRight:"8px",border:r?e.ketcher.outline.selected.color:e.ketcher.outline.small,borderRadius:"4px",outline:"none",":hover":{backgroundColor:r?e.ketcher.color.button.group.hover:"white"},":hover svg":{fill:r?"white":e.ketcher.color.button.group.active}}},""),Dw=function(){var e=N(ae),r=x.useState(!0),n=_(r,2),o=n[0],a=n[1],i=_t()==="sequence-layout-mode",l=N(Fc),s=function(){var d=!o;a(d),e?.events.toggleIsSequenceSyncEditMode.dispatch(d),$i()};return x.useEffect(function(){i&&l&&e?.events.toggleIsSequenceSyncEditMode.dispatch(o)},[i,l]),i&&l?u(X,{children:u(Nw,{isActive:o,onClick:s,"data-testid":"sync_sequence_edit_mode","data-isActive":o,children:I("svg",{width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",fill:o?"white":"#333333",children:[u("rect",{x:"1",y:"1.5",width:"22",height:"2",rx:"1"}),u("rect",{x:"2.5",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 2.5 1.5)"}),u("rect",{x:"9.33333",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 9.33333 1.5)"}),u("rect",{x:"16.1667",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 16.1667 1.5)"}),u("rect",{x:"23",y:"1.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(90 23 1.5)"}),u("path",{d:"M2.16873 14.2715C2.08963 14.3652 2.02518 14.4253 1.97537 14.4517C1.9285 14.478 1.8699 14.4912 1.79959 14.4912C1.66189 14.4912 1.55057 14.4458 1.46561 14.355C1.38357 14.2612 1.34256 14.1074 1.34256 13.8936V13.2871C1.34256 13.0703 1.38357 12.9165 1.46561 12.8257C1.55057 12.7319 1.66189 12.6851 1.79959 12.6851C1.90506 12.6851 1.99295 12.7129 2.06326 12.7686C2.1365 12.8242 2.19217 12.918 2.23025 13.0498C2.26834 13.1787 2.30789 13.2666 2.34891 13.3135C2.43387 13.4043 2.58475 13.4966 2.80154 13.5903C3.01834 13.6841 3.25564 13.731 3.51346 13.731C3.91482 13.731 4.24441 13.6372 4.50223 13.4497C4.66629 13.3354 4.74832 13.1948 4.74832 13.0278C4.74832 12.9165 4.70877 12.8125 4.62967 12.7158C4.55057 12.6162 4.42166 12.5342 4.24295 12.4697C4.12576 12.4258 3.86355 12.3657 3.45633 12.2896C2.96414 12.1987 2.59207 12.0889 2.34012 11.96C2.08816 11.8311 1.88895 11.6494 1.74246 11.415C1.59598 11.1807 1.52273 10.9272 1.52273 10.6548C1.52273 10.2241 1.70291 9.84766 2.06326 9.52539C2.42361 9.2002 2.89236 9.0376 3.46951 9.0376C3.70096 9.0376 3.91482 9.06396 4.11111 9.1167C4.31033 9.1665 4.49051 9.24414 4.65164 9.34961C4.76883 9.23535 4.88602 9.17822 5.0032 9.17822C5.13504 9.17822 5.24197 9.2251 5.324 9.31885C5.40897 9.40967 5.45145 9.56201 5.45145 9.77588V10.4526C5.45145 10.6694 5.40897 10.8247 5.324 10.9185C5.24197 11.0093 5.13504 11.0547 5.0032 11.0547C4.89188 11.0547 4.7952 11.021 4.71316 10.9536C4.64871 10.9038 4.60037 10.8042 4.56814 10.6548C4.53592 10.5054 4.4949 10.3984 4.4451 10.334C4.36014 10.2227 4.2327 10.1289 4.06277 10.0527C3.89285 9.97656 3.69656 9.93848 3.47391 9.93848C3.14871 9.93848 2.8909 10.0146 2.70047 10.167C2.51297 10.3164 2.41922 10.4731 2.41922 10.6372C2.41922 10.7485 2.4573 10.8569 2.53348 10.9624C2.61258 11.0649 2.72684 11.1455 2.87625 11.2041C2.97586 11.2451 3.25564 11.311 3.71561 11.4019C4.1785 11.4927 4.53299 11.5923 4.77908 11.7007C5.02811 11.8091 5.23465 11.979 5.39871 12.2104C5.56277 12.4419 5.6448 12.7173 5.6448 13.0366C5.6448 13.4819 5.48807 13.8379 5.17459 14.1045C4.75857 14.4561 4.2283 14.6318 3.58377 14.6318C3.33475 14.6318 3.09158 14.6011 2.85428 14.5396C2.6199 14.481 2.39139 14.3916 2.16873 14.2715ZM9.615 12.2632V13.5991H10.2214C10.4382 13.5991 10.5921 13.6416 10.6829 13.7266C10.7766 13.8086 10.8235 13.917 10.8235 14.0518C10.8235 14.1836 10.7766 14.292 10.6829 14.377C10.5921 14.459 10.4382 14.5 10.2214 14.5H8.10768C7.89381 14.5 7.74 14.459 7.64625 14.377C7.55543 14.292 7.51002 14.1821 7.51002 14.0474C7.51002 13.9155 7.55543 13.8086 7.64625 13.7266C7.74 13.6416 7.89381 13.5991 8.10768 13.5991H8.71412V12.2632L7.22438 10.0747C7.02516 10.0747 6.87867 10.0322 6.78492 9.94727C6.6941 9.8623 6.64869 9.75391 6.64869 9.62207C6.64869 9.4873 6.6941 9.37891 6.78492 9.29688C6.87867 9.21191 7.03395 9.16943 7.25074 9.16943L8.06813 9.17383C8.28492 9.17383 8.43873 9.21484 8.52955 9.29688C8.6233 9.37891 8.67018 9.4873 8.67018 9.62207C8.67018 9.82422 8.55152 9.9751 8.31422 10.0747L9.16676 11.3315L10.0017 10.0747C9.86988 10.0249 9.77613 9.96191 9.72047 9.88574C9.6648 9.80957 9.63697 9.72168 9.63697 9.62207C9.63697 9.4873 9.68238 9.37891 9.7732 9.29688C9.86695 9.21484 10.0222 9.17236 10.239 9.16943L11.0872 9.17383C11.304 9.17383 11.4578 9.21484 11.5486 9.29688C11.6423 9.37891 11.6892 9.4873 11.6892 9.62207C11.6892 9.75684 11.6423 9.8667 11.5486 9.95166C11.4548 10.0337 11.3025 10.0747 11.0916 10.0747L9.615 12.2632ZM13.7082 10.8745V13.5991H14.0334C14.2502 13.5991 14.404 13.6416 14.4949 13.7266C14.5886 13.8086 14.6355 13.917 14.6355 14.0518C14.6355 14.1836 14.5886 14.292 14.4949 14.377C14.404 14.459 14.2502 14.5 14.0334 14.5H12.8513C12.6345 14.5 12.4792 14.459 12.3855 14.377C12.2947 14.292 12.2493 14.1821 12.2493 14.0474C12.2493 13.9185 12.2947 13.8115 12.3855 13.7266C12.4763 13.6416 12.6169 13.5991 12.8074 13.5991V10.0747H12.6667C12.4499 10.0747 12.2947 10.0337 12.2009 9.95166C12.1101 9.8667 12.0647 9.75684 12.0647 9.62207C12.0647 9.4873 12.1101 9.37891 12.2009 9.29688C12.2947 9.21191 12.4499 9.16943 12.6667 9.16943L13.7082 9.17383L16.011 12.7861V10.0747H15.6858C15.469 10.0747 15.3137 10.0337 15.22 9.95166C15.1291 9.8667 15.0837 9.75684 15.0837 9.62207C15.0837 9.4873 15.1291 9.37891 15.22 9.29688C15.3137 9.21191 15.469 9.16943 15.6858 9.16943L16.8679 9.17383C17.0847 9.17383 17.2385 9.21484 17.3293 9.29688C17.4231 9.37891 17.47 9.4873 17.47 9.62207C17.47 9.75391 17.4246 9.8623 17.3337 9.94727C17.2429 10.0322 17.1038 10.0747 16.9163 10.0747V14.5H16.0242L13.7082 10.8745ZM21.9236 9.40234C21.9792 9.32617 22.0393 9.26904 22.1037 9.23096C22.1711 9.19287 22.2429 9.17383 22.3191 9.17383C22.4509 9.17383 22.5578 9.21924 22.6399 9.31006C22.7248 9.40088 22.7673 9.55469 22.7673 9.77148V10.5361C22.7673 10.7529 22.7248 10.9082 22.6399 11.002C22.5578 11.0928 22.4509 11.1382 22.3191 11.1382C22.1989 11.1382 22.1023 11.1045 22.029 11.0371C21.9558 10.9697 21.9016 10.8438 21.8664 10.6592C21.8459 10.5361 21.8049 10.4409 21.7434 10.3735C21.6233 10.2417 21.4548 10.1362 21.238 10.0571C21.0241 9.97803 20.8088 9.93848 20.592 9.93848C20.3225 9.93848 20.0749 9.99707 19.8493 10.1143C19.6237 10.2314 19.4245 10.4219 19.2517 10.6855C19.0788 10.9492 18.9924 11.2627 18.9924 11.626V12.2104C18.9924 12.644 19.1491 13.0059 19.4626 13.2959C19.779 13.5859 20.217 13.731 20.7766 13.731C21.1106 13.731 21.3933 13.6855 21.6247 13.5947C21.7595 13.542 21.903 13.438 22.0554 13.2827C22.1491 13.189 22.2224 13.1289 22.2751 13.1025C22.3279 13.0732 22.3879 13.0586 22.4553 13.0586C22.5754 13.0586 22.6809 13.104 22.7717 13.1948C22.8625 13.2856 22.9079 13.3926 22.9079 13.5156C22.9079 13.6387 22.8464 13.7705 22.7234 13.9111C22.5446 14.1162 22.3147 14.2773 22.0334 14.3945C21.6555 14.5527 21.238 14.6318 20.781 14.6318C20.2478 14.6318 19.7673 14.522 19.3396 14.3022C18.9939 14.1265 18.6994 13.8496 18.4563 13.4717C18.2131 13.0908 18.0915 12.6763 18.0915 12.228V11.6172C18.0915 11.1484 18.1999 10.7119 18.4167 10.3076C18.6364 9.90039 18.9397 9.58691 19.3264 9.36719C19.7131 9.14746 20.1233 9.0376 20.5569 9.0376C20.8176 9.0376 21.0608 9.06836 21.2863 9.12988C21.5149 9.18848 21.7273 9.2793 21.9236 9.40234Z"}),u("rect",{x:"23",y:"22.5",width:"22",height:"2",rx:"1",transform:"rotate(-180 23 22.5)"}),u("rect",{x:"21.5",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 21.5 22.5)"}),u("rect",{x:"14.6667",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 14.6667 22.5)"}),u("rect",{x:"7.83333",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 7.83333 22.5)"}),u("rect",{x:"1",y:"22.5",width:"5",height:"1.5",rx:"0.75",transform:"rotate(-90 1 22.5)"})]})})}):null},Lw=function(e,r){var n=x.useRef(null);x.useLayoutEffect(function(){var o=e.current;if(o)return n.current=requestAnimationFrame(function(){o.style.transform="translateX(".concat(r,"px)")}),function(){n.current&&(cancelAnimationFrame(n.current),n.current=null)}},[e,r])},nd=Lw,or={rulerArea:"RulerArea-module_rulerArea__Kix1O",rulerInput:"RulerArea-module_rulerInput__nCNOa",rulerInputDragging:"RulerArea-module_rulerInputDragging__saoOk",rulerScale:"RulerArea-module_rulerScale__4YOKH",rulerHandle:"RulerArea-module_rulerHandle__g4GPl"},_w=function(e){var r=e.lineLengthValue,n=e.offsetX,o=e.isDragging,a=e.layoutMode,i=e.onCommitValue,l=x.useRef(null);nd(l,n);var s=r.toString(),c=x.useState(null),d=_(c,2),h=d[0],f=d[1],v=h!==null?h:s,p=function(M){f(M.target.value)},g=function(){if(!h||h.trim()===""){f(null);return}var M=Number(h);if(Number.isNaN(M)||M<1){f(null);return}var A=a==="sequence-layout-mode"?Math.round(M/10)*10:M;f(null),i(A)},y=function(M){M.key==="Enter"&&(M.preventDefault(),M.currentTarget.blur())};return u("input",{className:Yt(or.rulerInput,o&&or.rulerInputDragging),title:"Number of monomers in a line",type:"text",inputMode:"numeric",pattern:"[0-9]*",value:v,onChange:p,onBlur:g,onKeyDown:y,"data-testid":"ruler-input",disabled:o,ref:l})},Tw=x.memo(_w),Jo=40,ei=20,ti=10,ri=25,ni=Vd,Rw=function(e){var r=e.transform,n=e.layoutMode;e.lineLengthValue;var o=x.useRef(null),a=r.k-.5<Number.EPSILON,i=function(d,h,f,v){var p=Math.max(0,Math.floor((d-v)/f)),g=Math.ceil((h-v)/f)+10;return Array.from({length:g-p},function(y,b){return v+(p+b)*f})},l=x.useMemo(function(){var c,d=((c=o.current)===null||c===void 0||(c=c.ownerSVGElement)===null||c===void 0?void 0:c.width.baseVal.value)||1e3,h=r.invertX(0),f=r.invertX(d);if(n==="sequence-layout-mode"){var v=10*ei+ti;return i(h,f,v,Jo)}return n==="snake-layout-mode"?i(h,f,ni,ri):[]},[n,r]),s=x.useMemo(function(){var c=[];return l.forEach(function(d,h){if(n==="sequence-layout-mode")c.push(u("line",{x1:r.applyX(d),y1:14,x2:r.applyX(d),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(h)));else if(n==="snake-layout-mode")if(a){var f=h%5===0;f?c.push(u("text",{x:r.applyX(d),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:h},"ruler-label-".concat(h))):c.push(u("line",{x1:r.applyX(d),y1:14,x2:r.applyX(d),y2:22,stroke:"#7C7C7F",strokeWidth:1},"ruler-mark-".concat(h)))}else c.push(u("text",{x:r.applyX(d),y:18,fontSize:10,fontWeight:500,fill:"#7C7C7F",textAnchor:"middle",dominantBaseline:"middle",children:h},"ruler-label-".concat(h)));h!==l.length-1&&(a&&n==="snake-layout-mode"||c.push(u("line",{x1:r.applyX(d+10),y1:18,x2:r.applyX(l[h+1]-10),y2:18,stroke:"#B4B9D6",strokeDasharray:"2,2",strokeWidth:1},"ruler-fill-".concat(h))))}),c},[l,n,r,a]);return u("svg",{className:or.rulerScale,ref:o,"data-testid":"ruler-scale",children:u(X,{children:s})})},jw=x.memo(Rw),Bw=function(e){var r=e.offsetX,n=e.onDragStart,o=e.onDrag,a=e.onDragEnd,i=x.useRef(null),l=x.useRef(null);return nd(i,r),x.useEffect(function(){if(l.current){var s=Fe(l.current),c=vc().on("start",n).on("drag",o).on("end",a);return s.call(c),function(){s.on(".drag",null)}}},[o,a,n]),u("svg",{xmlns:"http://www.w3.org/2000/svg",className:or.rulerHandle,viewBox:"0 0 16 13",fill:"none",pointerEvents:"none",ref:i,"data-testid":"ruler-handle",children:I("g",{cursor:"pointer",pointerEvents:"all",ref:l,children:[u("mask",{id:"ruler-handle-mask",fill:"#fff",children:u("path",{fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"})}),u("path",{fill:"#CAD3DD",fillRule:"evenodd",d:"M16 1.625a1 1 0 0 0-1-1H1a1 1 0 0 0-1 1v4.5a1 1 0 0 0 .4.8l7 5.25a1 1 0 0 0 1.2 0l7-5.25a1 1 0 0 0 .4-.8v-4.5Z",clipRule:"evenodd"}),u("path",{fill:"#B4B9D6",d:"m15.6 6.925-.6-.8.6.8Zm-8.2 5.25.6-.8-.6.8Zm-7-5.25.6-.8-.6.8Zm.6-5.3h14v-2H1v2Zm0 4.5v-4.5h-2v4.5h2Zm7 5.25-7-5.25-1.2 1.6 7 5.25 1.2-1.6Zm7-5.25-7 5.25 1.2 1.6 7-5.25-1.2-1.6Zm0-4.5v4.5h2v-4.5h-2Zm1.2 6.1a2 2 0 0 0 .8-1.6h-2l1.2 1.6Zm-9.4 5.25a2 2 0 0 0 2.4 0l-1.2-1.6-1.2 1.6ZM-1 6.125a2 2 0 0 0 .8 1.6l1.2-1.6h-2Zm16-4.5h2a2 2 0 0 0-2-2v2Zm-14-2a2 2 0 0 0-2 2h2v-2Z",mask:"url(#ruler-handle-mask)"})]})})},Fw=x.memo(Bw),od=function(){var e=x.useState(new $t(1,0,0)),r=_(e,2),n=r[0],o=r[1];return x.useEffect(function(){var a=ce.instance;if(a){var i=function(s){s&&requestAnimationFrame(function(){o(s)})};return a.subscribeOnZoomEvent(i),function(){a.unsubscribeOnZoomEvent(i)}}},[ce.instance]),n},zw=function(){var e,r,n,o=_t(),a=Wt(x1),i=a[o],l=Wt(ae),s=x.useRef(0),c=x.useState(0),d=_(c,2),h=d[0],f=d[1],v=x.useState(!1),p=_(v,2),g=p[0],y=p[1],b=od(),M=i/10-1,A=x.useMemo(function(){if(o==="sequence-layout-mode"){var R=10*ei+ti,q=Math.floor(i/10);return Jo+q*R}return o==="snake-layout-mode"?ri+i*ni:0},[o,i]),m=x.useMemo(function(){var R=b.applyX(A)+h,q=R-8,H=R+10,B=l?.canvas.width.baseVal.value;if(!B)return[H,q];var z=l?.canvas.parentElement,W=z?.scrollLeft||0,K=W,pe=W+(z?.clientWidth||B);return H+35>pe&&(H=pe-35),H<K&&(H=K),[H,q]},[l?.canvas.width.baseVal.value,l?.canvas.parentElement,b,A,h]),w=_(m,2),S=w[0],k=w[1],E=x.useCallback(function(R){l?.events.setEditorLineLength.dispatch(V({},o,R))},[l==null||(e=l.events)===null||e===void 0?void 0:e.setEditorLineLength,o]),O=x.useCallback(function(R){if(o==="sequence-layout-mode"){var q=(R-M*ti-Jo)/ei;return Math.max(10,Math.round(q/10)*10)}else if(o==="snake-layout-mode"){var H=(R-ri)/ni;return Math.max(1,Math.round(H))}return i},[o,M,i]),D=x.useCallback(function(R){var q=R-s.current,H=b.applyX(A)+q;return[q,b.invertX(H)]},[b,A]),P=x.useMemo(function(){if(!g)return i;var R=D(s.current+h),q=_(R,2),H=q[1];return O(H)},[g,i,D,s,h,O]),T=x.useCallback(function(R){y(!0),s.current=R.sourceEvent.clientX,l?.events.toggleLineLengthHighlighting.dispatch(!0,A)},[l==null||(r=l.events)===null||r===void 0?void 0:r.toggleLineLengthHighlighting,A]),j=x.useCallback(function(R){var q=D(R.sourceEvent.clientX),H=_(q,2),B=H[0],z=H[1];f(B),l?.events.toggleLineLengthHighlighting.dispatch(!0,z)},[l==null||(n=l.events)===null||n===void 0?void 0:n.toggleLineLengthHighlighting,D]),L=x.useCallback(function(R){y(!1);var q=D(R.sourceEvent.clientX),H=_(q,2),B=H[1],z=O(B);z!==i&&E(z),f(0),s.current=0,l?.events.toggleLineLengthHighlighting.dispatch(!1)},[D,O,i,l?.events.toggleLineLengthHighlighting,E]);if(o==="flex-layout-mode")return null;var F=!window._ketcher_isChainLengthRulerDisabled;return F?I("div",{className:Yt(or.rulerArea,g&&or.rulerAreaDragging),"data-testid":"ruler-area",children:[u(Tw,{lineLengthValue:g?P:i,offsetX:S,isDragging:g,layoutMode:o,onCommitValue:E}),u(Fw,{offsetX:k,onDragStart:T,onDrag:j,onDragEnd:L}),u(jw,{transform:b,layoutMode:o,lineLengthValue:i})]}):null},$w={dragGhost:"DragGhost-module_dragGhost__m5lHf"},qw=function(e){var r=e.preset,n=r.sugar,o=r.phosphate,a=r.base;if(!n)return null;var i=mr(n),l=_(i,2),s=l[0],c=l[1],d=new s(n),h=new c(d),f=o?(function(){var O=mr(o),D=_(O,2),P=D[0],T=D[1],j=new P(o);return new T(j)})():null,v=a?(function(){var O=mr(a),D=_(O,2),P=D[0],T=D[1],j=new P(a);return new T(j)})():null,p=h.monomerSize,g=f?.monomerSize,y=v?.monomerSize,b=0,M=0,A=g?b+p.width+30:0,m=M,w=b+(p.width-(y?.width||0))/2,S=M+p.height+30,k=Math.max(b+p.width,g?A+g.width:0,y?w+y.width:0),E=Math.max(M+p.height,g?m+g.height:0,y?S+y.height:0);return u("svg",{xmlns:"http://www.w3.org/2000/svg",width:k,height:E,viewBox:"0 0 ".concat(k," ").concat(E),overflow:"visible",children:I("g",{style:{filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.4))"},children:[g&&u("line",{x1:b+p.width,y1:M+p.height/2,x2:A,y2:m+g.height/2,stroke:"#CAD3DD",strokeWidth:"3"}),y&&u("line",{x1:b+p.width/2,y1:M+p.height,x2:w+y.width/2,y2:S,stroke:"#CAD3DD",strokeWidth:"3"}),I("g",{transform:"translate(".concat(b,", ").concat(M,")"),children:[u("use",{href:h.monomerSymbolElementId,fill:"#CAD3DD"}),u("text",{x:p.width/2,y:p.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:n.label})]}),g&&I("g",{transform:"translate(".concat(A,", ").concat(m,")"),children:[u("use",{href:f.monomerSymbolElementId,fill:"#CAD3DD"}),u("text",{x:g.width/2,y:g.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:o?.label})]}),y&&I("g",{transform:"translate(".concat(w,", ").concat(S,")"),children:[u("use",{href:v.monomerSymbolElementId,fill:"#CAD3DD"}),u("text",{x:y.width/2,y:y.height/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:a?.label})]})]})})},Hw=function(e){var r=e.monomerItem,n=x.useMemo(function(){if(Me(r)){var s=new $e(r);return new Ps(s)}else{var c=mr(r),d=_(c,2),h=d[0],f=d[1],v=new h(r);return new f(v)}},[r]),o=n.monomerSymbolElementId,a=n.monomerSize,i=a.width,l=a.height;return I("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:l,viewBox:"0 0 ".concat(i," ").concat(l),overflow:"visible",children:[u("use",{href:o,fill:"#CAD3DD",style:{filter:"drop-shadow(0px 2px 2px rgba(0, 0, 0, 0.4))"}}),u("text",{x:i/2,y:l/2,textAnchor:"middle",dominantBaseline:"central",pointerEvents:"none",fill:"#333",fontSize:"7px",fontWeight:"bold",children:r.label})]})},Vw=function(){var e,r,n=Wt(ae),o=x.useState(null),a=_(o,2),i=a[0],l=a[1],s=x.useRef(null),c=x.useRef(null),d=x.useRef(null),h=od();x.useEffect(function(){if(n){var g=function(b){l(b)};return n.events.setLibraryItemDragState.add(g),function(){n.events.setLibraryItemDragState.remove(g)}}},[n]),x.useEffect(function(){if(!(!ce.instance||!i)){var g=ce.instance.canvasWrapper.node();g&&(d.current=g.getBoundingClientRect())}},[i]);var f=(n==null||(e=n.ketcherRootElementBoundingClientRect)===null||e===void 0?void 0:e.left)||0,v=(n==null||(r=n.ketcherRootElementBoundingClientRect)===null||r===void 0?void 0:r.top)||0,p=d.current&&i&&i.position.x+f>=d.current.left&&i.position.x+f<=d.current.right&&i.position.y+v>=d.current.top&&i.position.y+v<=d.current.bottom;return x.useLayoutEffect(function(){var g=s.current;if(!(!g||!i))return c.current=requestAnimationFrame(function(){var y=i.position,b=y.x,M=y.y;if(p&&d.current){var A=h.k;g.style.transformOrigin="0 0",g.style.transform="translate(".concat(b,"px, ").concat(M,"px) scale(").concat(A,")")}else g.style.transform="translate(".concat(b,"px, ").concat(M,"px)")}),function(){c.current&&(cancelAnimationFrame(c.current),c.current=null)}},[p,i,h.k]),i?u("div",{className:$w.dragGhost,ref:s,children:_d(i.item)?u(qw,{preset:i.item}):u(Hw,{monomerItem:i.item})}):null},as,ls,ss,cs,us;function oi(){return oi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},oi.apply(null,arguments)}function Uw(t){return x.createElement("svg",oi({width:22,height:24,viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),as||(as=x.createElement("path",{fill:"transparent",d:"M0 0h21.503v24H0z"})),ls||(ls=x.createElement("path",{d:"M13.507 18.936l-2.04-1.92c-.7-.659-1.403-1.317-2.108-1.983v3.097c0 .43.003.86.007 1.289 0 .049-.007.09-.007.126v2.04c0 .834 0 1.557.003 2.02l.278.163c.719.3 1.434.307 2.151.033l4.264-2.469c-.358-.326-1.395-1.31-2.548-2.396zM6.159 19.39v-1.091L6.163 2.23v-.002L1.26 5.059C.421 5.647.002 6.482.002 7.553c0 2.944.006 5.888-.002 8.831-.003 1.08.398 1.913 1.212 2.517l4.946 2.856v-2.318-.05z",fill:"#676767"})),ss||(ss=x.createElement("path",{d:"M18.642 4.137l1.672.966c.785.58 1.187 1.385 1.188 2.41v8.974c0 1-.385 1.79-1.133 2.367l-1.423.822h-.004c-.097-.097-6.384-6.375-6.513-6.386.044-.044.56-.582 1.278-1.33L20.3 5.097l-1.658-.96z",fill:"url(#logo_svg__paint0_linear_5175_84899)"})),cs||(cs=x.createElement("path",{d:"M17.335 3.383L11.849.216c-.718-.29-1.455-.29-2.219.011l-.27.139s0 10.346.041 11.106c.341-.346 7.808-7.96 7.934-8.09z",fill:"url(#logo_svg__paint1_linear_5175_84899)"})),us||(us=x.createElement("defs",null,x.createElement("linearGradient",{id:"logo_svg__paint0_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},x.createElement("stop",{stopColor:"#3BC2D7"}),x.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})),x.createElement("linearGradient",{id:"logo_svg__paint1_linear_5175_84899",x1:19.854,y1:4.363,x2:11.579,y2:13.111,gradientUnits:"userSpaceOnUse"},x.createElement("stop",{stopColor:"#3BC2D7"}),x.createElement("stop",{offset:.74,stopColor:"#1D9DB1"})))))}var Ww=C("div",{target:"e1dr48d30"})(function(t){var e,r,n=t.theme;return{width:"430px",minHeight:"260px",padding:"0 18px",borderRadius:"6px",fontSize:"12px",color:n.ketcher.color.text.primary,fontWeight:(e=n.ketcher)===null||e===void 0||(e=e.font)===null||e===void 0||(e=e.weight)===null||e===void 0?void 0:e.regular,a:{color:"#167782"},".body":{borderRadius:"6px",padding:"5px 65px",overflowY:"auto",overflowX:"hidden",".versionName":{fontWeight:400,marginBottom:"2px"},".firstline":{display:"inline-block"},".links":{textAlign:"right"},".indigoVersion":{marginTop:"20px",display:"flex",gap:"2px"}},".headerContent":{display:"flex",justifyContent:"space-between",padding:"0 30px",a:{display:"flex",alignItems:"center",gap:"10px",textDecoration:"none",color:(r=n.ketcher)===null||r===void 0||(r=r.color)===null||r===void 0||(r=r.text)===null||r===void 0?void 0:r.primary},".title":{fontSize:"20px",lineHeight:"22px"}},".indigoFirstLine":{display:"inline-block"},dd:{margin:0,marginBottom:"0.2em"},dt:{marginTop:"3px"},".okButton":{border:"1px solid #333333",backgroundColor:"#FFFFFF",color:"#333333",display:"inline-flex",justifyContent:"center",alignItems:"center",outline:"none",minWidth:"70px",lineHeight:"14px",height:"24px",borderRadius:"4px",fontSize:"10px","&:hover":{color:"#333333",border:"1px solid  #333333"},"&:active":{color:"#333333",border:"1px solid #333333"},"&:disabled":{color:"rgba(51, 51, 51, 0.7)",border:"1px solid rgba(51, 51, 51, 0.7)"}},".aboutFooter":{borderTop:"1px solid #e1e5ea",margin:0,padding:"15px 0",display:"flex",justifyContent:"flex-end",alignItems:"center"}}},"");function ds(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function hs(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ds(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ds(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Gw(){var t=ne(),e=N($c);x.useEffect(function(){function r(){return n.apply(this,arguments)}function n(){return n=_r(We.mark(function o(){var a,i;return We.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(a=Sn.getIndigo(),!(a&&a.info)){s.next=11;break}return s.prev=2,s.next=5,a.info();case 5:i=s.sent,t(p1(hs(hs({},e),{},{indigoVersion:i.indigoVersion||""}))),s.next=11;break;case 9:s.prev=9,s.t0=s.catch(2);case 11:case"end":return s.stop()}},o,null,[[2,9]])})),n.apply(this,arguments)}r()},[t])}var Kw="http://lifescience.opensource.epam.com/ketcher/#feedback",fs="https://lifescience.opensource.epam.com/ketcher/index.html",Yw="http://lifescience.opensource.epam.com/",Xw="http://lifescience.opensource.epam.com/indigo/";function Zw(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!t.includes("T"))return t;var e=t.split("T"),r=_(e,2),n=r[0],o=r[1];return"".concat(n,"; ").concat(o)}function Qw(t){var e=t.isOpen,r=t.onClose,n=ne();Gw();var o=N($c),a=o.buildDate,i=o.indigoVersion,l=o.version,s=Zw(a),c=function(){n({type:"MODAL_CLOSE"}),r()};return u(re,{title:"",isOpen:e,onClose:c,hideHeaderBorder:!0,children:u(re.Content,{children:I(Ww,{children:[u("div",{className:"headerContent",children:I("a",{href:fs,target:"_blank",rel:"noopener noreferrer",children:[u(Uw,{}),u("span",{className:"title",children:"Ketcher"})]})}),u("div",{className:"body",children:I("dl",{children:[u("dt",{"data-testid":"build-version",children:I("a",{href:fs,target:"_blank",rel:"noopener noreferrer",children:["Version ",l]})}),I("dd",{"data-testid":"build-time",children:["Build at ",u("time",{children:s})]}),I("div",{className:"infoLinks",children:[u("dt",{children:u("a",{href:Kw,target:"_blank",rel:"noopener noreferrer",children:"Feedback"})}),u("dt",{children:u("a",{href:Yw,target:"_blank",rel:"noopener noreferrer",children:"EPAM Life Sciences"})})]}),u("div",{className:"indigoVersion",children:u("a",{href:Xw,target:"_blank",rel:"noopener noreferrer",children:"Indigo Toolkit"})}),u("div",{"data-testid":"build-indigo-version",children:i?I("dd",{children:["Version ",i]}):u("p",{children:"Standalone"})})]})}),u("div",{className:"aboutFooter",children:u("button",{onClick:c,className:"okButton","data-testid":"ok-button",children:"Ok"})})]})})})}function ps(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),r.push.apply(r,n)}return r}function Jw(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?ps(Object(r),!0).forEach(function(n){V(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ps(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function eM(){var t=x.useState(!1),e=_(t,2),r=e[0],n=e[1],o={isOpen:r,onClose:function(){return n(!1)}};return I(X,{children:[I("div",{style:{display:"flex",alignItems:"center"},children:[u(Kt,{iconName:"help",title:"Help (?)",onClick:function(){var i=nn.HELP_LINK||"master";window.open("https://github.com/epam/ketcher/blob/".concat(i,"/documentation/help.md#ketcher-macromolecules-mode"),"_blank")},testId:"help-button"}),u(Kt,{iconName:"about",title:"About",onClick:function(){return n(!0)},testId:"about-button"})]}),u(Qw,Jw({},o))]})}var tM=ms(xy);function cM(t){var e=t.onInit,r=t.ketcherId,n=t.theme,o=t.togglerComponent,a=t.monomersLibraryUpdate,i=t.monomersLibraryReplace,l=t.isMacromoleculesEditorTurnedOn,s=x.useRef(null),c=n?ye.merge(Xa,n):Xa,d=ye.merge(tM,{ketcher:c});return x.useEffect(function(){Ya.dispatch(i1(r))},[r]),u(Sd,{store:Ya,children:I(Oh,{theme:d,children:[u(Eh,{styles:wy}),u(Gy,{rootRef:s,isMacromoleculesEditorTurnedOn:l,children:u(r3,{ref:s,className:Cd,children:u(rM,{ketcherId:r,theme:c,togglerComponent:o,monomersLibraryUpdate:a,monomersLibraryReplace:i,onInit:e})})})]})})}function rM(t){var e=t.theme,r=t.togglerComponent,n=t.monomersLibraryUpdate,o=t.monomersLibraryReplace,a=t.onInit,i=ne(),l=x.useRef(null),s=N(U1),c=N(ae),d=N(g1),h=a3(),f=x.useState(!1),v=_(f,2),p=v[0],g=v[1],y=Uy(),b=x.useState(),M=_(b,2),A=M[0],m=M[1],w=x.useState(),S=_(w,2),k=S[0],E=S[1],O=x.useState([]),D=_(O,2),P=D[0],T=D[1],j=vo({id:xt.FOR_SEQUENCE}),L=j.show,F=vo({id:xt.FOR_SELECTED_MONOMERS}),R=F.show;x.useEffect(function(){return i(a1({theme:e,canvas:l.current,monomersLibraryUpdate:n,monomersLibraryReplace:o,onInit:a})),function(){i(l1(null))}},[i]),c3(),u3(),x.useEffect(function(){c?.events.rightClickSequence.add(function(B){var z=_(B,2),W=z[0],K=z[1];m(K),E(W),window.dispatchEvent(new Event("hidePreview")),i(jo(!0)),L({event:W,props:{sequenceItemRenderer:W.target.__data__}})}),c?.events.rightClickPolymerBond.add(function(B){var z=_(B,2),W=z[0],K=z[1];E(W),T([]),R({event:W,props:{polymerBondRenderer:K}})}),c?.events.rightClickSelectedMonomers.add(function(B){var z=_(B,2),W=z[0],K=z[1];T(K),E(W),R({event:W,props:{selectedMonomers:K}})}),c?.events.rightClickCanvas.add(function(B){var z=_(B,2),W=z[0],K=z[1];E(W),window.dispatchEvent(new Event("hidePreview")),i(jo(!0)),c.mode instanceof ai?(m(K),L({event:W,props:{}})):(T(K),R({event:W,props:{selectedMonomers:K}}))}),c?.events.toggleMacromoleculesPropertiesVisibility.add(function(){i(Rc({}))})},[c]),x.useEffect(function(){return c?.zoomTool.observeCanvasResize(),function(){c?.zoomTool.destroy()}},[c]),x.useEffect(function(){var B=function(W){var K=W.detail;K&&i(d1(K))};return window.addEventListener(Wi,B),function(){window.removeEventListener(Wi,B)}},[i]);var q=function(){i(z1())},H=x.useCallback(function(){g(function(B){return!B})},[]);return I(X,{children:[I(ke,{children:[I(ke.Top,{shortened:!p,"data-testid":"top-toolbar",children:[u(gw,{}),I(n3,{children:[u(Dw,{}),u(O3,{}),u(O5,{}),u(o3,{className:y?"toggler-component-wrapper--disabled":"",children:r}),u(Xo,{}),u(eM,{}),u(g3,{}),u(Xo,{}),u(kw,{})]})]}),u(ke.Left,{children:u(yw,{})}),I(ke.Main,{children:[u(Ew,{}),u(zw,{}),I(i3,{id:"polymer-editor-canvas","data-testid":"ketcher-canvas","data-canvasmode":"macromolecules-mode",preserveAspectRatio:"xMidYMid meet",ref:l,width:"100%",height:"100%",style:{overflow:"hidden",overflowClipMargin:"content-box"},children:[I("defs",{children:[u(Wx,{}),u(Ux,{}),u(Gx,{}),u(Kx,{}),u(Yx,{}),u(Xx,{}),u(Zx,{}),u(Jx,{}),u(Qx,{})]}),u("g",{className:"drawn-structures","data-testid":"drawn-structures"}),d&&u("rect",{x:0,y:0,width:"100%",height:"100%",fill:"transparent",pointerEvents:"all"})]}),h&&u(h3,{})]}),u(ke.Right,{hide:p,children:u(db,{toggleLibraryVisibility:H})}),u(ke.Bottom,{children:u(hw,{})}),u(ke.InsideRoot,{children:p&&u(fb,{onClick:H})})]}),u(E5,{}),u(Vw,{}),u($3,{selections:A,contextMenuEvent:k}),u(Ow,{selectedMonomers:P,contextMenuEvent:k}),u($x,{}),u(t3,{}),u(Kf,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:!!s,onClose:q,autoHideDuration:6e3,children:I(qx,{id:"error-tooltip",children:[u(Hx,{"data-testid":"error-tooltip",children:s}),u(Vx,{testId:"error-tooltip-close",iconName:"close",onClick:q})]})})]})}export{cM as default};
